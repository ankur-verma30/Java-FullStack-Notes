#########################
ğŸ”· Introduction to AWS
#########################
Cloud computing is the on-demand delivery of compute, storage, networking, databases, and services over the internet with pay-as-you-go pricing.

ğŸ”„ Key characteristics
â¤ On-demand self-service â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ no manual provisioning
â¤ Broad network access â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ accessible over internet
â¤ Resource pooling â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ shared infrastructure (multi-tenant)
â¤ Rapid elasticity â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ scale up/down instantly
â¤ Measured service â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ pay only for what you use
ğŸ‘‰ Cloud is a model that allows us to rent IT resources instead of owning physical infrastructure, improving scalability, cost efficiency, and speed.


ğŸ”„ Public Cloud vs Private Cloud vs Hybrid Cloud
ğŸ”„ Public Cloud
Infrastructure owned and managed by third-party providers like AWS, Azure, GCP.

âœ… Examples
â¤ AWS EC2, S3
â¤ Azure VM
â¤ Google Compute Engine

ğŸ” Key points
â¤ Resources shared among multiple customers
â¤ Accessible over the internet
â¤ Highly scalable
â¤ Pay-as-you-go

ğŸ” Use cases
â¤ Startups
â¤ Web & mobile applications
â¤ Dev/Test environments


ğŸ”„ Private Cloud
Infrastructure dedicated to a single organization.

âœ… Examples
â¤ On-premise data centers
â¤ VMware-based private cloud
â¤ OpenStack

ğŸ” Key points
â¤ Full control over data and security
â¤ Higher cost
â¤ Limited scalability compared to public cloud

ğŸ” Use cases
â¤ Banks
â¤ Government organizations
â¤ Compliance-heavy systems


ğŸ”„ Hybrid Cloud
Combination of public + private cloud working together.

ğŸ” Key points
â¤ Sensitive data stays in private cloud
â¤ Compute-intensive workloads run in public cloud
â¤ Best of both worlds

ğŸ” Use cases
â¤ Enterprises with legacy systems
â¤ Gradual cloud migration
â¤ Disaster recovery

ğŸ”„ Comparison Summary
â¤ Public â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ Cost-effective, scalable
â¤ Private â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ Secure, controlled
â¤ Hybrid â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ Flexible, enterprise-friendly


â“ Why is Public Cloud So Popular?
ğŸ” Core reasons
â¤ No upfront cost
â¤ Instant scalability
â¤ Global availability
â¤ High availability & fault tolerance
â¤ Managed services reduce operational overhead

ğŸ” Technical advantages
â¤ Auto Scaling
â¤ Load Balancers
â¤ Managed Databases (RDS, DynamoDB)
â¤ Built-in monitoring & security

ğŸ” Business advantages
â¤ Faster time-to-market
â¤ Focus on core product instead of infra
â¤ Suitable for unpredictable workloads
ğŸ‘‰ Public cloud became popular because it removes infrastructure ownership, allows rapid scaling, and significantly reduces operational cost.


â“ Why AWS?
1ï¸âƒ£ Market & Ecosystem
â¤ First mover in cloud (launched in 2006)
â¤ Largest market share
â¤ Most mature cloud ecosystem

2ï¸âƒ£ Global Infrastructure
â¤ Regions, Availability Zones, Edge Locations
â¤ Low latency, high availability

3ï¸âƒ£ Service Variety
â¤ Compute â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ EC2, Lambda
â¤ Storage â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ S3, EBS
â¤ Databases â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ RDS, DynamoDB
â¤ Networking â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ VPC, ELB
â¤ DevOps â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ CodePipeline, CodeBuild
â¤ Security â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ IAM, KMS

4ï¸âƒ£ Reliability & Security
â¤ IAM for fine-grained access control
â¤ Compliance with global standards (ISO, SOC, GDPR)
â¤ Highly fault-tolerant architecture


ğŸ”„ Trends: People Moving Back to Private Cloud
â“Why is this happening?
Despite public cloud popularity, some companies are repatriating workloads.
ğŸ‘‰ Key reasons
1ï¸âƒ£ High long-term cost
â¤ Continuous usage â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ expensive at scale

2ï¸âƒ£ Data sovereignty & compliance
â¤ Strict regulations (banking, healthcare)

3ï¸âƒ£ Predictable workloads
â¤ No benefit of elastic scaling

4ï¸âƒ£ Vendor lock-in
â¤ Heavy dependency on cloud-native services

5ï¸âƒ£ Performance-sensitive systems
â¤ Low-latency workloads prefer on-prem


â“ Does this mean public cloud is failing in the market? âŒ No
â¤ Cloud is still dominant
â¤ Trend mainly applies to:
    âœ”ï¸ Large enterprises
    âœ”ï¸ Stable, predictable workloads

â¤ Current industry direction
    âœ”ï¸ Hybrid cloud is growing the fastest
    âœ”ï¸ Companies choose workload-based deployment
ğŸ‘‰ Instead of abandoning public cloud, companies are becoming more strategic by choosing hybrid models based on workload requirements.

ğŸ”„ Takeaways
â¤ Cloud = Renting IT infrastructure
â¤ Public cloud dominates due to scalability & cost
â¤ AWS leads due to maturity & global reach
â¤ Private cloud still relevant for compliance-heavy workloads
â¤ Hybrid cloud is the future for enterprises


########################################
ğŸ”· AWS IAM(Identify Access Management)
########################################
â¤ AWS IAM is a global AWS service used to manage users, permissions, and access to AWS resources securely.
â¤ IAM allows us to control who can access AWS, what actions they can perform, and on which resources.

ğŸ”„ Why IAM is Needed?
ğŸŒŸ Without IAM:
    âœ”ï¸ Everyone uses root account âŒ
    âœ”ï¸ No permission boundaries âŒ
    âœ”ï¸ High risk of data breach âŒ

ğŸŒŸ With IAM:
    âœ”ï¸ Fine-grained access control
    âœ”ï¸ Least privilege principle
    âœ”ï¸ Secure multi-user AWS environment


ğŸ”„ IAM Core Components
1ï¸âƒ£ IAM Users
Represents a human or application that needs AWS access.

ğŸŒŸ Characteristics
â¤ Has unique credentials
â¤ Can log in via:
    âœ”ï¸ AWS Console
    âœ”ï¸ AWS CLI
    âœ”ï¸ SDK / API
â¤ Credentials
    âœ”ï¸ Password (Console access)
    âœ”ï¸ Access Key + Secret Key (Programmatic access)
â¤ Best Practices
    âŒ Never use root user
    âŒ Never hardcode access keys
    âœ… Enable MFA


2ï¸âƒ£ IAM Groups
Collection of users with similar permissions.

â“ Why groups?
â¤ Easier permission management
â¤ Avoid assigning policies individually

âœ… Example
â¤ Developers group â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ EC2, S3 access
â¤ Admins group â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ Full access
ğŸ‘‰ Groups cannot contain groups


3ï¸âƒ£ IAM Roles
Used to grant temporary permissions.
âš¡ Key idea: Roles are assumed, not logged in.
â¤ Used by
    âœ”ï¸ EC2
    âœ”ï¸ Lambda
    âœ”ï¸ ECS
    âœ”ï¸ Cross-account access

â“ Why roles instead of access keys?
    âœ”ï¸ Temporary credentials
    âœ”ï¸ Auto-rotation
    âœ”ï¸ More secure


âœ… Common Scenario
â¤ EC2 needs to access S3
â¤ âœ”ï¸ Attach IAM Role to EC2
â¤ âŒ Donâ€™t store access keys inside EC2


4ï¸âƒ£ IAM Policies
Defines permissions in JSON format.
ğŸ”— Types of Policies
    âœ”ï¸ AWS Managed Policies
    âœ”ï¸ Customer Managed Policies
    âœ”ï¸ Inline Policies

ğŸ”„ IAM Policy Structure (JSON)
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Action": "s3:GetObject",
      "Resource": "arn:aws:s3:::my-bucket/*"
    }
  ]
}

ğŸŒŸ Key Elements
â¤ Effect â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ Allow / Deny
â¤ Action â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ What can be done
â¤ Resource â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ On which resource
â¤ Condition â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ Optional constraints
ğŸ‘‰ Explicit Deny always wins


ğŸ”„ Types of Access Control
1ï¸âƒ£ Identity-Based Policies
â¤ Attached to users, groups, roles
â¤ Most common

2ï¸âƒ£ Resource-Based Policies
Attached to resource itself
âœ… Example:
    âœ”ï¸ S3 bucket policy
    âœ”ï¸ Lambda permission policy
ğŸ‘‰ Resource-based policies allow cross-account access


ğŸ”„ IAM Authentication vs Authorization
ğŸ”„ Root User 
â¤ Created when AWS account is created
â¤ Has full unrestricted access

âš¡ Root User Best Practices
â¤ Enable MFA
â¤ Never use for daily work
â¤ Store credentials securely


ğŸ”„ IAM Security Best Practices 
â¤ Principle of Least Privilege
â¤ Use roles instead of access keys
â¤ Enable MFA
â¤ Rotate credentials
â¤ Use IAM Access Analyzer
â¤ Use AWS CloudTrail for auditing


ğŸ”„ IAM Global vs Regional
â¤ IAM is GLOBAL
â¤ Policies apply across all regions


ğŸ”„ Common Scenarios
Scenario 1ï¸âƒ£
Lambda needs DynamoDB access
âœ”ï¸ Assign IAM Role to Lambda

Scenario 2ï¸âƒ£
One AWS account wants to access another accountâ€™s S3
âœ”ï¸ Use IAM Role + Bucket Policy

Scenario 3ï¸âƒ£
Give developer read-only EC2 access
âœ”ï¸ Attach AWS managed policy: AmazonEC2ReadOnlyAccess


ğŸ”„ IAM vs Other Security Services
| Service         | Purpose                   |
| --------------- | ------------------------- |
| IAM             | Identity & access control |
| KMS             | Encryption                |
| Cognito         | App user authentication   |
| Secrets Manager | Secrets storage           |


#####################################
ğŸ”· AWS EC2(Elastic Compute Cloud)
#####################################
â¤ EC2 (Elastic Compute Cloud) is an AWS service that provides scalable virtual servers (instances) in the cloud.
â¤ EC2 allows us to launch and manage virtual machines with full control over OS, compute, storage, and networking.

ğŸ”„ Why Use an EC2 Instance?
âŒ Problems with traditional servers
â¤ High upfront hardware cost
â¤ Fixed capacity
â¤ Manual scaling
â¤ Long setup time

âœ… EC2 Advantages
â¤ On-demand servers in minutes
â¤ Pay only for usage
â¤ Easy scaling
â¤ Global infrastructure
â¤ High availability
ğŸŒŠ We use EC2 when we need full control over the server, long-running applications, or custom runtime environments.

ğŸ”„ Different Types of EC2 Instances
1ï¸âƒ£ General Purpose: Balanced CPU, memory, networking
âœ… Examples: t3, t4g, m5
ğŸŒŸ Use cases
    âœ”ï¸ Web applications
    âœ”ï¸ Backend APIs
    âœ”ï¸ Dev/test


2ï¸âƒ£ Compute Optimized: High CPU performance
âœ… Examples: c5, c6g
ğŸŒŸ Use cases
    âœ”ï¸ CPU-intensive apps
    âœ”ï¸ Game servers
    âœ”ï¸ Data processing


3ï¸âƒ£ Memory Optimized: Large RAM
âœ… Examples: r5, x1
ğŸŒŸ Use cases
    âœ”ï¸ In-memory databases
    âœ”ï¸ Caching
    âœ”ï¸ Big data analytics


4ï¸âƒ£ Storage Optimized: High disk I/O
âœ… Examples: i3, d2
ğŸŒŸ Use cases
    âœ”ï¸ Data warehousing
    âœ”ï¸ Large datasets


5ï¸âƒ£ Accelerated Computing: GPU / ML workloads
âœ… Examples: p, g
ğŸŒŸ Use cases
    âœ”ï¸ Machine learning
    âœ”ï¸ Video processing
â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ Instance type defines hardware capacity, not software.


ğŸ”„ How to Connect to an EC2 Instance?
ğŸŒŸ For Linux EC2 (SSH)
âš¡ Steps:
1ï¸âƒ£ Download .pem key file
2ï¸âƒ£ Set permission
ğŸ”— chmod 400 key.pem

3ï¸âƒ£ Connect
ğŸ”— ssh -i key.pem ec2-user@<public-ip>

â“ Why key pair is needed?
âœ… Secure authentication instead of passwords


ğŸ”„ How to Deploy an Application on EC2?
âœ… Example: Node.js / Java / React / Backend App
ğŸŒŸ Steps:
1ï¸âƒ£ Launch EC2
2ï¸âƒ£ Connect via SSH
3ï¸âƒ£ Install runtime
ğŸ”— sudo yum install nodejs -y

4ï¸âƒ£ Upload code (Git / SCP)
ğŸ”— git clone <repo-url>

5ï¸âƒ£ Install dependencies
ğŸ”— npm install

6ï¸âƒ£ Start application
ğŸ”— npm start


ğŸ”„ How to Access the Application from Outside World?
1ï¸âƒ£ Public IP / Elastic IP
â¤ Assign public IP to EC2
â¤ Or use Elastic IP (static)

2ï¸âƒ£ Security Group Configuration
Allow inbound traffic:
    âœ”ï¸ HTTP â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ Port 80
    âœ”ï¸ HTTPS â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ Port 443
    âœ”ï¸ App port â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ 3000 / 8080
ğŸ‘‰ Security Group acts as a firewall

3ï¸âƒ£ URL Access
ğŸ”— http://<public-ip>:<port>

ğŸ”„ Common Issues
âš¡ App running but not accessible: Check Security Group inbound rules

ğŸ”„ How EC2 Is Exposed Publicly (Production Setup)
â¤ Application Load Balancer
â¤ Auto Scaling Group
â¤ Multiple AZs

ğŸ”„ What Are AWS Regions?
A Region is a geographical area where AWS has data centers.
âœ… Examples
âœ”ï¸ us-east-1
âœ”ï¸ ap-south-1 (Mumbai)

â“ Why regions exist
â¤ Low latency
â¤ Compliance
â¤ Fault isolation

ğŸ”„ What Are Availability Zones (AZs)?
An Availability Zone is an isolated data center inside a region.
âœ… Example
âœ”ï¸ ap-south-1a
âœ”ï¸ ap-south-1b
â¤ Each region has multiple AZs
â¤ AZs are physically separate
â¤ Connected via high-speed network

ğŸ”„ Region vs Availability Zone
| Region           | Availability Zone        |
| ---------------- | ------------------------ |
| Geographic area  | Data center              |
| Multiple AZs     | Inside one region        |
| Used for latency | Used for fault tolerance |

ğŸ”„ Why Multi-AZ is Important?
â¤ High availability
â¤ Fault tolerance
â¤ Disaster recovery


##############################
ğŸ”· Virtual Private Cloud(VPC)
##############################
â¤ VPC (Virtual Private Cloud) is a logically isolated virtual network in AWS where you launch and manage AWS resources.
â¤ VPC is a private network in AWS that gives us full control over IP addressing, subnets, routing, and network security.

ğŸ”„ Why Do We Need VPC?
â— Without VPC:
    âœ”ï¸ No network isolation
    âœ”ï¸ No control over IP ranges
    âœ”ï¸ No security boundaries

âœ… With VPC:
    âœ”ï¸ Network isolation
    âœ”ï¸ Custom IP addressing
    âœ”ï¸ Controlled inbound/outbound traffic
    âœ”ï¸ Secure architecture
ğŸ‘‰ We need VPC to design secure, isolated, and scalable cloud networks similar to on-premise data centers.


ğŸ”„ Core Components of VPC
1ï¸âƒ£ CIDR Block
2ï¸âƒ£ Subnets
3ï¸âƒ£ Route Tables
4ï¸âƒ£ Internet Gateway
5ï¸âƒ£ NAT Gateway
6ï¸âƒ£ Security Groups
7ï¸âƒ£ Network ACLs


ğŸ”„ Concept of CIDR Block & Subnetting
CIDR (Classless Inter-Domain Routing) defines the IP address range for the VPC.

âœ… Example: 10.0.0.0/16
âœ”ï¸ /16 â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ network bits
âœ”ï¸ Total IPs = 65,536


ğŸ”„ Why CIDR is Important?
â¤ Defines how many IPs are available
â¤ Helps divide network into subnets
â¤ Avoids IP conflicts


ğŸ”„ Subnetting Concept
Dividing a VPC CIDR into smaller IP ranges.

âœ… Example:
âœ”ï¸ VPC: 10.0.0.0/16
âœ”ï¸ Subnet 1: 10.0.1.0/24
âœ”ï¸ Subnet 2: 10.0.2.0/24
ğŸ‘‰ Each subnet belongs to one AZ only


ğŸ”„ How VPC Components Interact
User â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ Internet â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ Internet Gateway â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ Route Table â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶
Public Subnet â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ EC2 Instance

ğŸ”— For private access:
Private Subnet â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ NAT Gateway â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ Internet Gateway


ğŸ”„ How to Create a VPC
Step-1ï¸âƒ£: Create VPC
Step-2ï¸âƒ£: Choose CIDR block
âœ… Example: 10.0.0.0/16
ğŸ‘‰ VPC is regional


ğŸ”„ How to Create Subnet (After VPC)
Steps:
1ï¸âƒ£ Select VPC
2ï¸âƒ£ Choose Availability Zone
3ï¸âƒ£ Assign subnet CIDR
âœ… Example:
Public Subnet: 10.0.1.0/24
Private Subnet: 10.0.2.0/24

ğŸ‘‰ Subnet is AZ-specific


ğŸ”„ Public Subnet vs Private Subnet
ğŸ” Public Subnet
â¤ Has route to Internet Gateway
â¤ Used for:
    âœ”ï¸ EC2 (Web servers)
    âœ”ï¸ Load Balancer

ğŸ” Private Subnet
â¤ No direct internet access
â¤ Used for:
    âœ”ï¸ Databases
    âœ”ï¸ Backend services
âš¡ A subnet becomes public or private based on route table configuration, not by name.


ğŸ”„ How to Create Internet Gateway (IGW)
(Used for internet access)
Steps:
1ï¸âƒ£ Create Internet Gateway
2ï¸âƒ£ Attach it to VPC
ğŸ”„ One IGW per VPC


ğŸ”„ Route Table
â¤ Controls where network traffic goes.
â¤ Default Route Table
    âœ”ï¸ Allows internal VPC traffic


ğŸ”„ Public Route Table
â¤ Add route: 0.0.0.0/0 â†’ Internet Gateway
â¤ Associate with: Public Subnet

ğŸ”„ Private Route Table
â¤ Add route: 0.0.0.0/0 â†’ NAT Gateway
â¤ Associate with: Private Subnet


ğŸ”„ NAT Gateway (Private Subnet Internet Access)
â¤ Allows outbound internet
â¤ Blocks inbound internet
ğŸ”„ Placed in public subnet


ğŸ”„ Security Components Interaction
1ï¸âƒ£ Security Group
â¤ Instance-level firewall
â¤ Stateful
â¤ Allow rules only

2ï¸âƒ£ NACL
â¤ Subnet-level firewall
â¤ Stateless
â¤ Allow & deny rules


ğŸ”„ VPC Setup Flow
â¤ Create VPC (CIDR)
â¤ Create Subnets (Public & Private)
â¤ Create Internet Gateway
â¤ Attach IGW to VPC
â¤ Create Route Tables
â¤ Add routes
â¤ Associate route tables with subnets
â¤ Launch EC2 in correct subnet
â¤ Configure Security Groups

âœ… Real-World Example:: Web Application Architecture
â¤ Public Subnet â†’ ALB, EC2
â¤ Private Subnet â†’ RDS
â¤ NAT Gateway â†’ Updates from private subnet


ğŸ”„ Common Traps
â¤ Subnet â‰  AZ (Subnet belongs to AZ)
â¤ Public subnet â‰  public IP
â¤ IGW alone â‰  internet access
â¤ Route table defines public/private
â¤ NAT Gateway must be in public subnet


############################
ğŸ”· Security Group and NACL
############################
Security Group = Virtual Firewall for Instances
â¤ Applied at EC2 instance level
â¤ Controls traffic inbound and outbound
â¤ Stateful â†’ If inbound traffic is allowed, the response automatically allowed outbound

ğŸ” Key Characteristics
| Feature          | Security Group                                        |
| ---------------- | ----------------------------------------------------- |
| Scope            | **Instance-level**                                    |
| Traffic control  | Inbound + Outbound                                    |
| Stateful         | âœ”ï¸ Yes                                                 |
| Allow/Deny       | **Only Allow** rules                                  |
| Default Behavior | All inbound traffic **blocked**, outbound **allowed** |
| Evaluation       | All rules checked, if one matches â†’ allowed           |
| Logging          | Supported via VPC Flow Logs                           |


ğŸ”· Network Access Control List(NACL)
NACL = Firewall for Subnets
â¤ Applied at Subnet level
â¤ Controls inbound & outbound traffic for all resources inside the subnet
â¤ Stateless â†’ Return traffic must be explicitly allowed


ğŸ” Key Characteristics
| Feature      | NACL                                      |
| ------------ | ----------------------------------------- |
| Scope        | **Subnet-level**                          |
| Stateful     | âŒ No                                     |
| Allow/Deny   | Supports **Allow + Deny**                 |
| Rule Order   | **Evaluated in order** (Lowest â†’ Highest) |
| Default Rule | Allow everything (modifiable)             |
| Logging      | Supported via VPC Flow Logs               |


ğŸ” STATEFUL vs STATELESS
| Feature                               | Security Group | NACL    |
| ------------------------------------- | -------------- | -----   |
| Return traffic allowed automatically? | âœ”ï¸ Yes         | âŒ No   |
| Need separate rule for response?      | âŒ No         | âœ”ï¸ Yes   |
| Need separate rule for logging?       | âœ”ï¸ Yes         | âŒ No   |


ğŸ” Default Rules
| Component      | Default Behavior                         |
| -------------- | ---------------------------------------- |
| Security Group | **Deny all inbound**, allow all outbound |
| NACL (default) | Allow all inbound and outbound           |
â—Trap â†’ Many mistakenly say NACL blocks everything by default


ğŸ” Order of Operation
Traffic Flow Check:

                     Internet
                        |
                  Internet Gateway
                        |
                   VPC Router
                        |
               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               |      NACL        |  â† Stateless, subnet-level
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        |
               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               | Security Group   |  â† Stateful, instance-level
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        |
                     EC2


ğŸ” Use Cases
| Scenario                    | Use Security Group | Use NACL  |
| --------------------------- | ------------------ | --------- |
| Protect individual EC2      | âœ”ï¸ Yes              | âŒ No    |
| Control subnet-wide traffic | âŒ No              | âœ”ï¸ Yes    |
| Block specific IPs          | âŒ No              | âœ”ï¸ Yes    |
| Fine-grained rules          | âœ”ï¸ Yes              | âŒ Limited|
| Allow both HTTP & SSH       | âœ”ï¸ Yes              | âœ”ï¸ Yes     |


ğŸ” Common Traps & Answers
| Question                                  | Correct Answer                                |
| ----------------------------------------- | --------------------------------------------- |
| Can SG deny rules?                        | âŒ Only allow rules                            |
| Can SG be attached to multiple instances? | âœ”ï¸ Yes                                         |
| Can a subnet have multiple NACLs?         | âŒ Only one at a time                          |
| Why NACL is stateless?                    | Must define rules for both request & response |


âœ… Example Scenario
You are hosting a web application on an EC2 instance.

Requirement:
â¤ Public users should access the app using HTTP (80) or HTTPS (443)
â¤ Only DevOps team should access server via SSH (22)
â¤ Database is in private subnet, accessible only by the web server

We will configure:
1ï¸âƒ£ Security Group for Web Server (EC2)
| Rule Type       | Direction | Port         | Source                         | Reason                    |
| --------------- | --------- | ------------ | ------------------------------ | ------------------------- |
| HTTP            | Inbound   | 80           | 0.0.0.0/0                      | Public can access website |
| HTTPS           | Inbound   | 443          | 0.0.0.0/0                      | Secure public access      |
| SSH             | Inbound   | 22           | Your IP (e.g., 183.89.***.***) | Admin access only         |
| Database Access | Outbound  | 3306 (MySQL) | DB SG                          | App to DB communication   |
âš¡ Note: Outbound default is ALLOW ALL, often kept unchanged.


2ï¸âƒ£ Security Group for Database (RDS / Private EC2 DB)
| Direction | Port         | Source          | Purpose                             |
| --------- | ------------ | --------------- | ----------------------------------- |
| Inbound   | 3306 (MySQL) | WebServer-SG-ID | Only web server can access database |
| Outbound  | All          | Default         | For response traffic                |
âš¡ Note: Using Security Group ID instead of IP increases security.


3ï¸âƒ£ NACL Rules Example â€” Public Subnet
NACL is statelessm so you must add inbound and outbound both.
| Rule# | Direction | Protocol | Port | Source/Destination | Allow/Deny | Purpose              |
| ----- | --------- | -------- | ---- | ------------------ | ---------- | -------------------- |
| 100   | Inbound   | TCP      | 80   | 0.0.0.0/0          | ALLOW      | Public HTTP traffic  |
| 110   | Inbound   | TCP      | 443  | 0.0.0.0/0          | ALLOW      | HTTPS                |
| 120   | Inbound   | TCP      | 22   | Your IP            | ALLOW      | Admin SSH            |
| â˜…     | Inbound   | All      | All  | 0.0.0.0/0          | DENY       | Deny everything else |

Outbound:
| Rule# | Protocol | Port       | Destination | Allow/Deny | Purpose        |
| ----- | -------- | ---------- | ----------- | ---------- | -------------- |
| 100   | TCP      | 1024-65535 | 0.0.0.0/0   | ALLOW      | Return traffic |
| â˜…     | All      | All        | 0.0.0.0/0   | DENY       | Default deny   |


4ï¸âƒ£ NACL Rules Example â€” Private Subnet
Only allow database communication from the web server subnet

| Direction | Protocol | Port | Source             | Allow/Deny |
| --------- | -------- | ---- | ------------------ | ---------- |
| Inbound   | TCP      | 3306 | Public-subnet-CIDR | ALLOW      |
| Inbound   | All      | All  | 0.0.0.0/0          | DENY       |
| Outbound  | All      | All  | 0.0.0.0/0          | DENY       |



#############
ğŸ”· Route53
#############
Route 53 is AWSâ€™s global DNS & traffic management service designed for:
â¤ Domain registration
â¤ DNS resolution
â¤ Traffic routing + Load steering
â¤ Health-based failover
â¤ Global performance optimization

It runs across AWSâ€™s globally distributed edge locations â€” the same network as CloudFront â€” to provide ultra-low-latency DNS responses anywhere in the world.


â“ WHY the name Route â€œ53â€?
â¤ 53 is the port number of DNS protocol (UDP/TCP port 53)
â¤ â€œRouteâ€ â†’ network routing + traffic steering
    âœ”ï¸ Clever naming rooted in fundamentals


ğŸ”„ Core Components & Concepts
| Component             | Role                                        |
| --------------------- | ------------------------------------------- |
| **Hosted Zone**       | Container for all DNS records of a domain   |
| **DNS Records**       | Mapping of names â†’ IPs / resources          |
| **Authoritative DNS** | Route 53 answers officially for your domain |
| **Health Checks**     | Remove unhealthy endpoints automatically    |
| **Routing Policies**  | Intelligent traffic distribution logic      |


ğŸ”‘ Types of Hosted Zones
| Type                    | Use                          |
| ----------------------- | ---------------------------- |
| **Public Hosted Zone**  | Domain available on Internet |
| **Private Hosted Zone** | DNS restricted inside VPC    |
ğŸ‘‰ Private DNS avoids exposing internal service IPs publicly.


ğŸ” DNS Record Types Supported
| Record                        | Purpose                                             |
| ----------------------------- | --------------------------------------------------- |
| **A**                         | Name â†’ IPv4                                         |
| **AAAA**                      | Name â†’ IPv6                                         |
| **CNAME**                     | Name â†’ Another name                                 |
| **MX**                        | Email routing                                       |
| **TXT**                       | Verification, SPF, DKIM                             |
| **NS**                        | Delegation to name servers                          |
| **Alias** (Route 53-specific) | Map AWS services with automatic health + dynamic IP |

ğŸ‘‰ Alias records automatically track changing cloud targets
âœ… Example: ALB DNS â†’ never changes, but IPs change every minute


ğŸ” Route 53 as a Global Load Routing Engine
Route 53 is not a load balancer, but decides where users go globally:

Supported Routing Policies
| Routing Type           | What it does               | Use Case                   |
| ---------------------- | -------------------------- | -------------------------- |
| **Simple**             | One record â†’ One IP        | Basic websites             |
| **Weighted**           | Split traffic %            | Blue/Green deploy          |
| **Latency-based**      | Closest AWS region         | Global apps                |
| **Geolocation**        | Based on user location     | Legal, GDPR                |
| **Geo-proximity**      | Regional preference shift  | Regional migrations        |
| **Failover**           | Primary + Secondary        | DR setups                  |
| **Multi-value Answer** | Multiple healthy endpoints | Client-side load selection |
âœ”ï¸ Route 53 + Health Checks => Self-repairing DNS


ğŸ” Health Checks
Monitors:
â¤ HTTP/HTTPS/TCP
â¤ Latency, status codes
â¤ String match inside HTTP body
â¤ Can trigger CloudWatch alarms

If endpoint fails:
â¤ Automatically removed from DNS responses
â†’ User gets only healthy locations

Failure Detection Time:
â¤ ~15â€“45 seconds depending on probing interval


ğŸ” DNS resolution works inside Route 53
User Browser
     â”‚
     â–¼
Local DNS Resolver (ISP, OS cache)
     â”‚ (no cached answer)
     â–¼
Root DNS Servers (.)
     â”‚
     â–¼
TLD DNS (.com, .in, etc.)
     â”‚
     â–¼
Route 53 Authoritative Name Servers
     â”‚
     â–¼
Return IP â†’ Browser connects to target
âœ”ï¸ Route 53 sits at the authoritative layer


ğŸ” Global Anycast DNS Architecture
â¤ Every Route 53 name server:
    âœ”ï¸ Is deployed in multiple physical locations
    âœ”ï¸ Uses Anycast IP addressing
â¤ Result:
    âœ”ï¸ DNS request resolves at the closest edge location
    âœ”ï¸ Fast lookup + high resiliency
ğŸ‘‰ Even if entire region fails â†’ DNS still responds from other edges


âš¡Alias vs CNAME
| Feature                  | Alias   | CNAME    |
| ------------------------ | -----   | ------   |
| For root domain?         | âœ”ï¸ Yes | âŒ No    |
| Health check integration | âœ”ï¸ Yes | âŒ No    |
| DNS Query cost           | Free    | Billed   |
| Tracks AWS resource IPs  | âœ”ï¸ Yes | âŒ No    |
âœ… Example:
example.com â†’ ALIAS to ALB
www.example.com â†’ CNAME to example.com

Alias supports AWS resources:
â¤ CloudFront
â¤ ALB / NLB
â¤ API Gateway
â¤ S3 Static Websites
â¤ Global Accelerator


âœ… DNS + Load Balancer + VPC + Routing Example
User â†’ DNS Query â†’ Route 53 (Latency Rule)
         â”‚
         â–¼
Closest Region ALB (Health OK?)
         â”‚
         â–¼
Target EC2 or ECS Service â†’ App


If Region A goes down:
Traffic shifts â†’ Region B (Failover Rule)

âœ”ï¸ No downtime
âœ”ï¸ No manual changes
âœ”ï¸ Global resiliency


ğŸ” Common Architectures Using Route 53
| Architecture Goal             | Best Route Policy       |
| ----------------------------- | ----------------------- |
| Disaster recovery             | Failover                |
| Global low latency            | Latency-based           |
| Feature rollout 5% of traffic | Weighted                |
| Legal restrictions            | Geolocation             |
| Multi-region active-active    | Latency / Geo-proximity |


ğŸ” Security Perspective
â¤ Route 53 DNS can work with:
    âœ”ï¸ DNSSEC
    âœ”ï¸ Shield Advanced (DDoS protection)
    âœ”ï¸ Firewall Manager

â¤ Protects from:
    âœ”ï¸ DNS spoofing
    âœ”ï¸ DNS reflection attacks


âœ”ï¸ Mental Model
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚ Global Anycast DNS Network â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
             Route 53 Authority
   (Records + Policies + Health Checks)
                    â”‚
   Intelligent Traffic Distribution
                    â”‚
   AWS & On-Prem Endpoints Anywhere

â¤ Route 53 = DNS + Traffic Engineering + Health Aware Routing
â¤ It makes the right user reach the right endpoint globally.


####################################
ğŸ”· AWS S3( Simple Storage Service)
####################################
S3 is an object storage system used to store unlimited data with extreme durability and global scalability. It is one of the core building blocks of AWS, used across almost every service.


ğŸ” S3â€™s Core Design Philosophy
| Feature                    | What it means                             |
| -------------------------- | ----------------------------------------- |
| **Object Storage**         | Data stored as objects (not files/blocks) |
| **Unlimited Scale**        | Infrastructure expands automatically      |
| **11 9s Durability**       | 99.999999999% object survival             |
| **Global Namespace**       | Bucket name must be unique per region     |
| **High Availability**      | Data stored across â‰¥ 3 Availability Zones |
| **Designed for 1000s TPS** | Parallelism built in                      |
ğŸ‘‰ S3 is a distributed system, not a file system.


ğŸ§± Internal Data Structure of S3
Every object =
Key (name/path)
Value (actual data)
Version ID (optional)
Metadata
ACL/Permissions

âœ… Example â€œpathâ€:mybucket/images/profile.png
ğŸ‘‰ This is not a folder â€” â€œfolderâ€ behavior is virtual, simulated by key prefixes.


ğŸ” How S3 Achieves 11 9s Durability
Durability achieved by:
âœ”ï¸ Automatic replication across 3+ AZs
âœ”ï¸ Checksums on write
âœ”ï¸ Self-healing storage
âœ”ï¸ Background scans/repair

Even if:
â¤ 1 complete AZ destroyed â†’ data safe
â¤ Hardware failures â†’ auto-replicated


ğŸ” Consistency Model
| Operation              | Consistency           |
| ---------------------- | --------------------- |
| New Object PUT         | **Strong consistent** |
| UPDATE existing object | **Strong**            |
| DELETE                 | **Strong**            |
ğŸ‘‰ Older S3 was eventually consistent â€” now strong consistency for all operations.


ğŸ” Buckets & Regions
Buckets are regional resources:

âœ… Example:
ap-south-1 (Mumbai)
us-east-1 (N. Virginia)
ğŸ‘‰ Data physically remains within chosen region (unless replicated).


ğŸ” Storage Classes (Cost vs Performance)
| Class                    | Usage                                  | Cost    | AZ Redundancy |
| ------------------------ | -------------------------------------- | ------- | ------------- |
| **Standard**             | Frequent access                        | ğŸ’°ğŸ’°    | Multi-AZ      |
| **Standard-IA**          | Infrequent access                      | ğŸ’°      | Multi-AZ      |
| **One-Zone-IA**          | Low-cost archive                       | ğŸ’µ      | Single-AZ âŒ   |
| **Glacier Instant**      | Archive, Quick read                    | ğŸ’µ      | Multi-AZ      |
| **Glacier Flexible**     | Long archive                           | ğŸ’µâ†“     | Hours         |
| **Glacier Deep Archive** | Lowest cost                            | ğŸ’µâ†“â†“    | 12â€“48h        |
| **Intelligent Tiering**  | Automatically moves data between tiers | Dynamic | Multi-AZ      |


ğŸ”„ Lifecycle Policies
Automate object transitions:
    âœ”ï¸ From Standard â†’ IA â†’ Glacier â†’ Delete
    âœ”ï¸ Based on age/time rules
Useful for reducing cost automatically.


ğŸ” Access Control Deep Understanding
S3 security = Layered
| Layer                   | Controls                             |
| ----------------------- | ------------------------------------ |
| **Bucket Policy**       | Public/private rules at bucket level |
| **IAM Policies**        | User/role permissions                |
| **ACLs**                | Object-level legacy access control   |
| **Block Public Access** | Prevent accidental exposure          |
ğŸ‘‰ Security architecture rule: DO NOT make buckets public. Use signed URLs instead.

ğŸ” Encryption (2 layers)
| Type    | Where encrypted               | Example              |
| ------- | ----------------------------- | -------------------- |
| **SSE** | Server-side                   | SSE-S3 / SSE-KMS     |
| **CSE** | Client encrypts before upload | Fully app-controlled |

â¤ SSE-KMS is most secure:
    âœ”ï¸ Keys managed by AWS KMS
    âœ”ï¸ Audit in CloudTrail


ğŸ” Performance Architecture
S3 uses:
âœ”ï¸ Massive horizontal partitioning
âœ”ï¸ Prefix-based scaling
âœ”ï¸ Request parallelism
âœ”ï¸ Multi-part uploads for large files (â‰¥ 100MB recommended)
ğŸ‘‰ Keys with random prefixes avoid bottleneck (like UUIDs).

S3 supports:
âœ”ï¸ 100â€“350 MB/s per prefix
âœ”ï¸ Unlimited prefixes â†’ near unlimited throughput


ğŸ” Accessing S3
Methods:
    âœ”ï¸ REST API
    âœ”ï¸ HTTPS endpoints
    âœ”ï¸ AWS SDKs/CLI
    âœ”ï¸ S3 Website Access
    âœ”ï¸ VPC Interface Endpoints (private access)

No NFS/SMB mounts directly (use:
    âœ”ï¸ S3 + FSx File Systems
    âœ”ï¸ S3 + EFS
    âœ”ï¸ S3 + S3 File Gateway


ğŸ”„ Cross-Region Replication (CRR)
Purpose:
    âœ”ï¸ Disaster recovery
    âœ”ï¸ Reduce latency for remote users
    âœ”ï¸ Data sovereignty compliance
Supports:
âœ”ï¸ New object replication
âœ”ï¸ Versioning sync
âŒ Old objects before enabling not auto-replicated


ğŸŒ Static Web Hosting on S3
â¤ Serve HTML/JS/CSS directly
â¤ No backend processing
â¤ Index + error page support

CloudFront recommended for:
    âœ”ï¸ HTTPS
    âœ”ï¸ Caching
    âœ”ï¸ Global distribution


ğŸ” Data Protection & Eventing
| Feature             | Purpose                             |
| ------------------- | ----------------------------------- |
| Versioning          | Restore deleted/overwritten objects |
| MFA Delete          | Prevent accidental/attacker deletes |
| Object Lock         | WORM compliance (legal records)     |
| Event Notifications | Trigger Lambda, SQS, SNS            |
| Access Logs         | Track who accessed data             |



ğŸ” Example Use Cases & How S3 Supports Them
| System                  | Feature used                        |
| ----------------------- | ----------------------------------- |
| Data Lake Architecture  | S3 + Glue + Athena + Lake Formation |
| Serverless Apps         | S3 â†’ Lambda â†’ DynamoDB              |
| CDN Content             | S3 + CloudFront                     |
| Backups & Archives      | Lifecycle + Glacier                 |
| Logging                 | S3 central storage                  |
| Mobile app file uploads | Presigned URLs                      |


ğŸ§¬ Internal Architecture (Simplified Flow)
Client
  â”‚  PUT/GET request
  â–¼
S3 API Front-End (Global Fleet)
  â”‚
  â–¼
Distributed Metadata System
  â”‚   (Object indexing + consistency)
  â–¼
Storage Nodes across 3+ AZs
  (Chunked, replicated, self-healed)
âœ”ï¸ Storage hardware constantly rotated
âœ”ï¸ System independently verifies integrity


ğŸ” Common Misconceptions
| Myth                        | Reality                                              |
| --------------------------- | ---------------------------------------------------- |
| S3 is a filesystem          | âŒ It's object storage with simulated folders         |
| Buckets scale automatically | âœ”ï¸ But poorly designed key prefixes will bottleneck   |
| Data is always encrypted    | âŒ Only if enabled explicitly (or enforced by policy) |
| S3 is slow                  | âŒ It scales, but use multi-prefix + multipart        |


ğŸ¯ Final Deep Mental Model
S3 =
Object Store +
Distributed Metadata +
Strong Consistency +
Extreme Durability (11 9s) +
Global Parallel Architecture +
Security + Compliance +
Event-Driven Platform
ğŸ‘‰ S3 is not just storage â€” itâ€™s a data foundation layer for modern cloud systems.


############
ğŸ”· AWS CLI
############
AWS CLI (Command Line Interface) is a unified tool to interact with all AWS services using commands instead of the browser console.

Itâ€™s built on top of:
â¤ AWS SDK for Python (boto3)
â¤ AWS API endpoints using HTTPS
â¤ SigV4 Signing System (cryptographic request signing)


â“ Why AWS CLI Exists?
| Feature                   | Advantage                            |
| ------------------------- | ------------------------------------ |
| Automation                | Scripting deployments, CI/CD         |
| Consistency               | Same commands across OS              |
| Fast control              | Bulk operations                      |
| Infrastructure management | Create/modify AWS resources via code |
| Server environments       | Access AWS without browser GUI       |
ğŸ‘‰ CLI= the backbone of DevOps, IaC and automation workflows.


AWS CLI Installation (Latest: v2) for Ubuntu 24.04
ğŸ”— curl "https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip" -o "awscliv2.zip"
ğŸ”— unzip awscliv2.zip
ğŸ”— sudo ./aws/install
ğŸ”— aws --version


ğŸ” AWS CLI Authentication
AWS CLI signs every request with SigV4 cryptographic signatures using credentials:
| Type                  | Where used                      |
| --------------------- | ------------------------------- |
| **Access Key ID**     | Public identifier               |
| **Secret Access Key** | Private cryptographic signing   |
| **Session Token**     | Temporary access (STS/IAM Role) |
Credentials NEVER appear in request body- only in signature headers.


ğŸ”CLI Configuration â€” aws configure
1ï¸âƒ£ Stores credentials in:~/.aws/credentials
2ï¸âƒ£ Sets default region in: ~/.aws/config
3ï¸âƒ£ Sets default output format in: ~/.aws/config
4ï¸âƒ£ Run: aws configure

Input required:
    âœ”ï¸ AWS Access Key ID
    âœ”ï¸ AWS Secret Access Key
    âœ”ï¸ Region (ap-south-1, us-east-1, etc.)
    âœ”ï¸ Output format (json, yaml, text, table)


ğŸ” Use Roles NOT Access Keys
â¡ï¸ On EC2/ECS/Lambda, automatically use Instance Profiles / IAM Roles
â¡ï¸ STS Temporary Credentials auto-rotate
â¡ï¸ No secrets stored on disk

Fallback order (Credential Provider Chain):
1ï¸âƒ£ Env variables (AWS_ACCESS_KEY_ID)
2ï¸âƒ£ Credentials file
3ï¸âƒ£ IAM role attached to instance
4ï¸âƒ£ Container credentials
5ï¸âƒ£ Custom providers
ğŸ‘‰ Thatâ€™s how CLI magically works inside EC2/ECS without configuration.


ğŸ” Profiles â€” Multiple Credentials Support
1ï¸âƒ£ Add a new profile: aws configure --profile dev
2ï¸âƒ£ Use it: aws s3 ls --profile dev

You can maintain:
    âœ”ï¸ dev
    âœ”ï¸ staging
    âœ”ï¸ production
    âœ”ï¸ audit role
etc., isolated from each other.


ğŸ” How CLI Executes Commands Internally
âœ… Example: aws s3 ls

ğŸŒŸ Internal Flow:
CLI â†’ Credential Selection â†’ API Endpoint â†’ SigV4 â†’ HTTPS â†’ AWS Service API
â”‚
â””â”€ Receives JSON â†’ Formats output

ğŸ” Important Global CLI Parameters
| Option              | Purpose                      |
| ------------------- | ---------------------------- |
| `--region`          | Override configured region   |
| `--query`           | Filter output using JMESPath |
| `--output`          | json, yaml, text, table      |
| `--profile`         | Use specific profile         |
| `--cli-auto-prompt` | Guided interactive mode      |


ğŸ”Output Filtering â€” JMESPath (Very powerful!)
âœ… Example 1: list only instance IDs
ğŸ”— aws ec2 describe-instances --query "Reservations[*].Instances[*].InstanceId"

âœ… Example 2:Get S3 bucket names only:
ğŸ”— aws s3api list-buckets --query "Buckets[].Name"


ğŸ” Pagination Issues
1ï¸âƒ£ Many APIs paginate results. CLI handles with:
--starting-token
--page-size
--max-items

2ï¸âƒ£ or stream automatically using: --no-paginate


ğŸ” CLI Command Framework
ğŸ”„ S3 Standard Commands
ğŸ”— aws s3 ls                         # List buckets
ğŸ”— aws s3 cp file.txt s3://my-bucket
ğŸ”— aws s3 sync ./site s3://my-bucket
ğŸ”— aws s3 rm s3://bucket/file.txt

ğŸ”„ Low-level S3API
ğŸ”— aws s3api list-buckets
ğŸ”— aws s3api put-object ...
ğŸ‘‰ s3api gives deeper low-level control (encryption, ACLs)

ğŸ”„ EC2
ğŸ”— aws ec2 run-instances ...
ğŸ”— aws ec2 describe-instances
ğŸ”— aws ec2 stop-instances --instance-ids i-1234
ğŸ”— aws ec2 terminate-instances --instance-ids i-1234


ğŸ” Scripting with AWS CLI
âœ… Example: stop all running instances:
ğŸ”— aws ec2 describe-instances \
--filters "Name=instance-state-name,Values=running" \
--query "Reservations[*].Instances[*].InstanceId" --output text \
| xargs -n 1 aws ec2 stop-instances --instance-ids

Automating:
    âœ”ï¸ Patch updates
    âœ”ï¸ Backups to S3
    âœ”ï¸ Triggering Lambda or Step Functions


ğŸ” Advanced Authentication Strategies
| Type                      | Where Used        | Rotation        |
| ------------------------- | ----------------- | --------------- |
| Static Keys               | Local machines    | Manual (bad)    |
| SSO (AWS Identity Center) | Enterprise        | Auto tokens     |
| STS Role Assumption       | Secure automation | Expiring tokens |
| Instance/Task Role        | Workloads         | Auto refreshed  |

âœ… Example: Assume role:
ğŸ”— aws sts assume-role \
--role-arn arn:aws:iam::123456789012:role/admin \
--role-session-name mysess


ğŸ” Security Best Practices
âœ”ï¸ Never store keys in code / repo
âœ”ï¸ Use IAM least privilege
âœ”ï¸ Always enable MFA
âœ”ï¸ Use IAM roles for EC2/ECS/Lambda
âœ”ï¸ Use AWS SSO for human access
âœ”ï¸ Rotate credentials regularly


ğŸ” Networking Behavior
â¤ AWS CLI reaches APIs through:
    âœ”ï¸ Public AWS endpoints
    âœ”ï¸ VPC Interface Endpoints (PrivateLink) for private access

ğŸ”— aws ec2 describe-instances --endpoint-url https://vpce-xyz.ec2.ap-south-1.vpce.amazonaws.com

â¤ Useful for:
    âœ”ï¸ Highly regulated environments
    âœ”ï¸ Air-gapped VPCs


ğŸ” Mental Model
ğŸ”— AWS CLI =
Unified API client
+ SigV4 cryptographic signing
+ Automation engine
+ JMESPath querying
+ High-scale management tool
ğŸ‘‰ CLI is the command-line gateway into the entire AWS cloud control plane.


#############################################
ğŸ”· IaC(Infrastructure as Code) with AWS CFT
#############################################
â¤ Infrastructure as Code is the practice of defining and managing IT infrastructure using code, rather than manual configuration.

â¤ Infrastructure provisioning becomes repeatable, automated, version-controlled like software development.


ğŸ” Key Principles of IaC
| Principle                    | Meaning                                                        |
| ---------------------------- | -------------------------------------------------------------- |
| **Declarative Definition**   | Define *what* resources are needed, not *how* to create them   |
| **Idempotency**              | Running the same code again results in the same infrastructure |
| **Version Control Friendly** | Git can track infrastructure changes                           |
| **Automation**               | No manual creation of resources in AWS console                 |
| **Consistency**              | Eliminates misconfiguration and human errors                   |


â“ Why we need IaC?
| Manual Setup Issues                        | IaC Solution                              |
| ------------------------------------------ | ----------------------------------------- |
| Human errors                               | Automated provisioning                    |
| No proper versioning                       | Git version control                       |
| Hard to replicate environments             | Repeatable environment creation           |
| Hard to track infrastructure configuration | Everything is documented in code          |
| Difficult rollback                         | Rollback by redeploying an older template |


ğŸ” AWS CloudFormation
AWS CFT is a native IaC tool that allows us to define and provision AWS resources using templates (YAML/JSON).

It creates, updates, and deletes infrastructure in a controlled and predictable way.


â“ How CloudFormation Works
Template (YAML/JSON)
       â”‚
       â–¼
 CloudFormation Engine
       â”‚
       â–¼
Creates Stack (Infrastructure deployment)
ğŸ‘‰ A Stack = A group of AWS resources created from a template


ğŸ” Template Structure
A CloudFormation template mainly consists of:
| Section                      | Purpose                                   |
| ---------------------------- | ----------------------------------------- |
| **AWSTemplateFormatVersion** | Template version info (optional)          |
| **Description**              | About the template                        |
| **Metadata**                 | Additional info for internal logic        |
| **Parameters**               | Inputs provided during deployment         |
| **Mappings**                 | Region-based configurations               |
| **Conditions**               | Create resources based on conditions      |
| **Resources**                | ğŸ”¥ Actual AWS resources (Must have)       |
| **Outputs**                  | Export important values (e.g., Public IP) |


âœ…Example â€” EC2 Deployment Template (YAML)
AWSTemplateFormatVersion: '2010-09-09'
Description: Deploy a simple EC2 instance

Parameters:
  KeyPair:
    Type: AWS::EC2::KeyPair::KeyName
    Description: Existing Key Pair to SSH

Resources:
  MyEC2Instance:
    Type: AWS::EC2::Instance
    Properties:
      InstanceType: t2.micro
      ImageId: ami-0c02fb55956c7d316 # Amazon Linux 2 (Region-specific)
      KeyName: !Ref KeyPair


âœ… Outputs:
  InstancePublicIP:
    Description: Public IP of EC2
    Value: !GetAtt MyEC2Instance.PublicIp


ğŸ” Deployment Steps
Method 1ï¸âƒ£ â€” AWS Management Console
1ï¸âƒ£ Go to CloudFormation
2ï¸âƒ£ Create Stack â†’ Upload Template File
3ï¸âƒ£ Enter parameters (like KeyPair)
4ï¸âƒ£ Deploy

Method 2ï¸âƒ£ â€” AWS CLI
ğŸ”— aws cloudformation create-stack \
  --stack-name my-ec2-stack \
  --template-body file://ec2-template.yaml \
  --parameters ParameterKey=KeyPair,ParameterValue=mykeypair


ğŸ” Stack Lifecycle
| Stage                    | Meaning                       |
| ------------------------ | ----------------------------- |
| **CREATE_IN_PROGRESS**   | Deploying resources           |
| **CREATE_COMPLETE**      | Deployed successfully         |
| **UPDATE_IN_PROGRESS**   | Updating changes              |
| **ROLLBACK_IN_PROGRESS** | Errors â†’ revert to last state |
| **DELETE_COMPLETE**      | All resources removed         |


ğŸ” Drift Detection 
CloudFormation detects if someone manually modified infrastructure outside CFT.
    âœ”ï¸ Drift Detected (console shows differences)
    âœ”ï¸ Helps maintain compliance and consistency


ğŸ”„ Change Sets
â¤ Like a preview plan
â¤ Shows what changes will happen before updating stack
â¤ Used to avoid accidental destructive changes


ğŸ” StackSets (Multi-Region or Multi-Account)
â¤ If a company runs multi-cloud architecture:
    âœ”ï¸ Create once â†’ deploy across multiple AWS accounts & regions

âœ… Examples:
    âœ”ï¸ Deploy same VPC architecture to 10 regions
    âœ”ï¸ Create IAM Roles across multiple business units


ğŸ” CloudFormation vs Terraform
| Feature             | CloudFormation        | Terraform                   |
| ------------------- | --------------------- | --------------------------- |
| Execution Engine    | AWS native            | Cloud-agnostic              |
| Language            | YAML/JSON             | HCL                         |
| Multi-Cloud Support | âŒ                     | âœ”ï¸                           |
| State Management    | Managed automatically | State file managed manually |
| Resource Coverage   | Best for AWS          | Best for Hybrid/Multi-Cloud |


ğŸ” Best Practices for CloudFormation
âœ”ï¸ Use Parameters for flexibility
âœ”ï¸ Use Mappings for region-specific AMIs
âœ”ï¸ Use Outputs to export data to other stacks
âœ”ï¸ Use Change Sets before updates
âœ”ï¸ Use CloudFormation Linter (cfn-lint) for validation
âœ”ï¸ Strictly maintain Git versioning
âœ”ï¸ Avoid manual AWS resource changes


ğŸ” Why CloudFormation is important for AWS engineers?
â¤ Standardizes environment deployment
â¤ Automates infrastructure provisioning
â¤ Supports CI/CD pipelines
â¤ Helps in DevOps and GitOps workflows
â¤ Ensures production-grade infrastructure consistency


###############################
ğŸ”·  AWS CICD | AWS CodeCommit
###############################
â¤ A fully managed, scalable, private Git repository hosted by AWS.
â¤ Similar to:
    âœ”ï¸ GitHub
    âœ”ï¸ GitLab
    âœ”ï¸ Bitbucket
â¤ But integrated with AWS IAM and security services.


ğŸ” Why CodeCommit?
| Feature                          | Benefit                     |
| -------------------------------- | --------------------------- |
| Fully private                    | Secure enterprise projects  |
| IAM-based access                 | No external user management |
| High scalability                 | Amazon-managed backend      |
| No size limit per repo           | Store large binaries        |
| Encrypted by default             | At rest & in transit        |
| Integrated with AWS DevOps tools | CodeBuild, CodePipeline     |


ğŸ” Authentication Options
| Method                             | Best For                            |
| ---------------------------------- | ----------------------------------- |
| **IAM User HTTPS Git credentials** | Developers using HTTPS              |
| **SSH Keys**                       | Secure local access                 |
| **AWS CLI with IAM Role**          | CI/CD systems & automated workflows |


ğŸ” Repository Internal Structure
Standard Git â€”
    âœ”ï¸ Branches (main, develop, feature branches)
    âœ”ï¸ Merge Requests / Pull Requests
    âœ”ï¸ Commit history & versioning

You can enforce:
    âœ”ï¸ Branch protection
    âœ”ï¸ Approval rules
    âœ”ï¸ Code reviews


ğŸ” CI/CD Example Using AWS DevOps Stack
Pipeline Structure
Developer Pushes Code to CodeCommit
        â”‚
        â–¼
ğŸ”„ CodePipeline Triggered
        â”‚
        â–¼
ğŸ”¨ CodeBuild â†’ Build & Test â†’ Create Artifact (.zip/.jar)
        â”‚
        â–¼
ğŸ“¦ Store Artifact in S3/ ECR (for containers)
        â”‚
        â–¼
ğŸš€ CodeDeploy deploys to EC2 / ECS / Lambda
        â”‚
        â–¼
ğŸ“ˆ CloudWatch monitors health


ğŸ” Testing in CI/CD
Types of automated tests executed in CodeBuild:

| Test Type           | Purpose                             |
| ------------------- | ----------------------------------- |
| Unit Tests          | Validate code logic                 |
| Integration Tests   | Verify interactions between modules |
| Performance Testing | Load testing before production      |
| Security Scans      | Find vulnerabilities                |
ğŸ‘‰ CodeBuild outputs a status â†’ success/failure â†’ pipeline continues or stops.


ğŸ” Deployment Strategies Supported by AWS
| Strategy            | Best For                     | Tools                      |
| ------------------- | ---------------------------- | -------------------------- |
| **Blue/Green**      | Zero downtime, critical apps | CodeDeploy + Load Balancer |
| **Canary**          | Gradual rollout of risk      | Lambda deployments         |
| **Rolling Updates** | Scale-out services           | ECS/Fargate/K8s            |


Rollback strategies are automated if:
    âœ”ï¸ Deployment health checks fail
    âœ”ï¸ Errors spike after release


ğŸ” Why Companies Prefer CI/CD with AWS?
| Advantage                         | Impact                         |
| --------------------------------- | ------------------------------ |
| Fully Managed                     | No Jenkins servers to maintain |
| Deep AWS integration              | IAM security, VPC networking   |
| Auto-scaling Build Infrastructure | Faster builds                  |
| Enterprise Security               | KMS, IAM, VPC endpoints        |
| Global deployment                 | Multi-region pipelines         |


ğŸ” Real-World Use Case Example (Web App Deployment)
Node.js App â†’ CodeCommit
Pipeline:
  Stage 1: Source â†’ CodeCommit
  Stage 2: Build â†’ CodeBuild (run tests)
  Stage 3: Deploy â†’ CodeDeploy to EC2 Fleet
Monitoring â†’ CloudWatch + Alarms

ğŸŒŸ Automatic:
    âœ”ï¸ Builds on code push
    âœ”ï¸ Deployment to servers
    âœ”ï¸ Failover rollback


ğŸš« Disadvantages of CI/CD on AWS
â¤ Vendor lock-in â€” tightly integrated with AWS environment
â¤ Cost may increase with frequent builds & deployments
â¤ Complex initial setup for large enterprise pipelines
â¤ Debugging failures in automated pipelines can be difficult
â¤ Learning curve for DevOps & AWS services


ğŸš« Disadvantages of AWS CodeCommit
â¤ Less popular than GitHub/GitLab (community support is smaller)
â¤ UI is not as user-friendly as competitors
â¤ No public repositories â†’ limits open-source collaboration
â¤ Region-specific repos â†’ must handle region constraints
â¤ Third-party tool integration weaker than GitHub/Lab



#######################
ğŸ”·  AWS Code Pipeline
#######################
â¤ AWS CodePipeline is a fully managed CI/CD orchestration service that automates:
    âœ”ï¸ Source retrieval (CodeCommit, GitHub, S3)
    âœ”ï¸ Build (via CodeBuild)
    âœ”ï¸ Testing (via integrations)
    âœ”ï¸ Deployment (via CodeDeploy / ECS / Lambda)
â¤ It manages the entire pipeline as connected stages, triggered automatically on code changes.


ğŸ” Pipeline Structure
Pipeline Structure
Developer Pushes Code to CodeCommit
        â”‚
        â–¼
ğŸ”„ CodePipeline Triggered
        â”‚
        â–¼
ğŸ”¨ CodeBuild â†’ Build & Test â†’ Create Artifact (.zip/.jar)
        â”‚
        â–¼
ğŸ“¦ Store Artifact in S3/ ECR (for containers)
        â”‚
        â–¼
ğŸš€ CodeDeploy deploys to EC2 / ECS / Lambda
        â”‚
        â–¼
ğŸ“ˆ CloudWatch monitors health


ğŸ” Why CodePipeline?
| Benefit                    | Impact                                               |
| -------------------------- | ---------------------------------------------------- |
| Fully managed service      | No servers or software maintenance                   |
| Native AWS integrations    | Secured with IAM, integrated with other DevOps tools |
| Event-driven automation    | Auto-trigger pipeline from code commits              |
| Visual pipeline UI         | Real-time workflow monitoring                        |
| High availability built-in | No downtime for pipeline workloads                   |
| Fast setup                 | Pipelines created in minutes                         |


ğŸ” When CodePipeline is Best
âœ”ï¸ Teams already inside AWS
âœ”ï¸ Microservices architecture using ECS/Fargate/Lambda
âœ”ï¸ Auto-scaling, auto-secured DevOps pipelines
âœ”ï¸ Enterprises requiring strict IAM governance


ğŸ” When CodePipeline is Not Best
âŒ Teams not inside AWS
âŒ Large-scale, complex DevOps pipelines
âŒ Teams using multiple cloud providers
âŒ Teams using other DevOps tools


ğŸ” Strengths of Jenkins
| Feature                   | Benefit                                     |
| ------------------------- | ------------------------------------------- |
| Plugin ecosystem (~1800+) | Unlimited custom workflows                  |
| Cloud-agnostic            | Multi-cloud / On-prem flexibility           |
| Mature community          | Tons of tutorials & integration support     |
| Self-hosted               | Full control over infrastructure & security |


ğŸ” Weaknesses of Jenkins
| Issue                               | Impact                        |
| ----------------------------------- | ----------------------------- |
| Requires server setup & maintenance | Operations overhead           |
| Plugin failures & dependency issues | Pipeline instability          |
| Scaling is manual                   | More infra cost & management  |
| Security maintenance needed         | Vulnerabilities if mismanaged |


ğŸ” Comparison - CodePipeline vs Jenkins
| Feature          | AWS CodePipeline           | Jenkins                    |
| ---------------- | -------------------------- | -------------------------- |
| Type             | Managed CI/CD              | Open-source CI/CD          |
| Setup effort     | Very low                   | High                       |
| Scaling          | Automatic                  | Manual (HA setup required) |
| Cost             | Pay for usage              | Server cost + Maintenance  |
| Security         | IAM/KMS/VPC Managed by AWS | User responsibility        |
| Customization    | Moderate                   | Very high                  |
| Multi-cloud      | Limited (AWS-centric)      | Excellent                  |
| Plugin ecosystem | Limited                    | Massive                    |
| Pipeline as Code | Supported                  | Supported (Jenkinsfile)    |


ğŸ” Open Source vs AWS Managed Services
| Category       | Jenkins (Open Source)     | CodePipeline (AWS Managed) |
| -------------- | ------------------------- | -------------------------- |
| Infrastructure | You manage                | AWS manages                |
| Flexibility    | Very high                 | Limited to AWS ecosystem   |
| Reliability    | Depends on setup          | Highly reliable by default |
| Security       | You maintain patches      | AWS maintains              |
| Cost Model     | Your compute bill         | Service usage pricing      |
| Governance     | Custom                    | IAM governance             |
| Learning Curve | High for DevOps beginners | Easy for AWS users         |


ğŸ” Real-World Recommendation
| Scenario                                            | Suggested Tool                     |
| --------------------------------------------------- | ---------------------------------- |
| Smallâ€“medium teams fully on AWS                     | CodePipeline                       |
| Hybrid infrastructure or enterprise legacy systems  | Jenkins + CodePipeline integration |
| Highly regulated industries needing on-prem control | Jenkins                            |


##################
ğŸ”· AWS CodeBuild
##################
AWS CodeBuild is a fully managed Continuous Integration (CI) service that:
âœ”ï¸ Compiles source code
âœ”ï¸ Runs tests
âœ”ï¸ Produces deployable artifacts
âœ”ï¸ Scales automatically
âœ”ï¸ Integrates deeply with AWS DevOps tools
ğŸ‘‰ A cloud-native replacement for Jenkins build agents / runners.


ğŸ” Why do we need CodeBuild?
| Without CodeBuild                                     | With CodeBuild                                  |
| ----------------------------------------------------- | ----------------------------------------------- |
| Developer machines handle builds â†’ slows productivity | CI server handles builds automatically          |
| Hard to scale large builds                            | Auto-scale, build several versions in parallel  |
| Manual testing leads to delays                        | Automated testing ensures early issue detection |
| On-prem build servers require maintenance             | Zero infrastructure to manage                   |
| Slow release cycles                                   | Faster & frequent releases                      |


ğŸ” Where does CodeBuild fit in CI/CD pipeline?
Developer Pushes Code â†’
  CodePipeline triggers â†’
    CodeBuild builds & tests â†’
      Output artifacts â†’
        CodeDeploy/AWS service deploys


ğŸ” Key Concepts in CodeBuild
1ï¸âƒ£ Build Project
Contains configuration:
    âœ”ï¸ Source repo (CodeCommit, GitHub, S3, Bitbucket)
    âœ”ï¸ Build environment
    âœ”ï¸ IAM execution role
    âœ”ï¸ Artifacts output settings

2ï¸âƒ£ BuildSpec File (buildspec.yml)
â¤ Defines build & test steps + commands to execute
â¤ Located in source repo root.

âœ… Example:
version: 0.2
phases:
  install:
    commands:
      - echo Installing dependencies
      - npm install
  build:
    commands:
      - echo Build started
      - npm run build
artifacts:
  files:
    - '**/*'


3ï¸âƒ£ Build Environment
Configured using:
    âœ”ï¸ OS â†’ Amazon Linux, Ubuntu, Windows, Custom Docker image
    âœ”ï¸ Runtime â†’ Java, Python, Node.js, DotNet, Go, Docker-in-Docker
    âœ”ï¸ Custom Docker environment is major strength.


ğŸ” Execution Flow
Start Build â†’
Load BuildSpec â†’
Install Phase â†’
Pre-Build Phase â†’
Build Phase â†’
Post-Build Phase â†’
Upload Artifacts â†’
Result sent to CodePipeline (or S3)


ğŸ” Source Providers Supported
| Provider          | Native support |
| ----------------- | -------------- |
| CodeCommit        | âœ”ï¸             |
| GitHub            | âœ”ï¸             |
| GitHub Enterprise | âœ”ï¸             |
| Bitbucket         | âœ”ï¸             |
| S3                | âœ”ï¸             |


ğŸ” Security â€” IAM roles & encryption
â¤ CodeBuild runs inside isolated containers
â¤ Uses IAM Service Role for permissions
â¤ Encrypts artifacts using KMS
â¤ VPC support:
    âœ”ï¸ Build container can run inside private subnet


ğŸ” Scalability
| Traditional CI Servers        | CodeBuild                             |
| ----------------------------- | ------------------------------------- |
| Queue builds during peak load | Creates unlimited concurrent builders |
| Manual scale-up required      | Auto-scale & pay-per-second           |


ğŸ” Artifacts
â¤ Output options:
    âœ”ï¸ S3
    âœ”ï¸ CodePipeline
    âœ”ï¸ ECR (container images)
    âœ”ï¸ Lambda deployment package

â¤ Supports caching for faster builds:
    âœ”ï¸ Local cache (on build host)
    âœ”ï¸ S3 bucket cache


ğŸ” Logging & Monitoring
| Feature       | Service            |
| ------------- | ------------------ |
| Build logs    | CloudWatch Logs    |
| Metrics       | CloudWatch Metrics |
| Notifications | EventBridge / SNS  |


ğŸ” Testing Capabilities
â¤ Runs automated:
    âœ”ï¸ Unit tests
    âœ”ï¸ Integration tests
    âœ”ï¸ Security scan
    âœ”ï¸ Code coverage reports

â¤ You can use:
    âœ”ï¸ JUnit, Mocha, PyTest, Jest, SonarQube etc.


ğŸ”„ Integrations
| Service         | Role                   |
| --------------- | ---------------------- |
| CodePipeline    | Pipeline Orchestration |
| CodeDeploy      | Deployment Automation  |
| ECR             | Container builds       |
| CloudWatch      | Logs + Alarms          |
| Secrets Manager | Secure credentials     |
| VPC             | Private builds         |


ğŸ” Real-World Use Cases
| Use Case            | How CodeBuild helps                   |
| ------------------- | ------------------------------------- |
| Microservices       | Parallel builds for multiple repos    |
| Containers          | Docker-in-Docker builds â†’ push to ECR |
| Serverless          | Build Lambda ZIP artifact             |
| Test automation     | Run tests after every merge           |
| Security compliance | Automated vulnerability scanning      |


ğŸ” CodeBuild vs Jenkins Build Agents
| Feature     | CodeBuild               | Jenkins                      |
| ----------- | ----------------------- | ---------------------------- |
| Scaling     | Auto-managed by AWS     | Manual                       |
| Security    | IAM + network isolation | You secure everything        |
| Maintenance | None                    | High                         |
| Cost        | Pay per second          | Must pay infra & maintenance |
| Flexibility | Strong on AWS workloads | Strong for any workload      |


###################
ğŸ”· AWS CodeDeploy
###################
AWS CodeDeploy is a fully managed deployment automation service designed to:
    âœ”ï¸ Automate application deployments
    âœ”ï¸ Across EC2, On-Prem servers, Lambda, ECS
    âœ”ï¸ With Zero Downtime strategies

It ensures that:
    âœ”ï¸ Deployments are reliable
    âœ”ï¸ Rollbacks are quick
    âœ”ï¸ Releases are repeatable & traceable


ğŸ” Why Do We Need CodeDeploy?
| Problem Without CodeDeploy     | CodeDeploy Solution                    |
| ------------------------------ | -------------------------------------- |
| Manual deployments â†’ risky     | Automated & consistent                 |
| Service downtime               | Blue/Green & Canary                    |
| Hard rollback                  | Automatic rollback on failure          |
| Multi-server update complexity | Coordinated deployment + health checks |
| Complex deployment scripting   | Single deployment config + app spec    |


ğŸ” CodeDeploy Deployment Types
| Deployment Type | Target Platform    | Use Case                                 |
| --------------- | ------------------ | ---------------------------------------- |
| **EC2/On-Prem** | Virtual machines   | Traditional apps, monolith, hybrid infra |
| **AWS Lambda**  | Serverless         | Version + traffic shifting               |
| **ECS/Fargate** | Containerized apps | Microservices & orchestrated workloads   |


ğŸ” Deployment strategies
| Strategy                      | Behavior                                            | Best For                                |
| ----------------------------- | --------------------------------------------------- | --------------------------------------- |
| **In-Place (Rolling update)** | Update servers 1-by-1 without replacement           | Stateful apps                           |
| **Blue/Green Deployment**     | New environment created â†’ switch traffic when ready | Zero downtime, safe rollout, reversible |
| **Canary** *(Lambda/ECS)*     | Send small traffic % first â†’ increase gradually     | Reducing release risk                   |


ğŸ” Blue/Green Deployment Flow (Example: EC2 + Load Balancer)
   OLD PROD (Blue) --- Traffic
          |
CodeDeploy Starts
          â†“
Deploy to NEW (Green)
          | 
Health Checks OK?
          |
Switch Traffic to Green âœ Blue kept for rollback
If failure â†’ revert to old version automatically.


ğŸ” CodeDeploy Architecture Components
| Component               | Purpose                                          |
| ----------------------- | ------------------------------------------------ |
| **Application**         | Logical unit for deployment                      |
| **Deployment Group**    | Group of EC2/On-Prem instances                   |
| **Agent**               | CodeDeploy daemon installed on instances         |
| **AppSpec File**        | Deployment instructions (hooks + file locations) |
| **Revision / Artifact** | Application package stored in S3 or GitHub       |
| **Load Balancer**       | Traffic control for Blue/Green                   |


ğŸ” AppSpec File â€” The Core of CodeDeploy
Defines what to deploy + how deployment runs.

âœ… Example 
ğŸ”— (EC2 / Linux: appspec.yml)
version: 0.0
os: linux

files:
  - source: /
    destination: /var/www/html/

hooks:
  BeforeInstall:
    - location: scripts/stop_server.sh
  AfterInstall:
    - location: scripts/install_dependencies.sh
  ApplicationStart:
    - location: scripts/start_server.sh
  ValidateService:
    - location: scripts/health_check.sh

ğŸ‘‰ Each hook runs in order â†’ helps ensure safe deployment.


ğŸ” For Lambda AppSpec
Uses traffic shifting config instead of file copy.

âœ… Example:
version: 0.0
Resources:
  - MyLambda:
      Type: AWS::Lambda::Function
      Properties:
        Name: myFunction
        Alias: live
        CurrentVersion: 1
        TargetVersion: 2
      Hooks:
        - BeforeAllowTraffic: testHook.sh


ğŸ” Security and Permissions
| Security Layer          | Description                           |
| ----------------------- | ------------------------------------- |
| IAM Role for CodeDeploy | Permissions to update resources       |
| IAM Role for EC2 Agents | EC2 instances allow CodeDeploy access |
| KMS                     | Encrypt artifacts in S3               |
| ALB/NLB/Target Groups   | Used for Blue/Green routing           |
ğŸ‘‰ Traffic control + health monitoring through Elastic Cloud Balancing


ğŸ” Supported Artifact Sources
| Storage         | Support         |
| --------------- | ----------------|
| **Amazon S3**   | âœ”ï¸ Recommended |
| **GitHub Repo** | âœ”ï¸             |
| **Bitbucket**   | âœ”ï¸ Via webhook |

Artifacts typically include:
    âœ”ï¸ application code
    âœ”ï¸ scripts
    âœ”ï¸ config files
    âœ”ï¸ Docker images (for ECS)


ğŸ” Monitoring & Visibility
| Tool               | Purpose                          |
| ------------------ | -------------------------------- |
| CloudWatch Logs    | Execution logs                   |
| CloudWatch Events  | Deployment event triggers        |
| SNS Notifications  | Alerts on fail/success           |
| CodeDeploy Console | Health, status, rollback actions |


ğŸ” Auto-Rollback Scenarios
â¤ Rollback triggers when:
    âœ”ï¸ Health check fails
    âœ”ï¸ Deployment lifecycle hook fails
    âœ”ï¸ Alarm triggered on CloudWatch metric
â¤ Rollback = instant switch to previous stable version


ğŸ” CodeDeploy Best Practices
âœ”ï¸ Always test scripts locally before pipeline use
âœ”ï¸ Enable Blue/Green with health checks for production
âœ”ï¸ Store secrets in AWS Secrets Manager
âœ”ï¸ Use AMI bake strategy for zero configuration drift
âœ”ï¸ Maintain proper tagging for instance selection
âœ”ï¸ Version everything (scripts + app + infra)


ğŸ” CodeBuild vs CodeDeploy 
| Feature        | CodeBuild      | CodeDeploy          |
| -------------- | -------------- | ------------------- |
| Purpose        | Build & Test   | Release & Deploy    |
| Output         | Artifacts      | Running application |
| Execution      | In a container | On actual workloads |
| Pipeline Stage | CI             | CD                  |
ğŸ‘‰ They work together in CI/CD via CodePipeline.


####################
ğŸ”· AWS CloudWatch
####################
AWS CloudWatch is a fully managed monitoring and observability service for AWS resources, applications, and infrastructure.

It helps you:
    âœ”ï¸ Collect & track metrics
    âœ”ï¸ Collect & monitor logs
    âœ”ï¸ Set alarms and trigger automated actions
    âœ”ï¸ Visualize data using dashboards
    âœ”ï¸ Monitor application performance & health


ğŸ” Major Components
| Component                           | Purpose                                                                                 |
| ----------------------------------- | --------------------------------------------------------------------------------------- |
| **CloudWatch Metrics**              | Numeric data points for system performance (CPU, memory, requests count, latency, etc.) |
| **CloudWatch Logs**                 | Collect logs from applications, Lambda, ECS, EC2, RDS, etc.                             |
| **CloudWatch Alarms**               | Trigger notifications/actions when thresholds are breached (e.g., auto-scale EC2)       |
| **CloudWatch Events / EventBridge** | Respond to state changes & scheduled tasks (e.g., start/stop EC2 every night)           |
| **CloudWatch Dashboards**           | Custom visual monitoring panels                                                         |
| **CloudWatch Synthetics**           | Monitor APIs and endpoints using canaries                                               |
| **CloudWatch Contributor Insights** | Analyzes high-traffic logs (e.g. top users, IPs causing spikes)                         |


ğŸ” How it works
AWS Resources â†’ CloudWatch Metrics/Logs â†’ Store & Analyze â†’ Alarms â†’ Trigger SNS/Auto Scaling/Lambda


ğŸ” Common Use Cases
â¤ System Monitoring (CPU, RAM, I/O, Network)
â¤ Application Log Analysis
â¤ Auto-scaling based on performance
â¤ Trigger alerts via SNS â†’ Email / Slack
â¤ Cost monitoring through AWS Billing Alarms
â¤ Detect errors in Lambda, ECS, or API Gateway
â¤ Scheduling tasks using EventBridge rules


âœ… CloudWatch Integration Example
â¤ EC2 Monitoring â†’ CPU Utilization alarms
â¤ Auto Scaling â†’ scale up/down based on traffic
â¤ Lambda â†’ function failure alarms
â¤ RDS â†’ DB connections & storage monitoring
â¤ API Gateway â†’ latency & error rate alerts


ğŸ” Benefits
â¤ Fully managed (no servers needed)
â¤ Near real-time monitoring
â¤ Unified place for logs, metrics, alarms
â¤ Tight integration with AWS ecosystem
â¤ Supports automated operational responses


âš ï¸ Limitations
â¤ Extra pricing for detailed monitoring & custom metrics
â¤ Log search and analysis can be slow
â¤ Console UI can become complex for large applications


###############
ğŸ”· AWS Lambda
###############
Lambda is an event-driven, serverless compute service that automatically:
â¤ Runs code without provisioning servers
â¤ Scales automatically based on demand
â¤ Charges only for compute time used (ms basis)

ğŸ” Key Features
â¤ No server management â†’ AWS manages everything
â¤ Automatic scaling â†’ runs from 0 to millions of requests
â¤ Pay-as-you-use pricing model
â¤ Supports multiple runtimes: Node.js, Python, Java, Go, .NET, Ruby
â¤ Triggers on events
â¤ Built-in fault tolerance
â¤ Can integrate with 200+ AWS services


ğŸ” Lambda Execution Model
Event Source (S3, API Gateway, CloudWatch, DynamoDB, SNS etc.)
          â†“
   Trigger Lambda Code
          â†“
 Return Response / Perform Action


ğŸ” Common Event Sources
| Service           | Example Trigger                 |
| ----------------- | ------------------------------- |
| S3                | New file uploaded in bucket     |
| API Gateway       | API call invokes Lambda         |
| DynamoDB Streams  | Database change triggers Lambda |
| SNS / SQS         | Messaging based invocation      |
| CloudWatch Events | Scheduled jobs (Cron)           |


ğŸ” Deployment Package
â¤ Lambda requires:
    âœ”ï¸ Code (.zip or container image)
    âœ”ï¸ Optional dependencies
    âœ”ï¸ IAM execution role
â¤ Memory range: 128 MB to 10 GB
â¤ Timeout: max 15 minutes
â¤ Ephemeral storage (/tmp): up to 10 GB


ğŸ” Lambda Invocation Types
| Type                     | Behavior                              |
| ------------------------ | ------------------------------------- |
| **Synchronous**          | Immediate response (e.g. API Gateway) |
| **Asynchronous**         | Retries if fails (e.g. S3 events)     |
| **Event Source Mapping** | Streams polling (DynamoDB, Kinesis)   |


ğŸ” Use Cases
â¤ REST APIs (via API Gateway)
â¤ Real-time file processing (S3)
â¤ Event-driven Microservices
â¤ Serverless CRON jobs
â¤ IoT event processing
â¤ Chatbots, notifications
â¤ ETL & Data transformations


ğŸ” Lambda Execution Role
Lambda uses IAM Role to access AWS resources:
âœ… e.g. read S3 bucket, write DynamoDB table


ğŸ” Scaling Model
â¤ Each event = new Lambda instance
â¤ Horizontal auto-scaling
â¤ Concurrency limit protects from overload (default: 1000 per region)
â¤ Provisioned Concurrency for low-latency predictable execution


ğŸ” Performance Optimization Tips
â¤ Use provisioned concurrency to avoid cold starts
â¤ Keep deployment package lightweight
â¤ Use VPC only if necessary (otherwise causes slow cold starts)
â¤ Utilize cloud-native services (S3, DynamoDB) to reduce external call latency


ğŸ” Lambda vs EC2?
| Lambda                   | EC2                    |
| ------------------------ | ---------------------- |
| Serverless, auto-scaling | Manual provisioning    |
| Pay only per execution   | Pay for uptime         |
| Short-running tasks      | Long-running workloads |


âš ï¸ Limitations (Short)
â¤ Max 15 min execution time
â¤ Limited ephemeral storage (/tmp)
â¤ Vendor lock-in
â¤ Not ideal for CPU-intensive/long-running workloads


##################
ğŸ”· AWS CloudFront
##################
CloudFront is a global, highly distributed Content Delivery Network (CDN) that delivers content to users with low latency, high speed, and high availability by caching it at Edge Locations around the world.


ğŸ” Why CloudFront Exists
Without a CDN:
    âœ”ï¸ Every user request travels all the way to the origin (e.g., S3, EC2, ALB)
    âœ”ï¸ High latency for global users
    âœ”ï¸ Bandwidth + server load increases
    âœ”ï¸ Risk of downtime during high traffic


With CloudFront:
    âœ”ï¸ Frequently accessed content stored closer to users
    âœ”ï¸ Reduces load on origin
    âœ”ï¸ Faster response â†’ improved UX + SEO
    âœ”ï¸ Cheaper distribution with caching and compression


ğŸ” Core Concepts
| Concept                  | Meaning                                                                       |
| ------------------------ | ----------------------------------------------------------------------------- |
| **Edge Locations**       | Small data centers near users where content is cached                         |
| **Regional Edge Caches** | Larger caches that sit between Edge and Origin                                |
| **Origin**               | Where authoritative content resides (S3, EC2, ALB, API Gateway, even on-prem) |
| **Distribution**         | The CloudFront configuration for delivering content                           |
| **Cache Behavior**       | URL path rules for caching, TTL, security, headers, compression               |
| **TTL (Time To Live)**   | How long content stays cached at edge nodes                                   |
| **Invalidation**         | Forcefully removing outdated cached objects                                   |


ğŸ” Supported Origins
â¤ Amazon S3 (static websites, images, media)
â¤ EC2 / ALB / On-Prem Servers (dynamic websites)
â¤ API Gateway + Lambda (serverless APIs)
â¤ Media Streaming (Live/VOD with HLS/DASH)


ğŸ” Security Powerhouse (Why enterprises rely on CloudFront)
| Feature                          | Purpose                                    |
| -------------------------------- | ------------------------------------------ |
| SSL/TLS + HTTPS                  | Secure data delivery                       |
| **AWS WAF** Integration          | Protect from DDoS, SQLi, XSS               |
| **Shield (DDoS Protection)**     | Network-level attack protection            |
| **Signed URLs & Signed Cookies** | Restrict access to paid or private content |
| **Origin Access Control (OAC)**  | Secure private S3 content (replaces OAI)   |


ğŸ” Performance Features
| Optimizations                           | Benefits                              |
| --------------------------------------- | ------------------------------------- |
| **Caching + Compression (GZIP/Brotli)** | Faster delivery, lower cost           |
| **HTTP/2 & HTTP/3 support**             | Modern protocol speed-ups             |
| **Field-Level Encryption**              | Extra encryption for sensitive data   |
| **Lambda@Edge / CloudFront Functions**  | Logic at the edge â†’ ultra-low latency |
Example: rewrite URLs, A/B testing, authentication, geolocation routing


ğŸ” Architecture Example
Static website hosted on S3 â†’ Cached via CloudFront â†’ Global Users

Client (Browser)
     â†“
CloudFront Edge Location (Cache)
     â†“ (Cache Miss)
Regional Edge Cache
     â†“ (Cache Miss)
Origin Server (S3/EC2)


ğŸ” Cache Invalidation Example
Used when content is updated:
/*  â†’ invalidate entire site (costly)
"/images/logo.png" â†’ single file


ğŸ” How CloudFront Works
1ï¸âƒ£ User requests https://cdn.example.com/image.png
2ï¸âƒ£ CloudFront checks nearest Edge cache
3ï¸âƒ£ If cache hit â†’ serve instantly
4ï¸âƒ£ If cache miss â†’ request from origin
5ï¸âƒ£ Cache stored at Edge for next requests (based on TTL)
ğŸ‘‰ Total latency dramatically reduced especially for global traffic


ğŸ” Cost Optimization Benefits
âœ”ï¸ Lower origin data transfer cost
âœ”ï¸ Large savings for S3 origins (cheaper than direct S3 Public access)
âœ”ï¸ Caching reduces compute usage on EC2/Lambda
ğŸ‘‰ But invalidations and data transfer out from CloudFront still cost money.


ğŸ¯ Popular Use Cases
â¤ Global Static/Dynamic Website Delivery
â¤ OTT & Video Streaming Platforms
â¤ Software Downloads / Game Assets
â¤ API Acceleration
â¤ Security + Bot Mitigation at Edge


âš ï¸ Limitations
â¤ Invalidations cost money when frequent & large
â¤ Complex caching rules require expertise
â¤ Debugging cache issues can be tricky
â¤ Dynamic content still depends on origin latency (if not cached)


########################################
ğŸ”· AWS Elastic Container Registry (ECR)
########################################
ECR (Elastic Container Registry) is a fully managed, secure Docker container registry used to store, manage, version, and deploy container images on AWS.

It works seamlessly with:
    âœ”ï¸ ECS (Fargate/EC2)
    âœ”ï¸ EKS (Kubernetes)
    âœ”ï¸ Lambda (Container Images)
    âœ”ï¸ CodeBuild / CodePipeline
    âœ”ï¸ Local Docker + CI/CD pipelines


ğŸ” Why ECR?
| Feature                     | Benefit                                   |
| --------------------------- | ----------------------------------------- |
| Fully Managed Registry      | No need to host your own Docker registry  |
| IAM Authentication          | Secure access control                     |
| Highly Available & Scalable | Built on AWS regional infrastructure      |
| Lifecycle Policies          | Auto-remove old images â†’ save cost        |
| Image Scanning              | Finds vulnerabilities (Security scanning) |
| Encryption                  | Images encrypted at rest (KMS)            |
Unlike Docker Hub â†’ NO rate limits, no reliance on public internet.


ğŸ” ECR Key Components
| Component            | Description                                         |
| -------------------- | --------------------------------------------------- |
| Repository           | Storage for Docker images                           |
| Image Tags           | Versioned references (e.g., `v1`, `prod`, `latest`) |
| Lifecycle Policies   | Auto-delete unused images                           |
| Scan                 | CVE security checks on push                         |
| Cross-Account Access | Share images with another AWS Account               |


ğŸ” Security Model
ECR uses IAM policies for:
    âœ”ï¸ Pushing images
    âœ”ï¸ Pulling (deploying) images
    âœ”ï¸ Cross-account sharing
    âœ”ï¸ Private/Public access (public repos also available)

Example permissions:
    âœ”ï¸ ecr:BatchGetImage
    âœ”ï¸ ecr:PutImage
    âœ”ï¸ ecr:GetDownloadUrlForLayer

Images stored in ECR are:
    âœ”ï¸ Encrypted with KMS
    âœ”ï¸ Private by default 


ğŸ” Workflow: How ECR Works End-to-End
1ï¸âƒ£ Build Docker Image Locally or in CI/CD
2ï¸âƒ£ Authenticate to ECR (AWS CLI / IAM role)
3ï¸âƒ£ Tag the image with ECR repository URI
4ï¸âƒ£ Push image to ECR
5ï¸âƒ£ Deploy image from ECR using ECS/EKS/Lambda


âœ… Example Commands:
# Login using AWS CLI
aws ecr get-login-password --region ap-south-1 \
| docker login --username AWS --password-stdin <AWS_Account_ID>.dkr.ecr.ap-south-1.amazonaws.com

# Tag the image
docker tag myapp:latest <AWS_Account_ID>.dkr.ecr.ap-south-1.amazonaws.com/myapp:latest

# Push to ECR
docker push <AWS_Account_ID>.dkr.ecr.ap-south-1.amazonaws.com/myapp:latest


ğŸ” ECR + ECS/EKS Integration
| Service              | Deployment Benefit               |
| -------------------- | -------------------------------- |
| **ECS (Fargate)**    | Pull and run images serverlessly |
| **EKS (Kubernetes)** | Fully private, high security     |
| **Lambda**           | Deploy containerized functions   |
Example ECS task definition:
"image": "<AWS_Account_ID>.dkr.ecr.region.amazonaws.com/myapp:latest"


ğŸ” Security & IAM Best Practices
â¤ Use IAM roles for ECS tasks instead of handing credentials
â¤ Enable Image Scanning on Push
â¤ Use Lifecycle Policies to auto-clean:
    âœ”ï¸ Keep last 10 images
    âœ”ï¸ Delete tags older than 30 days
â¤ Restrict pull access to specific roles / accounts


ğŸ” Real-World DevOps Use Case
1ï¸âƒ£ CI/CD Pipeline:
CodeCommit/GitHub â†’ CodeBuild builds Docker â†’ Push to ECR â†’ CodeDeploy â†’ ECS/EKS deployment


2ï¸âƒ£ Hybrid Cloud:
On-premise Kubernetes cluster pulls images securely using IAM roles anywhere with AWS PrivateLink


ğŸ” Monitoring & Logging
â¤ CloudWatch logs provide registry performance metrics
â¤ CloudTrail records image push/pull activity â†’ auditing & governance


ğŸ” Public ECR vs Private ECR
| Feature | Public ECR                    | Private ECR                        |
| ------- | ----------------------------- | ---------------------------------- |
| Access  | Public internet               | Private IAM-controlled             |
| Use     | Open-source sharing           | Internal enterprise images         |
| Cost    | Free for storage up to limits | Pay per GB storage + data transfer |


ğŸ” Limitations
â¤ Cannot host non-container artifacts (not like Nexus/S3)
â¤ Public containers still incur data transfer charges
â¤ Regional service â†’ cross-region replication must be configured manually



########################################
ğŸ”· AWS Elastic Container Service(ECS)
########################################
ECS is a fully managed container orchestration service by AWS that helps you run, scale, and manage Docker containers without managing Kubernetes or your own container scheduler.


ğŸ” Why ECS Exists?
Before ECS:
    âœ”ï¸ Developers manually managed containers on EC2
    âœ”ï¸ Scaling, networking, container health â€” all manual
    âœ”ï¸ Hard to orchestrate microservices

ECS solved:
    âœ”ï¸ Automated scheduling of containers
    âœ”ï¸ Service discovery
    âœ”ï¸ Auto-scaling
    âœ”ï¸ Rolling deployments
    âœ”ï¸ Secure IAM-based access


ğŸ” ECS Core Components
| Component           | Purpose                                                             |
| ------------------- | ------------------------------------------------------------------- |
| **Task Definition** | Blueprint of the application (image, CPU/RAM, ports, env variables) |
| **Task**            | Running instance of Task Definition (like a Pod in K8s)             |
| **Service**         | Ensures tasks stay running (auto-restart, scaling)                  |
| **Cluster**         | Collection of compute resources (EC2 or Fargate)                    |
| **Container Agent** | Manages containers on EC2 nodes                                     |
| **Launch Types**    | EC2 Launch / Fargate Launch                                         |


ğŸ” ECS Launch Types
| Launch Type | Description              | When to Use                          |
| ----------- | ------------------------ | ------------------------------------ |
| **EC2**     | You manage instances     | Cost optimization + customization    |
| **Fargate** | Fully serverless compute | Zero Ops, auto-scaling microservices |
ğŸ‘‰ Fargate = AWS manages everything
ğŸ‘‰ EC2 = You choose instance types, scaling, patching


ğŸ” Security â€“ IAM Integrated
â¤ Task-level IAM roles (least privilege access)
â¤ Private networking with VPC, SG, NACL
â¤ ECR for secure container image distribution


ğŸ” ECS Architecture Example
â¤ ECR â†’ ECS Fargate â†’ ALB â†’ Internet
â¤ Clients â†’ ALB â†’ ECS Service â†’ Tasks (Containers) â†’ ECR images â†’ Data Stores


ğŸ” ECS Deployment Types (Important)
| Deployment Type             | Benefit                  |
| --------------------------- | ------------------------ |
| Rolling update              | Zero-downtime upgrades   |
| Blue/Green (via CodeDeploy) | Safe releases + rollback |


ğŸ” Monitoring & Logging
â¤ CloudWatch Logs for container logs
â¤ CloudWatch Metrics for scaling
â¤ X-Ray for distributed tracing


ğŸ” ECS vs EKS vs Kubernetes (Clear Comparison)
| Feature        | **ECS**                   | **EKS**                       | **Kubernetes (Self-Hosted)** |
| -------------- | ------------------------- | ----------------------------- | ---------------------------- |
| Type           | AWS Proprietary           | Managed Kubernetes            | Open-source Kubernetes       |
| Complexity     | Simple                    | High                          | Very High                    |
| Control        | Medium                    | Very High                     | Full Control                 |
| Control Plane  | Managed by AWS            | Managed by AWS                | Self-managed                 |
| Compute        | EC2 / Fargate             | EC2 / Fargate                 | Own servers/cloud            |
| Ecosystem      | AWS Only                  | Multi-cloud capable           | Multi-cloud / on-prem        |
| Learning Curve | Easy                      | Steep                         | Very Steep                   |
| Cost           | Lower                     | Higher                        | Depends (infra + ops cost)   |
| Use Case       | AWS-centric microservices | Enterprise-scale, portability | Full control, custom infra   |


ğŸ” Quick Professional Insight
| When to choose?     | Choose Ifâ€¦                                                         |
| ------------------- | ------------------------------------------------------------------ |
| **ECS**             | You are fully on AWS & want fast operational simplicity            |
| **EKS**             | You need Kubernetes compatibility & want multi-cloud portability   |
| **Self-Hosted K8s** | You have advanced DevOps team & custom infrastructure requirements |


ğŸ” Real-World Examples
| Company Goal                         | Recommended                  |
| ------------------------------------ | ---------------------------- |
| SaaS startup deploying microservices | ECS Fargate                  |
| Large enterprise already using K8s   | EKS                          |
| On-Prem + Multi-cloud workload       | EKS or Managed K8s (GKE/AKS) |
| Strict compliance / own data center  | Self-hosted Kubernetes       |


ğŸ” Key Limitations of ECS
â¤ Not portable outside AWS ecosystem
â¤ Very AWS-opinionated (vendor lock-in)
â¤ Fewer advanced scheduling & networking plugins than Kubernetes


######################
ğŸ”· Structure of ECS
######################
It is like a tree architecture:
ECS Cluster
 â”œâ”€â”€ Services
 â”‚    â”œâ”€â”€ Tasks (Desired Count: e.g., 3)
 â”‚    â”‚     â”œâ”€â”€ Containers
 â”‚    â”‚     â”‚     â””â”€â”€ Docker Images (from ECR)
 â”‚    â””â”€â”€ Load Balancer (Optional: ALB, NLB)
 â””â”€â”€ Compute Layer
       â”œâ”€â”€ Fargate  (Serverless)
       â””â”€â”€ EC2 Auto Scaling Group (Managed Instances)


ğŸ” Layer-by-Layer Breakdown
1ï¸âƒ£ ECS Cluster (The Top-Level Container Orchestrator)
â¤ Logical grouping of resources where container workloads run
â¤ Can contain hundreds of services & tasks
â¤ Can run on:
    âœ”ï¸ Fargate (Serverless)
    âœ”ï¸ EC2 Instances
    âœ”ï¸ External instances using ECS Anywhere
ğŸ‘‰ ECS Cluster = Kubernetes Cluster equivalent.


2ï¸âƒ£ ECS Services (Long-running Workload Manager)
Purpose:
    âœ”ï¸ Ensure desired number of tasks are running
    âœ”ï¸ Auto restart failed tasks
    âœ”ï¸ Support auto-scaling + blue/green deployments

âœ… Example:
Service = "Backend-API"
Desired Count = 5 running tasks always
ğŸ‘‰ Service = Kubernetes Deployment equivalent.


3ï¸âƒ£ ECS Tasks (Execution Unit)
â¤ Actual running instance of application
â¤ Created from a Task Definition

âœ… Example:
5 replica tasks running in a service â†’ 5 containers of same workload
ğŸ‘‰ Task = Kubernetes Pod equivalent.


4ï¸âƒ£ Task Definition (Blueprint / Manifest)
Defines everything required to run a container:
    âœ”ï¸ Docker image (from ECR)
    âœ”ï¸ CPU + Memory
    âœ”ï¸ Ports (e.g., 80:3000)
    âœ”ï¸ Environment variables
    âœ”ï¸ Logging (CloudWatch)
    âœ”ï¸ Networking mode (bridge, host, awsvpc)
    âœ”ï¸ IAM Role for Task
    âœ”ï¸ Volumes
ğŸ‘‰ Task Definition = Kubernetes PodSpec equivalent.


5ï¸âƒ£ Containers (Application Units)
Runs from Docker Image stored in:
    âœ”ï¸ ECR
    âŒ Docker Hub (not recommended for production)
ğŸ‘‰ Each task may have one or multiple containers.

âœ… Example Microservice:
Task with 2 containers:
 - app container
 - log processor/sidecar


ğŸ” Supporting Components
ğŸ” IAM Roles & Policies
â¤ Task Role â†’ permissions for the app inside container
(e.g., access DynamoDB)
â¤ Execution Role â†’ allow ECS to pull images & push logs


ğŸ” Networking Models
| Mode       | Used in     | Notes                           |
| ---------- | ----------- | ------------------------------- |
| **awsvpc** | Fargate/EC2 | Each task gets its own ENI + IP |
| bridge     | EC2 only    | NAT mapping                     |
| host       | EC2 only    | Host networking                 |
ğŸ‘‰ awsvpc = highest network isolation, microservice-friendly.


ğŸ” Load Balancing
â¤ Application Load Balancer (ALB) â†’ HTTP/HTTPS routing
â¤ Network Load Balancer (NLB) â†’ TCP/UDP traffic

Used with:
âœ”ï¸ Service discovery
âœ”ï¸ Health checks
âœ”ï¸ Blue/Green deployments


ğŸ” Auto Scaling
â¤ Scale service tasks using CPU/Memory or custom metrics
â¤ EC2 clusters scale via Auto Scaling Group (if EC2 launch type)


ğŸ” ECS Structure Stack
Client Traffic
     â†“
Load Balancer (ALB/NLB)
     â†“
ECS Service
     â†“
Multiple ECS Tasks
     â†“
Containers (Docker Images from ECR)
     â†“
Compute (Fargate / EC2) inside VPC
     â†“
CloudWatch (Monitoring) + IAM (Security)


##############################
ğŸ”· Secret Management on AWS
##############################
Application secrets include:
    âœ”ï¸ Database passwords
    âœ”ï¸ API keys & OAuth tokens
    âœ”ï¸ Encryption keys
    âœ”ï¸ SSH credentials
    âœ”ï¸ Third-party integration secrets


Storing secrets in:
    âŒ Code
    âŒ Docker images
    âŒ Environment variables
â€¦can lead to security breaches & credential leaks.
ğŸ‘‰ AWS provides managed and secure secret management services:


ğŸ”„ Core AWS Secret Management Services
| Service                                 | Purpose                                  | Best For                                  |
| --------------------------------------- | ---------------------------------------- | ----------------------------------------- |
| **AWS Secrets Manager**                 | Securely store, rotate, retrieve secrets | Databases, API keys, Production workloads |
| **AWS Systems Manager Parameter Store** | Store config + some secrets              | App configuration, non-critical secrets   |
| **AWS KMS (Key Management Service)**    | Manage encryption keys                   | Data encryption, secure signing           |


1ï¸âƒ£ AWS Secrets Manager (Best for Production)
âœ”ï¸ Automatically rotates secrets (DB credentials)
âœ”ï¸ Native integration with:
    âš¡RDS, Aurora
    âš¡Lambda, ECS, EKS
âœ”ï¸ Audit and access control with IAM & CloudTrail
âœ”ï¸ Encryption at rest (KMS) + TLS in transit


ğŸ”„ How it works:
App â†’ AWS SDK â†’ Secrets Manager â†’ Secret (Encrypted w/ KMS)

âœ… Example JSON Secret:
{
  "username": "admin",
  "password": "Afe9*jdL!",
  "host": "db.example.us-east-1.rds.amazonaws.com"
}


ğŸ”„ Rotation Example
â¤ Lambda function updates DB password
â¤ Secret version updates automatically
â¤ No downtime
ğŸ‘‰ Ideal for: Banking, Fintech, secure microservices, multi-env secrets


2ï¸âƒ£ AWS SSM Parameter Store
Two tier options:
| Tier         | Purpose                                   | Cost |
| ------------ | ----------------------------------------- | ---- |
| **Standard** | Small configs, simple secrets             | Free |
| **Advanced** | Bigger payloads, rotation, change history | Paid |


Supports:
    âœ”ï¸ EC2 User Data
    âœ”ï¸ CloudFormation
    âœ”ï¸ ECS Task Definitions
    âœ”ï¸ Lambda Environment Variables (reference only)
âœ… Example: /prod/api/payment/secret
ğŸ‘‰ Best For: Feature flags, config params, non-critical secrets


3ï¸âƒ£ AWS KMS (Under the Hood Encryption Engine)
Creates, stores, and rotates Customer Managed Keys
Used by:
    âœ”ï¸ S3
    âœ”ï¸ Secrets Manager
    âœ”ï¸ EBS
    âœ”ï¸ RDS
    âœ”ï¸ CloudWatch Logs
    âœ”ï¸ DynamoDB
ğŸ‘‰ Encrypts data keys â†’ Envelope encryption mechanism


ğŸ”€ Choosing the Right Service
| Requirement                          | Recommendation             |
| ------------------------------------ | -------------------------- |
| Auto-rotate DB credentials           | Secrets Manager            |
| Store flags/configs & simple secrets | Parameter Store            |
| Manage encryption for secrets        | KMS                        |
| Large payloads or JSON configs       | Parameter Store (Advanced) |


ğŸ”„ Security Architecture for Secrets in ECS/EKS
ECS Task / EKS Pod
      â†“ (IAM Role grants access)
Secrets Manager
      â†“ (KMS Encryption)
Secure DB Authentication
No secrets injected into container images â†’ Zero leakage risk


ğŸ”„ IAM Access Control
IAM principles enforce:
    âœ”ï¸ Least privilege
    âœ”ï¸ Separation of duties
    âœ”ï¸ Fine-grained policies

âœ… Example IAM policy:
{
  "Effect": "Allow",
  "Action": [
    "secretsmanager:GetSecretValue"
  ],
  "Resource": "arn:aws:secretsmanager:us-east-1:1234567890:secret:ProdDBSecret-*"
}


ğŸ”„ Secret Rotation
Without rotation:
    âœ”ï¸ Leaked credentials remain valid indefinitely
    âœ”ï¸ Compliance failures (PCI-DSS, HIPAA, SOC2)

With AWS:
    âœ”ï¸ Automatic rotation
    âœ”ï¸ Versioning
    âœ”ï¸ Fail-safe rollback


ğŸ”„ Monitoring & Auditing
| Log Source     | What is Tracked              |
| -------------- | ---------------------------- |
| **CloudTrail** | Who accessed which secret    |
| **CloudWatch** | Metrics on rotation failures |
| **Config**     | Compliance & drift tracking  |


ğŸ”„ Common Pitfalls & Anti-Patterns
| Anti-Pattern                               | Why Wrong                       |
| ------------------------------------------ | ------------------------------- |
| Storing secrets in Lambda env vars         | Visible in console & logs       |
| Embedding secrets inside code              | Git repo leaks / insider threat |
| Passing secrets inside ECS task definition | Exposed in JSON and UI          |
| Hardcoding credentials in CI/CD pipelines  | Credentials in plain text       |


ğŸ”„ Best Practices 
â¤ Use Secrets Manager for all sensitive credentials
â¤ Combine IAM Roles + KMS for secure access flow
â¤ Never expose secrets to logs or container images
â¤ Enforce automatic rotation wherever possible
â¤ Use resource-based access policies for cross-account access
â¤ Use Private VPC Endpoints â†’ No public internet dependency
â¤ For multi-env: prefix secrets like
    /dev/app/db/pass
    /prod/app/db/pass


################
ğŸ”· AWS Config
################
AWS Config is a continuous monitoring and compliance evaluation service that tracks configuration changes in AWS resources over time.

ğŸ”„ What It does
â¤ Records resource configuration history
â¤ Tracks configuration changes (who changed what, when, and how)
â¤ Evaluates compliance with predefined or custom rules
â¤ Helps audit, security checks, and governance


ğŸ”„ Key Concepts
| Component                  | Meaning                                                    |
| -------------------------- | ---------------------------------------------------------- |
| **Configuration Recorder** | Collects configuration data for selected resource types    |
| **Delivery Channel**       | Sends configuration snapshots to S3 + notifications to SNS |
| **Config Rules**           | Policies to check compliance â€” AWS Managed or Custom       |
| **Resource Timeline**      | Shows full history of configuration states & changes       |
| **Remediation**            | Auto-fix non-compliance using SSM automation               |


ğŸ”„ How Compliance Evaluation Works
1ï¸âƒ£ Configure AWS Config with selected resources
2ï¸âƒ£ Apply compliance rules (e.g., S3 Bucket must be encrypted)
3ï¸âƒ£ AWS Config evaluates each resource
4ï¸âƒ£ Marks them as:
        ğŸŸ¢ Compliant
        ğŸ”´ Non-Compliant
5ï¸âƒ£ Optionally trigger remediation automation


ğŸ”„ Identifying Compliant / Non-Compliant Resources
Using AWS Console
1ï¸âƒ£ Go to AWS Config > Rules
2ï¸âƒ£ View rule status dashboard:
    âœ”ï¸ Shows number of compliant & non-compliant resources
    âœ”ï¸ Drill down into failed resources for reasons

Using AWS CLI
ğŸ”— aws configservice describe-compliance-by-resource

ğŸ”— aws configservice get-compliance-details-by-config-rule \
  --config-rule-name s3-bucket-server-side-encryption-enabled

ğŸ”„ Auto-Remediation Example Use-Cases
| Problem                 | Rule                             | Auto Remediation  |
| ----------------------- | -------------------------------- | ----------------- |
| Public S3 bucket        | s3-bucket-public-read-prohibited | Remove public ACL |
| Open security group     | restricted-ssh                   | Remove 0.0.0.0/0  |
| Unencrypted EBS volumes | encrypted-volumes                | Encrypt volume    |
| Missing tags            | required-tags                    | Auto-add tags     |
ğŸ‘‰ Done through SSM Automation Docs + Config Rule


ğŸ”„ Why AWS Config is Useful for Enterprises
â¤ Ensures compliance frameworks (PCI-DSS, HIPAA, ISO27001, SOC2)
â¤ Detects drift from desired configuration
â¤ Prevents security misconfigurations
â¤ Helps in incident investigation and security forensics


ğŸ”„ Pointers
âœ”ï¸ AWS Config checks the state of configurations, not security threats
âœ”ï¸ It is NOT a monitoring service (CloudWatch is for metrics & logs)
âœ”ï¸ It focuses on audit + governance + compliance


#######################
ğŸ”· AWS Load Balancers
#######################
Load Balancer = Distributes incoming traffic across multiple targets to improve:
    âœ”ï¸ Availability
    âœ”ï¸ Fault tolerance
    âœ”ï¸ Performance
    âœ”ï¸ Scalability
    âœ”ï¸ Security


ğŸ”„ AWS provides 3 major types
| Load Balancer                       | Layer   | Best for                            | Protocols             | Main Features                                          |
| ----------------------------------- | ------- | ----------------------------------- | --------------------- | ------------------------------------------------------ |
| **ALB** (Application Load Balancer) | Layer 7 | HTTP/HTTPS traffic, microservices   | HTTP/HTTPS/WebSockets | URL-based routing, host-based routing, serverless apps |
| **NLB** (Network Load Balancer)     | Layer 4 | High-performance, ultra-low latency | TCP/UDP/TLS           | Handles millions of requests/sec, static IP            |
| **GWLB** (Gateway Load Balancer)    | Layer 3 | Security appliances deployment      | GENEVE                | IPS/IDS, Firewalls, Traffic inspection                 |


1ï¸âƒ£ Application Load Balancer (ALB)
(OSI Layer 7 â€” Application Layer)

ğŸ” When to use ALB
â¤ Microservices + multiple target groups
â¤ Routing based on:
    âœ”ï¸ URL path
        â /login, /checkout
    âœ”ï¸ Hostname
        â api.example.com, admin.example.com
    âœ”ï¸ Query Strings, Headers, HTTP methods
â¤ WebSockets support (real-time apps)
â¤ Integration with ECS, Lambda


ğŸ” Request Routing Capabilities
| Routing Type  | Example                           |
| ------------- | --------------------------------- |
| Host-based    | `auth.example.com` âœ Auth service |
| Path-based    | `/images/*` âœ S3 / image service  |
| Query/Headers | `/products?category=mobiles`      |


ğŸ” Security
â¤ AWS WAF support
â¤ HTTPS termination (SSL offloading)
â¤ Authentication (OIDC, Cognito)

ğŸ” Target Types
â¤ EC2
â¤ ECS tasks
â¤ Lambda functions
â¤ IP addresses
â¤ Private Link

âš ï¸ Drawbacks
â¤ Not suitable for non-HTTP traffic
â¤ Slightly higher latency than NLB


2ï¸âƒ£ Network Load Balancer (NLB)
(OSI Layer 4 â€” Transport Layer)

ğŸ” When to use NLB
â¤ Extreme performance requirements
â¤ Millions of concurrent requests
â¤ TCP/UDP/TLS traffic
â¤ Static IPs required (or EIPs)
â¤ Preserve client source IP for backend logic

ğŸ” Features
â¤ Ultra-low latency ~ microseconds
â¤ No content-based routing
â¤ TLS termination (optional)
â¤ Cross-zone load balancing (optional)
â¤ Health checks on TCP/HTTP/HTTPS

ğŸ” Drawbacks
â¤ No advanced L7 routing
â¤ Monitoring visibility lower than ALB


3ï¸âƒ£ Gateway Load Balancer (GWLB)
(OSI Layer 3 â€” Network Layer)

ğŸ” Primary Purpose
â¤ Deploy, scale & manage security appliances like:
    âœ”ï¸ Firewalls
    âœ”ï¸ Deep packet inspection
    âœ”ï¸ IDS/IPS
    âœ”ï¸ Intrusion prevention gateways

ğŸ” Traffic forwarding mechanism
â¤ Uses GENEVE encapsulation
    â†’ Packets are tunneled without modifying their content

â¤ Meaning:
    âœ”ï¸ You can inspect traffic without breaking it
    âœ”ï¸ Enables transparent inline security filtering


ğŸ” Integrates with:
â¤ Virtual appliances from Marketplace
â¤ Hub-and-spoke network security architecture

ğŸ” Drawbacks
â¤ Complex deployment & configuration
â¤ Higher network overhead (encapsulation)


ğŸ” Choosing the Right Load Balancer
| Requirement                                     | Best Option |
| ----------------------------------------------- | ----------- |
| HTTP routing based on path or domain names      | **ALB**     |
| WebSockets, gRPC, authentication                | **ALB**     |
| Very high throughput + low latency              | **NLB**     |
| TCP/UDP traffic like databases, gaming servers  | **NLB**     |
| Static IP requirement                           | **NLB**     |
| Inline traffic inspection + security appliances | **GWLB**    |
| Serverless (Lambda) backend                     | **ALB**     |


ğŸ” Real-World Use Cases
| Scenario                             | Recommended LB | Reason                   |
| ------------------------------------ | -------------- | ------------------------ |
| Microservices architecture (ECS/EKS) | ALB            | Smart routing by service |
| Payment gateways                     | NLB            | Low latency + TLS        |
| WAF + Advanced L7 security           | ALB            | Supports WAF             |
| Centralized firewall/security        | GWLB           | Transparent inline       |
| Gaming applications or chat servers  | NLB            | High throughput, UDP     |
| Hybrid on-prem network inspection    | GWLB           | Partner appliances       |


ğŸ”„ Internal Architecture (High Level)
Client Request
      â†“
DNS Lookup via Route53
      â†“
Load Balancer
  â”œâ”€â”€ Listener (Port rules)
  â”‚      â†“
  â”œâ”€ Target Group (Health checks, routing rules)
      â†“
Targets (EC2, ECS, Lambda, IPs)

Each LB type differs in:
    âœ”ï¸ Listener protocol
    âœ”ï¸ Target recognition
    âœ”ï¸ Routing logic


ğŸ” Cost Differences
| Cost Component                     | ALB                                   | NLB                                  | GWLB              |
| ---------------------------------- | ------------------------------------- | ------------------------------------ | ----------------- |
| LB-hours                           | Medium                                | High                                 | Highest           |
| LCU (Load balancer capacity units) | Based on connections, rule eval, data | Based on new connections + bandwidth | Processed traffic |
| Additional Security Appliances     | â€”                                     | â€”                                    | Yes               |
| Level of Security                  | High                                  | Medium                               | High Security     | 


#########################################
ğŸ”· AWS Cloud Migration Strategies(7R's)
#########################################
These represent different approaches organizations use to move workloads from on-prem or other clouds to AWS â€” based on complexity, cost, and modernization goals.

ğŸ” 7 Migration Strategies 
| Strategy                         | Complexity | Cost           | Time     | When to Choose               |
| -------------------------------- | ---------- | -------------- | -------- | ---------------------------- |
| **Rehost (Lift & Shift)**        | Low        | Medium         | Fast     | Quick cloud adoption         |
| **Replatform (Lift & Optimize)** | Medium     | Medium         | Moderate | Minor cloud upgrades         |
| **Repurchase (Drop & Shop)**     | Medium     | Subscription   | Fast     | Switch to SaaS               |
| **Refactor / Re-architect**      | High       | High           | Slow     | Modernization + cloud native |
| **Retire**                       | Very Low   | Saves cost     | Fast     | Remove unused apps           |
| **Retain (Revisit / Hybrid)**    | Very Low   | None initially | N/A      | Some apps remain on-prem     |
| **Relocate (VM Migration)**      | Low/Medium | Low/Medium     | Fast     | Migrate VMs as-is to AWS     |


1ï¸âƒ£ Rehost â€” Lift and Shift
Migrating your servers to AWS with minimal changes.
Application architecture remains the same.

ğŸ”„ Where used?
â¤ Apps nearing end-of-life but still required
â¤ Fast cloud migration deadlines
â¤ Datacenter exit initiatives

âœ… Example on AWS
| On-Prem                | AWS Equivalent |
| ---------------------- | -------------- |
| Physical Server/VM     | EC2            |
| Local Storage          | EBS, S3        |
| Internal Load Balancer | ALB/NLB        |

â­ Pros
â¤ Fastest migration method
â¤ Lower initial cost
â¤ No code changes

âŒ Cons
â¤ No cloud-native benefits
â¤ Higher operational costs long-term


2ï¸âƒ£ Replatform â€” Lift & Optimize
Minor cloud optimizations â†’ without changing application core code.

ğŸ”„ Common Optimization Examples
| Before             | After                    |
| ------------------ | ------------------------ |
| Local DB           | RDS/Aurora               |
| Local File Storage | Amazon S3                |
| Self-managed Cache | ElastiCache              |
| Cron Jobs on VM    | AWS Lambda / EventBridge |

â­ Pros
â¤ Better performance + scalability
â¤ Limited effort vs full refactor

âŒ Cons
â¤ Still partial automation
â¤ Not fully cloud-native


3ï¸âƒ£ Repurchase â€” Drop and Shop
Replace a custom-built app with a SaaS alternative.

âœ… Example
| Current System | Replacement    |
| -------------- | -------------- |
| Custom CRM     | Salesforce     |
| Custom CMS     | WordPress SaaS |
| Jira Server    | Jira Cloud     |

â­ Pros
â¤ Fast transformation
â¤ Zero maintenance burden

âŒ Cons
â¤ Data migration challenges
â¤ Loss of customization capability


4ï¸âƒ£ Refactor / Re-Architect â€” Cloud-Native Modernization
Rewrite entire application to leverage cloud-native services.

ğŸ” Key Modernization Components
| From             | To (AWS Native)            |
| ---------------- | -------------------------- |
| Monolithic App   | Microservices + Serverless |
| VM based deploy  | ECS/EKS/Lambda             |
| Manual Scaling   | Auto Scaling               |
| Local Messaging  | SQS/SNS/MQS                |
| Batch Processing | Lambda/EventBridge         |
| Local Logs       | CloudWatch                 |

â­ Pros
â¤ Significant cost savings long-term
â¤ Highly scalable + highly resilient

âŒ Cons
â¤ Most expensive
â¤ Requires skilled cloud engineers
â¤ Long migration timelines
â¤ Used when the business wants future-proof modernization.


5ï¸âƒ£ Retire â€” Decommission
Identify resources that are:
    âœ”ï¸ Unused
    âœ”ï¸ Obsolete
    âœ”ï¸ No longer needed
    âœ”ï¸ Then â†’ Remove them entirely

â­ Benefits
â¤ Cost reduction
â¤ Simplifies overall architecture


6ï¸âƒ£ Retain â€” Revisit / Hybrid Strategy
Keep some services on-prem and integrate with cloud.

Often because:
    âœ”ï¸ Application too critical/risky to migrate yet
    âœ”ï¸ Compliance/government regulations
    âœ”ï¸ Hardware still has unexpired value


ğŸ” Typical Hybrid Components
| On-Prem          | AWS                |
| ---------------- | ------------------ |
| Active Directory | AWS Managed AD     |
| Backup Systems   | AWS Backup         |
| VPN/MPLS         | AWS Direct Connect |


7ï¸âƒ£ Relocate â€” VM Migration at Scale
Move entire VM clusters as is â†’ without application redesign
(like VMware VMs â†’ VMware Cloud on AWS)

Tools Used
â¤ AWS Application Migration Service (MGN)
â¤ VMware HCX

â­ Pros
â¤ Fast adoption
â¤ No re-architecture overhead

âŒ Cons
â¤ No modern cloud benefits yet


ğŸ” Strategy Selection â€” How to Decide?
| Business Goal                                | Recommended Strategy |
| -------------------------------------------- | -------------------- |
| Need fast migration                          | Rehost / Relocate    |
| Want some cloud benefits but limited budget  | Replatform           |
| Replace outdated systems                     | Repurchase           |
| Major performance/scalability boost required | Refactor             |
| Remove unused apps                           | Retire               |
| Regulatory restrictions                      | Retain               |


ğŸš€ Migration Phases (AWS Migration Lifecycle)

1ï¸âƒ£ Assess
â¤ TCO analysis
â¤ Application discovery (AWS Migration Evaluator)

2ï¸âƒ£ Mobilize
â¤ Skills & team readiness
â¤ Landing zone creation
â¤ Networking & security setup

3ï¸âƒ£ Migrate & Modernize
â¤ Execute chosen R-strategy
â¤ Use migration tools
    âœ”ï¸ DMS (Database Migration Service)
    âœ”ï¸ MGN (Application Migration Service)
    âœ”ï¸ S3 Transfer Acceleration
    âœ”ï¸ Snowball / Snowmobile for large data


ğŸ”„ Major AWS Services for Migration
| Service                      | Role                                  |
| ---------------------------- | ------------------------------------- |
| AWS Migration Hub            | Central migration tracking            |
| AWS DMS                      | Database migration with CDC           |
| AWS MGN                      | Rehost (lift & shift automation)      |
| Snowball/Snowmobile          | Petabyte scale offline migration      |
| CloudEndure                  | Disaster recovery migration           |
| Transfer Family              | SFTP/FTP migration                    |
| SCT (Schema Conversion Tool) | For heterogeneous database conversion |



#############################################
ğŸ”· 3-Tier Architecture Implementation on AWS
#############################################
A 3-tier application architecture is a classic multi-layered design that separates:
1ï¸âƒ£ Presentation Layer (UI / Client)
2ï¸âƒ£ Application Layer (Business Logic)
3ï¸âƒ£ Data Layer (Database & Storage)


ğŸ”„ Architecture Overview Diagram (Conceptual)
 User
   â†“  (HTTPS)
[ Amazon Route 53 ]
   â†“
[ Elastic Load Balancer (ALB) ]
   â†“
[ Public Subnet - Web Tier EC2s ]
   â†“
[ Private Subnet - App Tier EC2s / ECS ]
   â†“
       [ Database Tier ]
       (Amazon RDS / DynamoDB)


Networking:
    âœ”ï¸ Web Tier â†’ Public Subnet (internet-facing)
    âœ”ï¸ App + DB Tier â†’ Private Subnets (internal only)

Security:
    âœ”ï¸ Security Groups + NACLs enforce Zero-Trust Communication


1ï¸âƒ£ Presentation Tier (Web Layer)

ğŸ”„ Components Used:
| Component                               | Purpose                          |
| --------------------------------------- | -------------------------------- |
| **Route 53**                            | DNS Mapping â†’ domain â†’ ALB       |
| **Application Load Balancer**           | Smart routing, https termination |
| **EC2 / ECS Fargate / S3 + CloudFront** | Hosts website UI                 |
| **Public Subnet**                       | Internet access allowed          |


ğŸ”„ Responsibilities:
    âœ”ï¸ Handles HTTP/HTTPS traffic
    âœ”ï¸ SSL/TLS termination (HTTPS)
    âœ”ï¸ Redirect to app layer

ğŸ”„ Security:
    âœ”ï¸ SG: Allow 80/443 inbound from Internet
    âœ”ï¸ NACL: Inbound from 0.0.0.0/0 allowed only on web ports
Auto-scaling setup for high availability.


2ï¸âƒ£ Application Tier (Business Logic Layer)
Resides in Private Subnet, not accessible directly from internet

âœ”ï¸ Options:
| Option           | Benefit                           |
| ---------------- | --------------------------------- |
| EC2 Auto Scaling | Flexible self-managed deployments |
| ECS / Fargate    | Container orchestration           |
| Lambda           | Serverless compute                |


ğŸ”„ Integrations
â¤ Connects to RDS using IAM Roles or DB Credentials from Secrets Manager
â¤ Reads static assets from S3
â¤ Sends logs to CloudWatch Logs
â¤ Pushes events to SQS/SNS for async workflows

ğŸ”„ Security:
    âœ”ï¸ SG: Allow inbound only from Web-Tier SG
    âœ”ï¸ No direct public IP on app servers


3ï¸âƒ£ Data Tier (Database Layer)
âœ”ï¸ Options:
| AWS Service                                 | Purpose                                 |
| ------------------------------------------- | --------------------------------------- |
| **RDS (MySQL/PostgreSQL/Oracle/SQ Server)** | Transactional DB                        |
| DynamoDB                                    | Serverless NoSQL                        |
| ElastiCache Redis/Memcached                 | Cache for performance                   |
| S3                                          | Object storage (images, files, backups) |


ğŸ”„ Best Practices
â¤ Multi-AZ for HA
â¤ Automatic Backup + PITR
â¤ Read Replicas for scaling reads
â¤ DB Subnet Group using private subnets only

ğŸ”„ Security:
â¤ SG: Inbound allowed only from App Tier
â¤ No public access enabled


ğŸ”„ VPC & Networking Setup â€” Full Flow
| Layer    | Subnet Type      | Routing                                        |
| -------- | ---------------- | ---------------------------------------------- |
| Web Tier | Public Subnets   | Route to **Internet Gateway**                  |
| App Tier | Private Subnets  | Route to **NAT Gateway** for outbound internet |
| DB Tier  | Private Isolated | No internet access                             |


ğŸ”„ Additional networking:
| Resource         | Purpose                              |
| ---------------- | ------------------------------------ |
| Internet Gateway | Connect public subnet to Internet    |
| NAT Gateway      | Allows app servers outbound updates  |
| Route Tables     | Define network routing for each tier |


ğŸ”„ Security Architecture
| Layer    | Allowed Inbound   | Blocked                |
| -------- | ----------------- | ---------------------- |
| Web Tier | 80/443 from world | SSH from world         |
| App Tier | Only from Web SG  | Any external traffic   |
| DB Tier  | Only from App SG  | Direct Internet Access |
â¤ WAF in front of ALB for layer-7 filtering
â¤ IAM roles for least-privilege access
â¤ KMS encryption for RDS & S3


ğŸ”„ CI/CD Pipeline (Recommended)
| Stage            | AWS Service                 |
| ---------------- | --------------------------- |
| Code Repo        | CodeCommit / GitHub         |
| Build            | CodeBuild                   |
| Deploy           | CodeDeploy / ECS Deployment |
| Infra Automation | CloudFormation / Terraform  |
| Monitoring       | CloudWatch & X-Ray          |
Automated blue-green deployments supported via ELB.


ğŸ”„ Scalability Patterns
| Layer          | Method                 |
| -------------- | ---------------------- |
| Web & App Tier | Auto Scaling Groups    |
| DB Tier        | Read Replicas          |
| S3             | Automatically scalable |
Elastic Load Balancer distributes load across multiple AZs â†’ fault tolerance.


ğŸ”„ Performance Techniques
| Feature     | Benefit                               |
| ----------- | ------------------------------------- |
| ElastiCache | Reduce DB load                        |
| CloudFront  | Edge caching for UI                   |
| SQS         | Smooth peak load via async processing |
| RDS Proxy   | Connection pooling for RDS            |


ğŸ”„ High Availability & DR
âœ”ï¸ Multi-AZ ALB
âœ”ï¸ EC2 across minimum 2 AZs
âœ”ï¸ RDS Multi-AZ Failover
âœ”ï¸ S3 Cross-Region Replication for backups
âœ”ï¸ CloudWatch Alarms + EventBridge for auto recovery


ğŸ”„ Monitoring & Observability
| Tool       | What it Tracks                       |
| ---------- | ------------------------------------ |
| CloudWatch | CPU, memory, logs                    |
| AWS X-Ray  | Request tracing across microservices |
| CloudTrail | API access governance                |
| WAF Logs   | Security inspection logs             |
