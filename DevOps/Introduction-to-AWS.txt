#########################
ğŸ”· Introduction to AWS
#########################
Cloud computing is the on-demand delivery of compute, storage, networking, databases, and services over the internet with pay-as-you-go pricing.

ğŸ”„ Key characteristics
â¤ On-demand self-service â†’ no manual provisioning
â¤ Broad network access â†’ accessible over internet
â¤ Resource pooling â†’ shared infrastructure (multi-tenant)
â¤ Rapid elasticity â†’ scale up/down instantly
â¤ Measured service â†’ pay only for what you use

ğŸ‘‰ Cloud is a model that allows us to rent IT resources instead of owning physical infrastructure, improving scalability, cost efficiency, and speed.


ğŸ”„ Public Cloud vs Private Cloud vs Hybrid Cloud
ğŸ”„ Public Cloud
Infrastructure owned and managed by third-party providers like AWS, Azure, GCP.

âœ… Examples
    âœ”ï¸ï¸ AWS EC2, S3
    âœ”ï¸ï¸ Azure VM
    âœ”ï¸ï¸ Google Compute Engine

ğŸ” Key points
    âœ”ï¸ï¸ Resources shared among multiple customers
    âœ”ï¸ï¸ Accessible over the internet
    âœ”ï¸ï¸ Highly scalable
    âœ”ï¸ï¸ Pay-as-you-go

ğŸ” Use cases
    âœ”ï¸ï¸ Startups
    âœ”ï¸ Web & mobile applications
    âœ”ï¸ Dev/Test environments


ğŸ”„ Private Cloud
Infrastructure dedicated to a single organization.

âœ… Examples
    âœ”ï¸ On-premise data centers
    âœ”ï¸ VMware-based private cloud
    âœ”ï¸ OpenStack

ğŸ” Key points
    âœ”ï¸ Full control over data and security
    âœ”ï¸ Higher cost
    âœ”ï¸ Limited scalability compared to public cloud

ğŸ” Use cases
    âœ”ï¸ Banks
    âœ”ï¸ Government organizations
    âœ”ï¸ Compliance-heavy systems


ğŸ”„ Hybrid Cloud
Combination of public + private cloud working together.

ğŸ” Key points
âœ”ï¸ Sensitive data stays in private cloud
âœ”ï¸ Compute-intensive workloads run in public cloud
âœ”ï¸ Best of both worlds

ğŸ” Use cases
âœ”ï¸ Enterprises with legacy systems
âœ”ï¸ Gradual cloud migration
âœ”ï¸ Disaster recovery


ğŸ”„ Comparison Summary
â¤ Public â†’ Cost-effective, scalable
â¤ Private â†’ Secure, controlled
â¤ Hybrid â†’ Flexible, enterprise-friendly


â“ Why is Public Cloud So Popular?
ğŸ” Core reasons
    âœ”ï¸ No upfront cost
    âœ”ï¸ Instant scalability
    âœ”ï¸ Global availability
    âœ”ï¸ High availability & fault tolerance
    âœ”ï¸ Managed services reduce operational overhead

ğŸ” Technical advantages
    âœ”ï¸ Auto Scaling
    âœ”ï¸ Load Balancers
    âœ”ï¸ Managed Databases (RDS, DynamoDB)
    âœ”ï¸ Built-in monitoring & security

ğŸ” Business advantages
    âœ”ï¸ Faster time-to-market
    âœ”ï¸ Focus on core product instead of infra
    âœ”ï¸ Suitable for unpredictable workloads
ğŸ‘‰ Public cloud became popular because it removes infrastructure ownership, allows rapid scaling, and significantly reduces operational cost.


â“ Why AWS?
1ï¸âƒ£ Market & Ecosystem
    âœ”ï¸ First mover in cloud (launched in 2006)
    âœ”ï¸ Largest market share
    âœ”ï¸ Most mature cloud ecosystem

2ï¸âƒ£ Global Infrastructure
    âœ”ï¸ Regions, Availability Zones, Edge Locations
    âœ”ï¸ Low latency, high availability

3ï¸âƒ£ Service Variety
    âœ”ï¸ Compute â†’ EC2, Lambda
    âœ”ï¸ Storage â†’ S3, EBS
    âœ”ï¸ Databases â†’ RDS, DynamoDB
    âœ”ï¸ Networking â†’ VPC, ELB
    âœ”ï¸ DevOps â†’ CodePipeline, CodeBuild
    âœ”ï¸ Security â†’ IAM, KMS

4ï¸âƒ£ Reliability & Security
    âœ”ï¸ IAM for fine-grained access control
    âœ”ï¸ Compliance with global standards (ISO, SOC, GDPR)
    âœ”ï¸ Highly fault-tolerant architecture



ğŸ”„ Trends: People Moving Back to Private Cloud
â“Why is this happening?
Despite public cloud popularity, some companies are repatriating workloads.
ğŸ‘‰ Key reasons
1ï¸âƒ£ High long-term cost
    âœ”ï¸ Continuous usage â†’ expensive at scale

2ï¸âƒ£ Data sovereignty & compliance
    âœ”ï¸ Strict regulations (banking, healthcare)

3ï¸âƒ£ Predictable workloads
    âœ”ï¸ No benefit of elastic scaling

4ï¸âƒ£ Vendor lock-in
    âœ”ï¸ Heavy dependency on cloud-native services

5ï¸âƒ£ Performance-sensitive systems
    âœ”ï¸ Low-latency workloads prefer on-prem


â“ Does this mean public cloud is failing in the market? âŒ No
â¤ Cloud is still dominant
â¤ Trend mainly applies to:
    âœ”ï¸ Large enterprises
    âœ”ï¸ Stable, predictable workloads

â¤ Current industry direction
    âœ”ï¸ Hybrid cloud is growing the fastest
    âœ”ï¸ Companies choose workload-based deployment
ğŸ‘‰ Instead of abandoning public cloud, companies are becoming more strategic by choosing hybrid models based on workload requirements.

ğŸ”„ Takeaways
â¤ Cloud = Renting IT infrastructure
â¤ Public cloud dominates due to scalability & cost
â¤ AWS leads due to maturity & global reach
â¤ Private cloud still relevant for compliance-heavy workloads
â¤ Hybrid cloud is the future for enterprises


#############
ğŸ”· AWS IAM
#############
â¤ AWS IAM is a global AWS service used to manage users, permissions, and access to AWS resources securely.
â¤ IAM allows us to control who can access AWS, what actions they can perform, and on which resources.

ğŸ”„ Why IAM is Needed?
ğŸŒŸ Without IAM:
    âœ”ï¸ Everyone uses root account âŒ
    âœ”ï¸ No permission boundaries âŒ
    âœ”ï¸ High risk of data breach âŒ

ğŸŒŸ With IAM:
    âœ”ï¸ Fine-grained access control
    âœ”ï¸ Least privilege principle
    âœ”ï¸ Secure multi-user AWS environment

ğŸ”„ IAM Core Components (MOST IMPORTANT)
1ï¸âƒ£ IAM Users
Represents a human or application that needs AWS access.

ğŸŒŸ Characteristics
â¤ Has unique credentials
â¤ Can log in via:
    âœ”ï¸ AWS Console
    âœ”ï¸ AWS CLI
    âœ”ï¸ SDK / API
â¤ Credentials
    âœ”ï¸ Password (Console access)
    âœ”ï¸ Access Key + Secret Key (Programmatic access)
â¤ Best Practices
    âŒ Never use root user
    âŒ Never hardcode access keys
    âœ… Enable MFA


2ï¸âƒ£ IAM Groups
Collection of users with similar permissions.

â“ Why groups?
â¤ Easier permission management
â¤ Avoid assigning policies individually

âœ… Example
â¤ Developers group â†’ EC2, S3 access
â¤ Admins group â†’ Full access
ğŸ“Œ Groups cannot contain groups


3ï¸âƒ£ IAM Roles
Used to grant temporary permissions.

âš¡ Key idea: Roles are assumed, not logged in.

â¤ Used by
    âœ”ï¸ EC2
    âœ”ï¸ Lambda
    âœ”ï¸ ECS
    âœ”ï¸ Cross-account access

â“ Why roles instead of access keys?
    âœ”ï¸ Temporary credentials
    âœ”ï¸ Auto-rotation
    âœ”ï¸ More secure


âœ… Common Scenario
â¤ EC2 needs to access S3
â¤ âœ”ï¸ Attach IAM Role to EC2
â¤ âŒ Donâ€™t store access keys inside EC2


4ï¸âƒ£ IAM Policies
Defines permissions in JSON format.

ğŸ”— Types of Policies
    âœ”ï¸ AWS Managed Policies
    âœ”ï¸ Customer Managed Policies
    âœ”ï¸ Inline Policies

ğŸ”„ IAM Policy Structure (JSON)
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Action": "s3:GetObject",
      "Resource": "arn:aws:s3:::my-bucket/*"
    }
  ]
}
ğŸŒŸ Key Elements
â¤ Effect â†’ Allow / Deny
â¤ Action â†’ What can be done
â¤ Resource â†’ On which resource
â¤ Condition â†’ Optional constraints
ğŸ“Œ Explicit Deny always wins


ğŸ”„ Types of Access Control
1ï¸âƒ£ Identity-Based Policies
â¤ Attached to users, groups, roles
â¤ Most common

2ï¸âƒ£ Resource-Based Policies
Attached to resource itself
âœ… Example:
    âœ”ï¸ S3 bucket policy
    âœ”ï¸ Lambda permission policy
ğŸ“Œ Resource-based policies allow cross-account access


ğŸ”„ IAM Authentication vs Authorization
| Concept        | Meaning         |
| -------------- | --------------- |
| Authentication | Who you are     |
| Authorization  | What you can do |
â¤ IAM handles both


ğŸ”„ Root User (High Risk Topic)
â¤ Created when AWS account is created
â¤ Has full unrestricted access

âš¡ Root User Best Practices
â¤ Enable MFA
â¤ Never use for daily work
â¤ Store credentials securely


ğŸ”„ IAM Security Best Practices 
â¤ Principle of Least Privilege
â¤ Use roles instead of access keys
â¤ Enable MFA
â¤ Rotate credentials
â¤ Use IAM Access Analyzer
â¤ Use AWS CloudTrail for auditing


ğŸ”„ IAM Global vs Regional
â¤ IAM is GLOBAL
â¤ Policies apply across all regions


ğŸ”„ Common Scenarios
Scenario 1ï¸âƒ£
Lambda needs DynamoDB access
âœ”ï¸ Assign IAM Role to Lambda

Scenario 2ï¸âƒ£
One AWS account wants to access another accountâ€™s S3
âœ”ï¸ Use IAM Role + Bucket Policy

Scenario 3ï¸âƒ£
Give developer read-only EC2 access
âœ”ï¸ Attach AWS managed policy: AmazonEC2ReadOnlyAccess


ğŸ”„ IAM vs Other Security Services
| Service         | Purpose                   |
| --------------- | ------------------------- |
| IAM             | Identity & access control |
| KMS             | Encryption                |
| Cognito         | App user authentication   |
| Secrets Manager | Secrets storage           |



#####################################
ğŸ”· AWS EC2(Elastic Compute Cloud)
#####################################
â¤ EC2 (Elastic Compute Cloud) is an AWS service that provides scalable virtual servers (instances) in the cloud.

â¤ EC2 allows us to launch and manage virtual machines with full control over OS, compute, storage, and networking.


ğŸ”„ Why Use an EC2 Instance?
âŒ Problems with traditional servers
â¤ High upfront hardware cost
â¤ Fixed capacity
â¤ Manual scaling
â¤ Long setup time

âœ… EC2 Advantages
â¤ On-demand servers in minutes
â¤ Pay only for usage
â¤ Easy scaling
â¤ Global infrastructure
â¤ High availability

ğŸŒŠ We use EC2 when we need full control over the server, long-running applications, or custom runtime environments.

ğŸ”„ Different Types of EC2 Instances
1ï¸âƒ£ General Purpose: Balanced CPU, memory, networking

âœ… Examples: t3, t4g, m5
ğŸŒŸ Use cases
    âœ”ï¸ Web applications
    âœ”ï¸ Backend APIs
    âœ”ï¸ Dev/test

2ï¸âƒ£ Compute Optimized: High CPU performance

âœ… Examples: c5, c6g
ğŸŒŸ Use cases
    âœ”ï¸ CPU-intensive apps
    âœ”ï¸ Game servers
    âœ”ï¸ Data processing

3ï¸âƒ£ Memory Optimized: Large RAM

âœ… Examples: r5, x1
ğŸŒŸ Use cases
    âœ”ï¸ In-memory databases
    âœ”ï¸ Caching
    âœ”ï¸ Big data analytics

4ï¸âƒ£ Storage Optimized: High disk I/O

âœ… Examples: i3, d2
ğŸŒŸ Use cases
    âœ”ï¸ Data warehousing
    âœ”ï¸ Large datasets

5ï¸âƒ£ Accelerated Computing: GPU / ML workloads

âœ… Examples: p, g
ğŸŒŸ Use cases
    âœ”ï¸ Machine learning
    âœ”ï¸ Video processing
â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ Instance type defines hardware capacity, not software.


ğŸ”„ How to Connect to an EC2 Instance?
ğŸŒŸ For Linux EC2 (SSH)
âš¡ Steps:
1ï¸âƒ£ Download .pem key file
2ï¸âƒ£ Set permission
ğŸ”— chmod 400 key.pem

3ï¸âƒ£ Connect
ğŸ”— ssh -i key.pem ec2-user@<public-ip>


â“ Why key pair is needed?
âœ… Secure authentication instead of passwords


ğŸ”„ How to Deploy an Application on EC2?
âœ… Example: Node.js / Java / React / Backend App
ğŸŒŸ Steps:
1ï¸âƒ£ Launch EC2
2ï¸âƒ£ Connect via SSH
3ï¸âƒ£ Install runtime
ğŸ”— sudo yum install nodejs -y

4ï¸âƒ£ Upload code (Git / SCP)
ğŸ”— git clone <repo-url>

5ï¸âƒ£ Install dependencies
ğŸ”— npm install

6ï¸âƒ£ Start application
ğŸ”— npm start


ğŸ”„ How to Access the Application from Outside World?
1ï¸âƒ£ Public IP / Elastic IP
â¤ Assign public IP to EC2
â¤ Or use Elastic IP (static)

2ï¸âƒ£ Security Group Configuration
Allow inbound traffic:
    âœ”ï¸ HTTP â†’ Port 80
    âœ”ï¸ HTTPS â†’ Port 443
    âœ”ï¸ App port â†’ 3000 / 8080
ğŸ“Œ Security Group acts as a firewall

3ï¸âƒ£ URL Access
ğŸ”— http://<public-ip>:<port>


ğŸ”„ Common Issues
âš¡ App running but not accessible: Check Security Group inbound rules


ğŸ”„ How EC2 Is Exposed Publicly (Production Setup)
â¤ Application Load Balancer
â¤ Auto Scaling Group
â¤ Multiple AZs


ğŸ”„ What Are AWS Regions?
A Region is a geographical area where AWS has data centers.
âœ… Examples
    âœ”ï¸ us-east-1
    âœ”ï¸ ap-south-1 (Mumbai)


â“ Why regions exist
â¤ Low latency
â¤ Compliance
â¤ Fault isolation


ğŸ”„ What Are Availability Zones (AZs)?
An Availability Zone is an isolated data center inside a region.

âœ… Example
    âœ”ï¸ ap-south-1a
    âœ”ï¸ ap-south-1b
â¤ Each region has multiple AZs
â¤ AZs are physically separate
â¤ Connected via high-speed network


ğŸ”„ Region vs Availability Zone
| Region           | Availability Zone        |
| ---------------- | ------------------------ |
| Geographic area  | Data center              |
| Multiple AZs     | Inside one region        |
| Used for latency | Used for fault tolerance |


ğŸ”„ Why Multi-AZ is Important?
â¤ High availability
â¤ Fault tolerance
â¤ Disaster recovery


##############################
ğŸ”· Virtual Private Cloud(VPC)
##############################
â¤ VPC (Virtual Private Cloud) is a logically isolated virtual network in AWS where you launch and manage AWS resources.

â¤ VPC is a private network in AWS that gives us full control over IP addressing, subnets, routing, and network security.


ğŸ”„ Why Do We Need VPC?
â— Without VPC:
    âœ”ï¸ No network isolation
    âœ”ï¸ No control over IP ranges
    âœ”ï¸ No security boundaries

âœ… With VPC:
    âœ”ï¸ Network isolation
    âœ”ï¸ Custom IP addressing
    âœ”ï¸ Controlled inbound/outbound traffic
    âœ”ï¸ Secure architecture
ğŸ‘‰ We need VPC to design secure, isolated, and scalable cloud networks similar to on-premise data centers.


ğŸ”„ Core Components of VPC
1ï¸âƒ£ CIDR Block
2ï¸âƒ£ Subnets
3ï¸âƒ£ Route Tables
4ï¸âƒ£ Internet Gateway
5ï¸âƒ£ NAT Gateway
6ï¸âƒ£ Security Groups
7ï¸âƒ£ Network ACLs


ğŸ”„ Concept of CIDR Block & Subnetting
CIDR (Classless Inter-Domain Routing) defines the IP address range for the VPC.

âœ… Example: 10.0.0.0/16
âœ”ï¸ /16 â†’ network bits
âœ”ï¸ Total IPs = 65,536


ğŸ”„ Why CIDR is Important?
â¤ Defines how many IPs are available
â¤ Helps divide network into subnets
â¤ Avoids IP conflicts


ğŸ”„ Subnetting Concept
Dividing a VPC CIDR into smaller IP ranges.

âœ… Example:
âœ”ï¸ VPC: 10.0.0.0/16
âœ”ï¸ Subnet 1: 10.0.1.0/24
âœ”ï¸ Subnet 2: 10.0.2.0/24
ğŸ“Œ Each subnet belongs to one AZ only


ğŸ”„ How VPC Components Interact
User â†’ Internet â†’ Internet Gateway â†’ Route Table â†’
Public Subnet â†’ EC2 Instance

ğŸ”— For private access:
Private Subnet â†’ NAT Gateway â†’ Internet Gateway


ğŸ”„ How to Create a VPC
Step-1ï¸âƒ£: Create VPC
Step-2ï¸âƒ£: Choose CIDR block
âœ… Example: 10.0.0.0/16
ğŸ“Œ VPC is regional


ğŸ”„ How to Create Subnet (After VPC)
Steps:
1ï¸âƒ£ Select VPC
2ï¸âƒ£ Choose Availability Zone
3ï¸âƒ£ Assign subnet CIDR
âœ… Example:
Public Subnet: 10.0.1.0/24
Private Subnet: 10.0.2.0/24

ğŸ“Œ Subnet is AZ-specific


ğŸ”„ Public Subnet vs Private Subnet
ğŸ” Public Subnet
â¤ Has route to Internet Gateway
â¤ Used for:
    âœ”ï¸ EC2 (Web servers)
    âœ”ï¸ Load Balancer

ğŸ” Private Subnet
â¤ No direct internet access
â¤ Used for:
    âœ”ï¸ Databases
    âœ”ï¸ Backend services
âš¡ A subnet becomes public or private based on route table configuration, not by name.


ğŸ”„ How to Create Internet Gateway (IGW)
(Used for internet access)
Steps:
1ï¸âƒ£ Create Internet Gateway
2ï¸âƒ£ Attach it to VPC
ğŸ“Œ One IGW per VPC


ğŸ”„ Route Table
â¤ Controls where network traffic goes.
â¤ Default Route Table
    âœ”ï¸ Allows internal VPC traffic


ğŸ”„ Public Route Table
â¤ Add route: 0.0.0.0/0 â†’ Internet Gateway
â¤ Associate with: Public Subnet

ğŸ”„ Private Route Table
â¤ Add route: 0.0.0.0/0 â†’ NAT Gateway
â¤ Associate with: Private Subnet


ğŸ”„ NAT Gateway (Private Subnet Internet Access)
â¤ Allows outbound internet
â¤ Blocks inbound internet
ğŸ“Œ Placed in public subnet


ğŸ”„ Security Components Interaction
1ï¸âƒ£ Security Group
â¤ Instance-level firewall
â¤ Stateful
â¤ Allow rules only

2ï¸âƒ£ NACL
â¤ Subnet-level firewall
â¤ Stateless
â¤ Allow & deny rules


ğŸ”„ VPC Setup Flow
â¤ Create VPC (CIDR)
â¤ Create Subnets (Public & Private)
â¤ Create Internet Gateway
â¤ Attach IGW to VPC
â¤ Create Route Tables
â¤ Add routes
â¤ Associate route tables with subnets
â¤ Launch EC2 in correct subnet
â¤ Configure Security Groups

âœ… Real-World Example:: Web Application Architecture
â¤ Public Subnet â†’ ALB, EC2
â¤ Private Subnet â†’ RDS
â¤ NAT Gateway â†’ Updates from private subnet


ğŸ”„ Common Traps
â¤ Subnet â‰  AZ (Subnet belongs to AZ)
â¤ Public subnet â‰  public IP
â¤ IGW alone â‰  internet access
â¤ Route table defines public/private
â¤ NAT Gateway must be in public subnet


############################
ğŸ”· Security Group and NACL
############################
Security Group = Virtual Firewall for Instances
â¤ Applied at EC2 instance level
â¤ Controls traffic inbound and outbound
â¤ Stateful â†’ If inbound traffic is allowed, the response automatically allowed outbound

ğŸ” Key Characteristics
| Feature          | Security Group                                        |
| ---------------- | ----------------------------------------------------- |
| Scope            | **Instance-level**                                    |
| Traffic control  | Inbound + Outbound                                    |
| Stateful         | âœ”ï¸ Yes                                                 |
| Allow/Deny       | **Only Allow** rules                                  |
| Default Behavior | All inbound traffic **blocked**, outbound **allowed** |
| Evaluation       | All rules checked, if one matches â†’ allowed           |
| Logging          | Supported via VPC Flow Logs                           |


ğŸ”· Network Access Control List(NACL)
NACL = Firewall for Subnets
â¤ Applied at Subnet level
â¤ Controls inbound & outbound traffic for all resources inside the subnet
â¤ Stateless â†’ Return traffic must be explicitly allowed


ğŸ” Key Characteristics
| Feature      | NACL                                      |
| ------------ | ----------------------------------------- |
| Scope        | **Subnet-level**                          |
| Stateful     | âŒ No                                     |
| Allow/Deny   | Supports **Allow + Deny**                 |
| Rule Order   | **Evaluated in order** (Lowest â†’ Highest) |
| Default Rule | Allow everything (modifiable)             |
| Logging      | Supported via VPC Flow Logs               |


ğŸ” STATEFUL vs STATELESS
| Feature                               | Security Group | NACL    |
| ------------------------------------- | -------------- | -----   |
| Return traffic allowed automatically? | âœ”ï¸ Yes         | âŒ No   |
| Need separate rule for response?      | âŒ No         | âœ”ï¸ Yes   |
| Need separate rule for logging?       | âœ”ï¸ Yes         | âŒ No   |


ğŸ” Default Rules
| Component      | Default Behavior                         |
| -------------- | ---------------------------------------- |
| Security Group | **Deny all inbound**, allow all outbound |
| NACL (default) | Allow all inbound and outbound           |
â—Trap â†’ Many mistakenly say NACL blocks everything by default


ğŸ” Order of Operation
Traffic Flow Check:

                     Internet
                        |
                  Internet Gateway
                        |
                   VPC Router
                        |
               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               |      NACL        |  â† Stateless, subnet-level
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        |
               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               | Security Group   |  â† Stateful, instance-level
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        |
                     EC2


ğŸ” Use Cases
| Scenario                    | Use Security Group | Use NACL  |
| --------------------------- | ------------------ | --------- |
| Protect individual EC2      | âœ”ï¸ Yes              | âŒ No    |
| Control subnet-wide traffic | âŒ No              | âœ”ï¸ Yes    |
| Block specific IPs          | âŒ No              | âœ”ï¸ Yes    |
| Fine-grained rules          | âœ”ï¸ Yes              | âŒ Limited|
| Allow both HTTP & SSH       | âœ”ï¸ Yes              | âœ”ï¸ Yes     |


ğŸ” Common Traps & Answers
| Question                                  | Correct Answer                                |
| ----------------------------------------- | --------------------------------------------- |
| Can SG deny rules?                        | âŒ Only allow rules                            |
| Can SG be attached to multiple instances? | âœ”ï¸ Yes                                         |
| Can a subnet have multiple NACLs?         | âŒ Only one at a time                          |
| Why NACL is stateless?                    | Must define rules for both request & response |


âœ… Example Scenario
You are hosting a web application on an EC2 instance.

Requirement:
â¤ Public users should access the app using HTTP (80) or HTTPS (443)
â¤ Only DevOps team should access server via SSH (22)
â¤ Database is in private subnet, accessible only by the web server

We will configure:
1ï¸âƒ£ Security Group for Web Server (EC2)
| Rule Type       | Direction | Port         | Source                         | Reason                    |
| --------------- | --------- | ------------ | ------------------------------ | ------------------------- |
| HTTP            | Inbound   | 80           | 0.0.0.0/0                      | Public can access website |
| HTTPS           | Inbound   | 443          | 0.0.0.0/0                      | Secure public access      |
| SSH             | Inbound   | 22           | Your IP (e.g., 183.89.***.***) | Admin access only         |
| Database Access | Outbound  | 3306 (MySQL) | DB SG                          | App to DB communication   |
âš¡ Note: Outbound default is ALLOW ALL, often kept unchanged.


2ï¸âƒ£ Security Group for Database (RDS / Private EC2 DB)
| Direction | Port         | Source          | Purpose                             |
| --------- | ------------ | --------------- | ----------------------------------- |
| Inbound   | 3306 (MySQL) | WebServer-SG-ID | Only web server can access database |
| Outbound  | All          | Default         | For response traffic                |
âš¡ Note: Using Security Group ID instead of IP increases security.


3ï¸âƒ£ NACL Rules Example â€” Public Subnet
NACL is statelessm so you must add inbound and outbound both.
| Rule# | Direction | Protocol | Port | Source/Destination | Allow/Deny | Purpose              |
| ----- | --------- | -------- | ---- | ------------------ | ---------- | -------------------- |
| 100   | Inbound   | TCP      | 80   | 0.0.0.0/0          | ALLOW      | Public HTTP traffic  |
| 110   | Inbound   | TCP      | 443  | 0.0.0.0/0          | ALLOW      | HTTPS                |
| 120   | Inbound   | TCP      | 22   | Your IP            | ALLOW      | Admin SSH            |
| â˜…     | Inbound   | All      | All  | 0.0.0.0/0          | DENY       | Deny everything else |

Outbound:
| Rule# | Protocol | Port       | Destination | Allow/Deny | Purpose        |
| ----- | -------- | ---------- | ----------- | ---------- | -------------- |
| 100   | TCP      | 1024-65535 | 0.0.0.0/0   | ALLOW      | Return traffic |
| â˜…     | All      | All        | 0.0.0.0/0   | DENY       | Default deny   |


4ï¸âƒ£ NACL Rules Example â€” Private Subnet
Only allow database communication from the web server subnet

| Direction | Protocol | Port | Source             | Allow/Deny |
| --------- | -------- | ---- | ------------------ | ---------- |
| Inbound   | TCP      | 3306 | Public-subnet-CIDR | ALLOW      |
| Inbound   | All      | All  | 0.0.0.0/0          | DENY       |
| Outbound  | All      | All  | 0.0.0.0/0          | DENY       |



#############
ğŸ”· Route53
#############
Route 53 is AWSâ€™s global DNS & traffic management service designed for:
â¤ Domain registration
â¤ DNS resolution
â¤ Traffic routing + Load steering
â¤ Health-based failover
â¤ Global performance optimization

It runs across AWSâ€™s globally distributed edge locations â€” the same network as CloudFront â€” to provide ultra-low-latency DNS responses anywhere in the world.


â“ WHY the name Route â€œ53â€?
â¤ 53 is the port number of DNS protocol (UDP/TCP port 53)
â¤ â€œRouteâ€ â†’ network routing + traffic steering
    âœ”ï¸ Clever naming rooted in fundamentals


ğŸ”„ Core Components & Concepts
| Component             | Role                                        |
| --------------------- | ------------------------------------------- |
| **Hosted Zone**       | Container for all DNS records of a domain   |
| **DNS Records**       | Mapping of names â†’ IPs / resources          |
| **Authoritative DNS** | Route 53 answers officially for your domain |
| **Health Checks**     | Remove unhealthy endpoints automatically    |
| **Routing Policies**  | Intelligent traffic distribution logic      |


ğŸ”‘ Types of Hosted Zones
| Type                    | Use                          |
| ----------------------- | ---------------------------- |
| **Public Hosted Zone**  | Domain available on Internet |
| **Private Hosted Zone** | DNS restricted inside VPC    |
ğŸ‘‰ Private DNS avoids exposing internal service IPs publicly.


ğŸ” DNS Record Types Supported
| Record                        | Purpose                                             |
| ----------------------------- | --------------------------------------------------- |
| **A**                         | Name â†’ IPv4                                         |
| **AAAA**                      | Name â†’ IPv6                                         |
| **CNAME**                     | Name â†’ Another name                                 |
| **MX**                        | Email routing                                       |
| **TXT**                       | Verification, SPF, DKIM                             |
| **NS**                        | Delegation to name servers                          |
| **Alias** (Route 53-specific) | Map AWS services with automatic health + dynamic IP |

ğŸ‘‰ Alias records automatically track changing cloud targets
âœ… Example: ALB DNS â†’ never changes, but IPs change every minute


ğŸ” Route 53 as a Global Load Routing Engine
Route 53 is not a load balancer, but decides where users go globally:

Supported Routing Policies
| Routing Type           | What it does               | Use Case                   |
| ---------------------- | -------------------------- | -------------------------- |
| **Simple**             | One record â†’ One IP        | Basic websites             |
| **Weighted**           | Split traffic %            | Blue/Green deploy          |
| **Latency-based**      | Closest AWS region         | Global apps                |
| **Geolocation**        | Based on user location     | Legal, GDPR                |
| **Geo-proximity**      | Regional preference shift  | Regional migrations        |
| **Failover**           | Primary + Secondary        | DR setups                  |
| **Multi-value Answer** | Multiple healthy endpoints | Client-side load selection |
âœ”ï¸ Route 53 + Health Checks => Self-repairing DNS


ğŸ” Health Checks
Monitors:
â¤ HTTP/HTTPS/TCP
â¤ Latency, status codes
â¤ String match inside HTTP body
â¤ Can trigger CloudWatch alarms

If endpoint fails:
â¤ Automatically removed from DNS responses
â†’ User gets only healthy locations

Failure Detection Time:
â¤ ~15â€“45 seconds depending on probing interval


ğŸ” DNS resolution works inside Route 53
User Browser
     â”‚
     â–¼
Local DNS Resolver (ISP, OS cache)
     â”‚ (no cached answer)
     â–¼
Root DNS Servers (.)
     â”‚
     â–¼
TLD DNS (.com, .in, etc.)
     â”‚
     â–¼
Route 53 Authoritative Name Servers
     â”‚
     â–¼
Return IP â†’ Browser connects to target
âœ”ï¸ Route 53 sits at the authoritative layer


ğŸ” Global Anycast DNS Architecture
â¤ Every Route 53 name server:
    âœ”ï¸ Is deployed in multiple physical locations
    âœ”ï¸ Uses Anycast IP addressing
â¤ Result:
    âœ”ï¸ DNS request resolves at the closest edge location
    âœ”ï¸ Fast lookup + high resiliency
ğŸ‘‰ Even if entire region fails â†’ DNS still responds from other edges


âš¡Alias vs CNAME
| Feature                  | Alias   | CNAME    |
| ------------------------ | -----   | ------   |
| For root domain?         | âœ”ï¸ Yes | âŒ No    |
| Health check integration | âœ”ï¸ Yes | âŒ No    |
| DNS Query cost           | Free    | Billed   |
| Tracks AWS resource IPs  | âœ”ï¸ Yes | âŒ No    |
âœ… Example:
example.com â†’ ALIAS to ALB
www.example.com â†’ CNAME to example.com

Alias supports AWS resources:
â¤ CloudFront
â¤ ALB / NLB
â¤ API Gateway
â¤ S3 Static Websites
â¤ Global Accelerator


âœ… DNS + Load Balancer + VPC + Routing Example
User â†’ DNS Query â†’ Route 53 (Latency Rule)
         â”‚
         â–¼
Closest Region ALB (Health OK?)
         â”‚
         â–¼
Target EC2 or ECS Service â†’ App


If Region A goes down:
Traffic shifts â†’ Region B (Failover Rule)

âœ”ï¸ No downtime
âœ”ï¸ No manual changes
âœ”ï¸ Global resiliency


ğŸ” Common Architectures Using Route 53
| Architecture Goal             | Best Route Policy       |
| ----------------------------- | ----------------------- |
| Disaster recovery             | Failover                |
| Global low latency            | Latency-based           |
| Feature rollout 5% of traffic | Weighted                |
| Legal restrictions            | Geolocation             |
| Multi-region active-active    | Latency / Geo-proximity |


ğŸ” Security Perspective
â¤ Route 53 DNS can work with:
    âœ”ï¸ DNSSEC
    âœ”ï¸ Shield Advanced (DDoS protection)
    âœ”ï¸ Firewall Manager

â¤ Protects from:
    âœ”ï¸ DNS spoofing
    âœ”ï¸ DNS reflection attacks


âœ”ï¸ Mental Model
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚ Global Anycast DNS Network â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
             Route 53 Authority
   (Records + Policies + Health Checks)
                    â”‚
   Intelligent Traffic Distribution
                    â”‚
   AWS & On-Prem Endpoints Anywhere

â¤ Route 53 = DNS + Traffic Engineering + Health Aware Routing
â¤ It makes the right user reach the right endpoint globally.


####################################
ğŸ”· AWS S3( Simple Storage Service)
####################################
S3 is an object storage system used to store unlimited data with extreme durability and global scalability. It is one of the core building blocks of AWS, used across almost every service.


ğŸ” S3â€™s Core Design Philosophy
| Feature                    | What it means                             |
| -------------------------- | ----------------------------------------- |
| **Object Storage**         | Data stored as objects (not files/blocks) |
| **Unlimited Scale**        | Infrastructure expands automatically      |
| **11 9s Durability**       | 99.999999999% object survival             |
| **Global Namespace**       | Bucket name must be unique per region     |
| **High Availability**      | Data stored across â‰¥ 3 Availability Zones |
| **Designed for 1000s TPS** | Parallelism built in                      |
ğŸ‘‰ S3 is a distributed system, not a file system.


ğŸ§± Internal Data Structure of S3
Every object =
Key (name/path)
Value (actual data)
Version ID (optional)
Metadata
ACL/Permissions

âœ… Example â€œpathâ€:mybucket/images/profile.png
ğŸ‘‰ This is not a folder â€” â€œfolderâ€ behavior is virtual, simulated by key prefixes.


ğŸ” How S3 Achieves 11 9s Durability
Durability achieved by:
âœ”ï¸ Automatic replication across 3+ AZs
âœ”ï¸ Checksums on write
âœ”ï¸ Self-healing storage
âœ”ï¸ Background scans/repair

Even if:
â¤ 1 complete AZ destroyed â†’ data safe
â¤ Hardware failures â†’ auto-replicated


ğŸ” Consistency Model
| Operation              | Consistency           |
| ---------------------- | --------------------- |
| New Object PUT         | **Strong consistent** |
| UPDATE existing object | **Strong**            |
| DELETE                 | **Strong**            |
ğŸ‘‰ Older S3 was eventually consistent â€” now strong consistency for all operations.


ğŸ” Buckets & Regions
Buckets are regional resources:

âœ… Example:
ap-south-1 (Mumbai)
us-east-1 (N. Virginia)
ğŸ‘‰ Data physically remains within chosen region (unless replicated).


ğŸ” Storage Classes (Cost vs Performance)
| Class                    | Usage                                  | Cost    | AZ Redundancy |
| ------------------------ | -------------------------------------- | ------- | ------------- |
| **Standard**             | Frequent access                        | ğŸ’°ğŸ’°    | Multi-AZ      |
| **Standard-IA**          | Infrequent access                      | ğŸ’°      | Multi-AZ      |
| **One-Zone-IA**          | Low-cost archive                       | ğŸ’µ      | Single-AZ âŒ   |
| **Glacier Instant**      | Archive, Quick read                    | ğŸ’µ      | Multi-AZ      |
| **Glacier Flexible**     | Long archive                           | ğŸ’µâ†“     | Hours         |
| **Glacier Deep Archive** | Lowest cost                            | ğŸ’µâ†“â†“    | 12â€“48h        |
| **Intelligent Tiering**  | Automatically moves data between tiers | Dynamic | Multi-AZ      |


ğŸ”„ Lifecycle Policies
Automate object transitions:
    âœ”ï¸ From Standard â†’ IA â†’ Glacier â†’ Delete
    âœ”ï¸ Based on age/time rules
Useful for reducing cost automatically.


ğŸ” Access Control Deep Understanding
S3 security = Layered
| Layer                   | Controls                             |
| ----------------------- | ------------------------------------ |
| **Bucket Policy**       | Public/private rules at bucket level |
| **IAM Policies**        | User/role permissions                |
| **ACLs**                | Object-level legacy access control   |
| **Block Public Access** | Prevent accidental exposure          |
ğŸ‘‰ Security architecture rule: DO NOT make buckets public. Use signed URLs instead.

ğŸ” Encryption (2 layers)
| Type    | Where encrypted               | Example              |
| ------- | ----------------------------- | -------------------- |
| **SSE** | Server-side                   | SSE-S3 / SSE-KMS     |
| **CSE** | Client encrypts before upload | Fully app-controlled |

â¤ SSE-KMS is most secure:
    âœ”ï¸ Keys managed by AWS KMS
    âœ”ï¸ Audit in CloudTrail


ğŸ” Performance Architecture
S3 uses:
âœ”ï¸ Massive horizontal partitioning
âœ”ï¸ Prefix-based scaling
âœ”ï¸ Request parallelism
âœ”ï¸ Multi-part uploads for large files (â‰¥ 100MB recommended)
ğŸ‘‰ Keys with random prefixes avoid bottleneck (like UUIDs).

S3 supports:
âœ”ï¸ 100â€“350 MB/s per prefix
âœ”ï¸ Unlimited prefixes â†’ near unlimited throughput


ğŸ” Accessing S3
Methods:
    âœ”ï¸ REST API
    âœ”ï¸ HTTPS endpoints
    âœ”ï¸ AWS SDKs/CLI
    âœ”ï¸ S3 Website Access
    âœ”ï¸ VPC Interface Endpoints (private access)

No NFS/SMB mounts directly (use:
    âœ”ï¸ S3 + FSx File Systems
    âœ”ï¸ S3 + EFS
    âœ”ï¸ S3 + S3 File Gateway


ğŸ”„ Cross-Region Replication (CRR)
Purpose:
    âœ”ï¸ Disaster recovery
    âœ”ï¸ Reduce latency for remote users
    âœ”ï¸ Data sovereignty compliance
Supports:
âœ”ï¸ New object replication
âœ”ï¸ Versioning sync
âŒ Old objects before enabling not auto-replicated


ğŸŒ Static Web Hosting on S3
â¤ Serve HTML/JS/CSS directly
â¤ No backend processing
â¤ Index + error page support

CloudFront recommended for:
    âœ”ï¸ HTTPS
    âœ”ï¸ Caching
    âœ”ï¸ Global distribution


ğŸ” Data Protection & Eventing
| Feature             | Purpose                             |
| ------------------- | ----------------------------------- |
| Versioning          | Restore deleted/overwritten objects |
| MFA Delete          | Prevent accidental/attacker deletes |
| Object Lock         | WORM compliance (legal records)     |
| Event Notifications | Trigger Lambda, SQS, SNS            |
| Access Logs         | Track who accessed data             |



ğŸ” Example Use Cases & How S3 Supports Them
| System                  | Feature used                        |
| ----------------------- | ----------------------------------- |
| Data Lake Architecture  | S3 + Glue + Athena + Lake Formation |
| Serverless Apps         | S3 â†’ Lambda â†’ DynamoDB              |
| CDN Content             | S3 + CloudFront                     |
| Backups & Archives      | Lifecycle + Glacier                 |
| Logging                 | S3 central storage                  |
| Mobile app file uploads | Presigned URLs                      |


ğŸ§¬ Internal Architecture (Simplified Flow)
Client
  â”‚  PUT/GET request
  â–¼
S3 API Front-End (Global Fleet)
  â”‚
  â–¼
Distributed Metadata System
  â”‚   (Object indexing + consistency)
  â–¼
Storage Nodes across 3+ AZs
  (Chunked, replicated, self-healed)
âœ”ï¸ Storage hardware constantly rotated
âœ”ï¸ System independently verifies integrity


ğŸ” Common Misconceptions
| Myth                        | Reality                                              |
| --------------------------- | ---------------------------------------------------- |
| S3 is a filesystem          | âŒ It's object storage with simulated folders         |
| Buckets scale automatically | âœ”ï¸ But poorly designed key prefixes will bottleneck   |
| Data is always encrypted    | âŒ Only if enabled explicitly (or enforced by policy) |
| S3 is slow                  | âŒ It scales, but use multi-prefix + multipart        |


ğŸ¯ Final Deep Mental Model
S3 =
Object Store +
Distributed Metadata +
Strong Consistency +
Extreme Durability (11 9s) +
Global Parallel Architecture +
Security + Compliance +
Event-Driven Platform
ğŸ‘‰ S3 is not just storage â€” itâ€™s a data foundation layer for modern cloud systems.


############
ğŸ”· AWS CLI
############
AWS CLI (Command Line Interface) is a unified tool to interact with all AWS services using commands instead of the browser console.

Itâ€™s built on top of:
â¤ AWS SDK for Python (boto3)
â¤ AWS API endpoints using HTTPS
â¤ SigV4 Signing System (cryptographic request signing)


â“ Why AWS CLI Exists?
| Feature                   | Advantage                            |
| ------------------------- | ------------------------------------ |
| Automation                | Scripting deployments, CI/CD         |
| Consistency               | Same commands across OS              |
| Fast control              | Bulk operations                      |
| Infrastructure management | Create/modify AWS resources via code |
| Server environments       | Access AWS without browser GUI       |
ğŸ‘‰ CLI= the backbone of DevOps, IaC and automation workflows.


AWS CLI Installation (Latest: v2) for Ubuntu 24.04
ğŸ”— curl "https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip" -o "awscliv2.zip"
ğŸ”— unzip awscliv2.zip
ğŸ”— sudo ./aws/install
ğŸ”— aws --version


ğŸ” AWS CLI Authentication
AWS CLI signs every request with SigV4 cryptographic signatures using credentials:
| Type                  | Where used                      |
| --------------------- | ------------------------------- |
| **Access Key ID**     | Public identifier               |
| **Secret Access Key** | Private cryptographic signing   |
| **Session Token**     | Temporary access (STS/IAM Role) |
Credentials NEVER appear in request body- only in signature headers.


ğŸ”CLI Configuration â€” aws configure
1ï¸âƒ£ Stores credentials in:~/.aws/credentials
2ï¸âƒ£ Sets default region in: ~/.aws/config
3ï¸âƒ£ Sets default output format in: ~/.aws/config
4ï¸âƒ£ Run: aws configure

Input required:
    âœ”ï¸ AWS Access Key ID
    âœ”ï¸ AWS Secret Access Key
    âœ”ï¸ Region (ap-south-1, us-east-1, etc.)
    âœ”ï¸ Output format (json, yaml, text, table)


ğŸ” Use Roles NOT Access Keys
â¡ï¸ On EC2/ECS/Lambda, automatically use Instance Profiles / IAM Roles
â¡ï¸ STS Temporary Credentials auto-rotate
â¡ï¸ No secrets stored on disk

Fallback order (Credential Provider Chain):
1ï¸âƒ£ Env variables (AWS_ACCESS_KEY_ID)
2ï¸âƒ£ Credentials file
3ï¸âƒ£ IAM role attached to instance
4ï¸âƒ£ Container credentials
5ï¸âƒ£ Custom providers
ğŸ‘‰ Thatâ€™s how CLI magically works inside EC2/ECS without configuration.


ğŸ” Profiles â€” Multiple Credentials Support
1ï¸âƒ£ Add a new profile: aws configure --profile dev
2ï¸âƒ£ Use it: aws s3 ls --profile dev

You can maintain:
    âœ”ï¸ dev
    âœ”ï¸ staging
    âœ”ï¸ production
    âœ”ï¸ audit role
etc., isolated from each other.


ğŸ” How CLI Executes Commands Internally
âœ… Example: aws s3 ls

ğŸŒŸ Internal Flow:
CLI â†’ Credential Selection â†’ API Endpoint â†’ SigV4 â†’ HTTPS â†’ AWS Service API
â”‚
â””â”€ Receives JSON â†’ Formats output

ğŸ” Important Global CLI Parameters
| Option              | Purpose                      |
| ------------------- | ---------------------------- |
| `--region`          | Override configured region   |
| `--query`           | Filter output using JMESPath |
| `--output`          | json, yaml, text, table      |
| `--profile`         | Use specific profile         |
| `--cli-auto-prompt` | Guided interactive mode      |


ğŸ”Output Filtering â€” JMESPath (Very powerful!)
âœ… Example 1: list only instance IDs
ğŸ”— aws ec2 describe-instances --query "Reservations[*].Instances[*].InstanceId"

âœ… Example 2:Get S3 bucket names only:
ğŸ”— aws s3api list-buckets --query "Buckets[].Name"


ğŸ” Pagination Issues
1ï¸âƒ£ Many APIs paginate results. CLI handles with:
--starting-token
--page-size
--max-items

2ï¸âƒ£ or stream automatically using: --no-paginate


ğŸ” CLI Command Framework
ğŸ”„ S3 Standard Commands
ğŸ”— aws s3 ls                         # List buckets
ğŸ”— aws s3 cp file.txt s3://my-bucket
ğŸ”— aws s3 sync ./site s3://my-bucket
ğŸ”— aws s3 rm s3://bucket/file.txt

ğŸ”„ Low-level S3API
ğŸ”— aws s3api list-buckets
ğŸ”— aws s3api put-object ...
ğŸ‘‰ s3api gives deeper low-level control (encryption, ACLs)

ğŸ”„ EC2
ğŸ”— aws ec2 run-instances ...
ğŸ”— aws ec2 describe-instances
ğŸ”— aws ec2 stop-instances --instance-ids i-1234
ğŸ”— aws ec2 terminate-instances --instance-ids i-1234


ğŸ” Scripting with AWS CLI
âœ… Example: stop all running instances:
ğŸ”— aws ec2 describe-instances \
--filters "Name=instance-state-name,Values=running" \
--query "Reservations[*].Instances[*].InstanceId" --output text \
| xargs -n 1 aws ec2 stop-instances --instance-ids

Automating:
    âœ”ï¸ Patch updates
    âœ”ï¸ Backups to S3
    âœ”ï¸ Triggering Lambda or Step Functions


ğŸ” Advanced Authentication Strategies
| Type                      | Where Used        | Rotation        |
| ------------------------- | ----------------- | --------------- |
| Static Keys               | Local machines    | Manual (bad)    |
| SSO (AWS Identity Center) | Enterprise        | Auto tokens     |
| STS Role Assumption       | Secure automation | Expiring tokens |
| Instance/Task Role        | Workloads         | Auto refreshed  |

âœ… Example: Assume role:
ğŸ”— aws sts assume-role \
--role-arn arn:aws:iam::123456789012:role/admin \
--role-session-name mysess


ğŸ” Security Best Practices
âœ”ï¸ Never store keys in code / repo
âœ”ï¸ Use IAM least privilege
âœ”ï¸ Always enable MFA
âœ”ï¸ Use IAM roles for EC2/ECS/Lambda
âœ”ï¸ Use AWS SSO for human access
âœ”ï¸ Rotate credentials regularly


ğŸ” Networking Behavior
â¤ AWS CLI reaches APIs through:
    âœ”ï¸ Public AWS endpoints
    âœ”ï¸ VPC Interface Endpoints (PrivateLink) for private access

ğŸ”— aws ec2 describe-instances --endpoint-url https://vpce-xyz.ec2.ap-south-1.vpce.amazonaws.com

â¤ Useful for:
    âœ”ï¸ Highly regulated environments
    âœ”ï¸ Air-gapped VPCs


ğŸ” Mental Model
ğŸ”— AWS CLI =
Unified API client
+ SigV4 cryptographic signing
+ Automation engine
+ JMESPath querying
+ High-scale management tool
ğŸ‘‰ CLI is the command-line gateway into the entire AWS cloud control plane.


#############################################
ğŸ”· IaC(Infrastructure as Code) with AWS CFT
#############################################
â¤ Infrastructure as Code is the practice of defining and managing IT infrastructure using code, rather than manual configuration.

â¤ Infrastructure provisioning becomes repeatable, automated, version-controlled like software development.


ğŸ” Key Principles of IaC
| Principle                    | Meaning                                                        |
| ---------------------------- | -------------------------------------------------------------- |
| **Declarative Definition**   | Define *what* resources are needed, not *how* to create them   |
| **Idempotency**              | Running the same code again results in the same infrastructure |
| **Version Control Friendly** | Git can track infrastructure changes                           |
| **Automation**               | No manual creation of resources in AWS console                 |
| **Consistency**              | Eliminates misconfiguration and human errors                   |


â“ Why we need IaC?
| Manual Setup Issues                        | IaC Solution                              |
| ------------------------------------------ | ----------------------------------------- |
| Human errors                               | Automated provisioning                    |
| No proper versioning                       | Git version control                       |
| Hard to replicate environments             | Repeatable environment creation           |
| Hard to track infrastructure configuration | Everything is documented in code          |
| Difficult rollback                         | Rollback by redeploying an older template |


ğŸ” AWS CloudFormation
AWS CFT is a native IaC tool that allows us to define and provision AWS resources using templates (YAML/JSON).

It creates, updates, and deletes infrastructure in a controlled and predictable way.


â“ How CloudFormation Works
Template (YAML/JSON)
       â”‚
       â–¼
 CloudFormation Engine
       â”‚
       â–¼
Creates Stack (Infrastructure deployment)
ğŸ‘‰ A Stack = A group of AWS resources created from a template


ğŸ” Template Structure
A CloudFormation template mainly consists of:
| Section                      | Purpose                                   |
| ---------------------------- | ----------------------------------------- |
| **AWSTemplateFormatVersion** | Template version info (optional)          |
| **Description**              | About the template                        |
| **Metadata**                 | Additional info for internal logic        |
| **Parameters**               | Inputs provided during deployment         |
| **Mappings**                 | Region-based configurations               |
| **Conditions**               | Create resources based on conditions      |
| **Resources**                | ğŸ”¥ Actual AWS resources (Must have)       |
| **Outputs**                  | Export important values (e.g., Public IP) |


âœ…Example â€” EC2 Deployment Template (YAML)
AWSTemplateFormatVersion: '2010-09-09'
Description: Deploy a simple EC2 instance

Parameters:
  KeyPair:
    Type: AWS::EC2::KeyPair::KeyName
    Description: Existing Key Pair to SSH

Resources:
  MyEC2Instance:
    Type: AWS::EC2::Instance
    Properties:
      InstanceType: t2.micro
      ImageId: ami-0c02fb55956c7d316 # Amazon Linux 2 (Region-specific)
      KeyName: !Ref KeyPair


âœ… Outputs:
  InstancePublicIP:
    Description: Public IP of EC2
    Value: !GetAtt MyEC2Instance.PublicIp


ğŸ” Deployment Steps
Method 1ï¸âƒ£ â€” AWS Management Console
1ï¸âƒ£ Go to CloudFormation
2ï¸âƒ£ Create Stack â†’ Upload Template File
3ï¸âƒ£ Enter parameters (like KeyPair)
4ï¸âƒ£ Deploy

Method 2ï¸âƒ£ â€” AWS CLI
ğŸ”— aws cloudformation create-stack \
  --stack-name my-ec2-stack \
  --template-body file://ec2-template.yaml \
  --parameters ParameterKey=KeyPair,ParameterValue=mykeypair


ğŸ” Stack Lifecycle
| Stage                    | Meaning                       |
| ------------------------ | ----------------------------- |
| **CREATE_IN_PROGRESS**   | Deploying resources           |
| **CREATE_COMPLETE**      | Deployed successfully         |
| **UPDATE_IN_PROGRESS**   | Updating changes              |
| **ROLLBACK_IN_PROGRESS** | Errors â†’ revert to last state |
| **DELETE_COMPLETE**      | All resources removed         |


ğŸ” Drift Detection 
CloudFormation detects if someone manually modified infrastructure outside CFT.
    âœ”ï¸ Drift Detected (console shows differences)
    âœ”ï¸ Helps maintain compliance and consistency


ğŸ”„ Change Sets
â¤ Like a preview plan
â¤ Shows what changes will happen before updating stack
â¤ Used to avoid accidental destructive changes


ğŸ” StackSets (Multi-Region or Multi-Account)
â¤ If a company runs multi-cloud architecture:
    âœ”ï¸ Create once â†’ deploy across multiple AWS accounts & regions

âœ… Examples:
    âœ”ï¸ Deploy same VPC architecture to 10 regions
    âœ”ï¸ Create IAM Roles across multiple business units


ğŸ” CloudFormation vs Terraform
| Feature             | CloudFormation        | Terraform                   |
| ------------------- | --------------------- | --------------------------- |
| Execution Engine    | AWS native            | Cloud-agnostic              |
| Language            | YAML/JSON             | HCL                         |
| Multi-Cloud Support | âŒ                     | âœ”ï¸                           |
| State Management    | Managed automatically | State file managed manually |
| Resource Coverage   | Best for AWS          | Best for Hybrid/Multi-Cloud |


ğŸ” Best Practices for CloudFormation
âœ”ï¸ Use Parameters for flexibility
âœ”ï¸ Use Mappings for region-specific AMIs
âœ”ï¸ Use Outputs to export data to other stacks
âœ”ï¸ Use Change Sets before updates
âœ”ï¸ Use CloudFormation Linter (cfn-lint) for validation
âœ”ï¸ Strictly maintain Git versioning
âœ”ï¸ Avoid manual AWS resource changes


ğŸ” Why CloudFormation is important for AWS engineers?
â¤ Standardizes environment deployment
â¤ Automates infrastructure provisioning
â¤ Supports CI/CD pipelines
â¤ Helps in DevOps and GitOps workflows
â¤ Ensures production-grade infrastructure consistency


###############################
ğŸ”·  AWS CICD | AWS CodeCommit
###############################
â¤ A fully managed, scalable, private Git repository hosted by AWS.
â¤ Similar to:
    âœ”ï¸ GitHub
    âœ”ï¸ GitLab
    âœ”ï¸ Bitbucket
â¤ But integrated with AWS IAM and security services.


ğŸ” Why CodeCommit?
| Feature                          | Benefit                     |
| -------------------------------- | --------------------------- |
| Fully private                    | Secure enterprise projects  |
| IAM-based access                 | No external user management |
| High scalability                 | Amazon-managed backend      |
| No size limit per repo           | Store large binaries        |
| Encrypted by default             | At rest & in transit        |
| Integrated with AWS DevOps tools | CodeBuild, CodePipeline     |


ğŸ” Authentication Options
| Method                             | Best For                            |
| ---------------------------------- | ----------------------------------- |
| **IAM User HTTPS Git credentials** | Developers using HTTPS              |
| **SSH Keys**                       | Secure local access                 |
| **AWS CLI with IAM Role**          | CI/CD systems & automated workflows |


ğŸ” Repository Internal Structure
Standard Git â€”
    âœ”ï¸ Branches (main, develop, feature branches)
    âœ”ï¸ Merge Requests / Pull Requests
    âœ”ï¸ Commit history & versioning

You can enforce:
    âœ”ï¸ Branch protection
    âœ”ï¸ Approval rules
    âœ”ï¸ Code reviews


ğŸ” CI/CD Example Using AWS DevOps Stack
Pipeline Structure
Developer Pushes Code to CodeCommit
        â”‚
        â–¼
ğŸ“Œ CodePipeline Triggered
        â”‚
        â–¼
ğŸ”¨ CodeBuild â†’ Build & Test â†’ Create Artifact (.zip/.jar)
        â”‚
        â–¼
ğŸ“¦ Store Artifact in S3/ ECR (for containers)
        â”‚
        â–¼
ğŸš€ CodeDeploy deploys to EC2 / ECS / Lambda
        â”‚
        â–¼
ğŸ“ˆ CloudWatch monitors health


ğŸ” Testing in CI/CD
Types of automated tests executed in CodeBuild:

| Test Type           | Purpose                             |
| ------------------- | ----------------------------------- |
| Unit Tests          | Validate code logic                 |
| Integration Tests   | Verify interactions between modules |
| Performance Testing | Load testing before production      |
| Security Scans      | Find vulnerabilities                |
ğŸ‘‰ CodeBuild outputs a status â†’ success/failure â†’ pipeline continues or stops.


ğŸ” Deployment Strategies Supported by AWS
| Strategy            | Best For                     | Tools                      |
| ------------------- | ---------------------------- | -------------------------- |
| **Blue/Green**      | Zero downtime, critical apps | CodeDeploy + Load Balancer |
| **Canary**          | Gradual rollout of risk      | Lambda deployments         |
| **Rolling Updates** | Scale-out services           | ECS/Fargate/K8s            |


Rollback strategies are automated if:
    âœ”ï¸ Deployment health checks fail
    âœ”ï¸ Errors spike after release


ğŸ” Why Companies Prefer CI/CD with AWS?
| Advantage                         | Impact                         |
| --------------------------------- | ------------------------------ |
| Fully Managed                     | No Jenkins servers to maintain |
| Deep AWS integration              | IAM security, VPC networking   |
| Auto-scaling Build Infrastructure | Faster builds                  |
| Enterprise Security               | KMS, IAM, VPC endpoints        |
| Global deployment                 | Multi-region pipelines         |


ğŸ” Real-World Use Case Example (Web App Deployment)
Node.js App â†’ CodeCommit
Pipeline:
  Stage 1: Source â†’ CodeCommit
  Stage 2: Build â†’ CodeBuild (run tests)
  Stage 3: Deploy â†’ CodeDeploy to EC2 Fleet
Monitoring â†’ CloudWatch + Alarms

ğŸŒŸ Automatic:
    âœ”ï¸ Builds on code push
    âœ”ï¸ Deployment to servers
    âœ”ï¸ Failover rollback


ğŸš« Disadvantages of CI/CD on AWS
â¤ Vendor lock-in â€” tightly integrated with AWS environment
â¤ Cost may increase with frequent builds & deployments
â¤ Complex initial setup for large enterprise pipelines
â¤ Debugging failures in automated pipelines can be difficult
â¤ Learning curve for DevOps & AWS services


ğŸš« Disadvantages of AWS CodeCommit
â¤ Less popular than GitHub/GitLab (community support is smaller)
â¤ UI is not as user-friendly as competitors
â¤ No public repositories â†’ limits open-source collaboration
â¤ Region-specific repos â†’ must handle region constraints
â¤ Third-party tool integration weaker than GitHub/Lab



#######################
ğŸ”·  AWS Code Pipeline
#######################
â¤ AWS CodePipeline is a fully managed CI/CD orchestration service that automates:
    âœ”ï¸ Source retrieval (CodeCommit, GitHub, S3)
    âœ”ï¸ Build (via CodeBuild)
    âœ”ï¸ Testing (via integrations)
    âœ”ï¸ Deployment (via CodeDeploy / ECS / Lambda)
â¤ It manages the entire pipeline as connected stages, triggered automatically on code changes.


ğŸ” Pipeline Structure
Pipeline Structure
Developer Pushes Code to CodeCommit
        â”‚
        â–¼
ğŸ“Œ CodePipeline Triggered
        â”‚
        â–¼
ğŸ”¨ CodeBuild â†’ Build & Test â†’ Create Artifact (.zip/.jar)
        â”‚
        â–¼
ğŸ“¦ Store Artifact in S3/ ECR (for containers)
        â”‚
        â–¼
ğŸš€ CodeDeploy deploys to EC2 / ECS / Lambda
        â”‚
        â–¼
ğŸ“ˆ CloudWatch monitors health


ğŸ” Why CodePipeline?
| Benefit                    | Impact                                               |
| -------------------------- | ---------------------------------------------------- |
| Fully managed service      | No servers or software maintenance                   |
| Native AWS integrations    | Secured with IAM, integrated with other DevOps tools |
| Event-driven automation    | Auto-trigger pipeline from code commits              |
| Visual pipeline UI         | Real-time workflow monitoring                        |
| High availability built-in | No downtime for pipeline workloads                   |
| Fast setup                 | Pipelines created in minutes                         |


ğŸ” When CodePipeline is Best
âœ”ï¸ Teams already inside AWS
âœ”ï¸ Microservices architecture using ECS/Fargate/Lambda
âœ”ï¸ Auto-scaling, auto-secured DevOps pipelines
âœ”ï¸ Enterprises requiring strict IAM governance


ğŸ” When CodePipeline is Not Best
âŒ Teams not inside AWS
âŒ Large-scale, complex DevOps pipelines
âŒ Teams using multiple cloud providers
âŒ Teams using other DevOps tools


ğŸ” Strengths of Jenkins
| Feature                   | Benefit                                     |
| ------------------------- | ------------------------------------------- |
| Plugin ecosystem (~1800+) | Unlimited custom workflows                  |
| Cloud-agnostic            | Multi-cloud / On-prem flexibility           |
| Mature community          | Tons of tutorials & integration support     |
| Self-hosted               | Full control over infrastructure & security |


ğŸ” Weaknesses of Jenkins
| Issue                               | Impact                        |
| ----------------------------------- | ----------------------------- |
| Requires server setup & maintenance | Operations overhead           |
| Plugin failures & dependency issues | Pipeline instability          |
| Scaling is manual                   | More infra cost & management  |
| Security maintenance needed         | Vulnerabilities if mismanaged |


ğŸ” Comparison - CodePipeline vs Jenkins
| Feature          | AWS CodePipeline           | Jenkins                    |
| ---------------- | -------------------------- | -------------------------- |
| Type             | Managed CI/CD              | Open-source CI/CD          |
| Setup effort     | Very low                   | High                       |
| Scaling          | Automatic                  | Manual (HA setup required) |
| Cost             | Pay for usage              | Server cost + Maintenance  |
| Security         | IAM/KMS/VPC Managed by AWS | User responsibility        |
| Customization    | Moderate                   | Very high                  |
| Multi-cloud      | Limited (AWS-centric)      | Excellent                  |
| Plugin ecosystem | Limited                    | Massive                    |
| Pipeline as Code | Supported                  | Supported (Jenkinsfile)    |


ğŸ” Open Source vs AWS Managed Services
| Category       | Jenkins (Open Source)     | CodePipeline (AWS Managed) |
| -------------- | ------------------------- | -------------------------- |
| Infrastructure | You manage                | AWS manages                |
| Flexibility    | Very high                 | Limited to AWS ecosystem   |
| Reliability    | Depends on setup          | Highly reliable by default |
| Security       | You maintain patches      | AWS maintains              |
| Cost Model     | Your compute bill         | Service usage pricing      |
| Governance     | Custom                    | IAM governance             |
| Learning Curve | High for DevOps beginners | Easy for AWS users         |


ğŸ” Real-World Recommendation
| Scenario                                            | Suggested Tool                     |
| --------------------------------------------------- | ---------------------------------- |
| Smallâ€“medium teams fully on AWS                     | CodePipeline                       |
| Hybrid infrastructure or enterprise legacy systems  | Jenkins + CodePipeline integration |
| Highly regulated industries needing on-prem control | Jenkins                            |


##################
ğŸ”· AWS CodeBuild
##################
AWS CodeBuild is a fully managed Continuous Integration (CI) service that:
âœ”ï¸ Compiles source code
âœ”ï¸ Runs tests
âœ”ï¸ Produces deployable artifacts
âœ”ï¸ Scales automatically
âœ”ï¸ Integrates deeply with AWS DevOps tools
ğŸ‘‰ A cloud-native replacement for Jenkins build agents / runners.


ğŸ” Why do we need CodeBuild?
| Without CodeBuild                                     | With CodeBuild                                  |
| ----------------------------------------------------- | ----------------------------------------------- |
| Developer machines handle builds â†’ slows productivity | CI server handles builds automatically          |
| Hard to scale large builds                            | Auto-scale, build several versions in parallel  |
| Manual testing leads to delays                        | Automated testing ensures early issue detection |
| On-prem build servers require maintenance             | Zero infrastructure to manage                   |
| Slow release cycles                                   | Faster & frequent releases                      |


ğŸ” Where does CodeBuild fit in CI/CD pipeline?
Developer Pushes Code â†’
  CodePipeline triggers â†’
    CodeBuild builds & tests â†’
      Output artifacts â†’
        CodeDeploy/AWS service deploys


ğŸ” Key Concepts in CodeBuild
1ï¸âƒ£ Build Project
Contains configuration:
    âœ”ï¸ Source repo (CodeCommit, GitHub, S3, Bitbucket)
    âœ”ï¸ Build environment
    âœ”ï¸ IAM execution role
    âœ”ï¸ Artifacts output settings

2ï¸âƒ£ BuildSpec File (buildspec.yml)
â¤ Defines build & test steps + commands to execute
â¤ Located in source repo root.

âœ… Example:
version: 0.2
phases:
  install:
    commands:
      - echo Installing dependencies
      - npm install
  build:
    commands:
      - echo Build started
      - npm run build
artifacts:
  files:
    - '**/*'


3ï¸âƒ£ Build Environment
Configured using:
    âœ”ï¸ OS â†’ Amazon Linux, Ubuntu, Windows, Custom Docker image
    âœ”ï¸ Runtime â†’ Java, Python, Node.js, DotNet, Go, Docker-in-Docker
    âœ”ï¸ Custom Docker environment is major strength.


ğŸ” Execution Flow
Start Build â†’
Load BuildSpec â†’
Install Phase â†’
Pre-Build Phase â†’
Build Phase â†’
Post-Build Phase â†’
Upload Artifacts â†’
Result sent to CodePipeline (or S3)


ğŸ” Source Providers Supported
| Provider          | Native support |
| ----------------- | -------------- |
| CodeCommit        | âœ”ï¸             |
| GitHub            | âœ”ï¸             |
| GitHub Enterprise | âœ”ï¸             |
| Bitbucket         | âœ”ï¸             |
| S3                | âœ”ï¸             |


ğŸ” Security â€” IAM roles & encryption
â¤ CodeBuild runs inside isolated containers
â¤ Uses IAM Service Role for permissions
â¤ Encrypts artifacts using KMS
â¤ VPC support:
    âœ”ï¸ Build container can run inside private subnet


ğŸ” Scalability
| Traditional CI Servers        | CodeBuild                             |
| ----------------------------- | ------------------------------------- |
| Queue builds during peak load | Creates unlimited concurrent builders |
| Manual scale-up required      | Auto-scale & pay-per-second           |


ğŸ” Artifacts
â¤ Output options:
    âœ”ï¸ S3
    âœ”ï¸ CodePipeline
    âœ”ï¸ ECR (container images)
    âœ”ï¸ Lambda deployment package

â¤ Supports caching for faster builds:
    âœ”ï¸ Local cache (on build host)
    âœ”ï¸ S3 bucket cache


ğŸ” Logging & Monitoring
| Feature       | Service            |
| ------------- | ------------------ |
| Build logs    | CloudWatch Logs    |
| Metrics       | CloudWatch Metrics |
| Notifications | EventBridge / SNS  |


ğŸ” Testing Capabilities
â¤ Runs automated:
    âœ”ï¸ Unit tests
    âœ”ï¸ Integration tests
    âœ”ï¸ Security scan
    âœ”ï¸ Code coverage reports

â¤ You can use:
    âœ”ï¸ JUnit, Mocha, PyTest, Jest, SonarQube etc.


ğŸ”„ Integrations
| Service         | Role                   |
| --------------- | ---------------------- |
| CodePipeline    | Pipeline Orchestration |
| CodeDeploy      | Deployment Automation  |
| ECR             | Container builds       |
| CloudWatch      | Logs + Alarms          |
| Secrets Manager | Secure credentials     |
| VPC             | Private builds         |


ğŸ” Real-World Use Cases
| Use Case            | How CodeBuild helps                   |
| ------------------- | ------------------------------------- |
| Microservices       | Parallel builds for multiple repos    |
| Containers          | Docker-in-Docker builds â†’ push to ECR |
| Serverless          | Build Lambda ZIP artifact             |
| Test automation     | Run tests after every merge           |
| Security compliance | Automated vulnerability scanning      |


ğŸ” CodeBuild vs Jenkins Build Agents
| Feature     | CodeBuild               | Jenkins                      |
| ----------- | ----------------------- | ---------------------------- |
| Scaling     | Auto-managed by AWS     | Manual                       |
| Security    | IAM + network isolation | You secure everything        |
| Maintenance | None                    | High                         |
| Cost        | Pay per second          | Must pay infra & maintenance |
| Flexibility | Strong on AWS workloads | Strong for any workload      |


###################
ğŸ”· AWS CodeDeploy
###################
AWS CodeDeploy is a fully managed deployment automation service designed to:
    âœ”ï¸ Automate application deployments
    âœ”ï¸ Across EC2, On-Prem servers, Lambda, ECS
    âœ”ï¸ With Zero Downtime strategies

It ensures that:
    âœ”ï¸ Deployments are reliable
    âœ”ï¸ Rollbacks are quick
    âœ”ï¸ Releases are repeatable & traceable


ğŸ” Why Do We Need CodeDeploy?
| Problem Without CodeDeploy     | CodeDeploy Solution                    |
| ------------------------------ | -------------------------------------- |
| Manual deployments â†’ risky     | Automated & consistent                 |
| Service downtime               | Blue/Green & Canary                    |
| Hard rollback                  | Automatic rollback on failure          |
| Multi-server update complexity | Coordinated deployment + health checks |
| Complex deployment scripting   | Single deployment config + app spec    |


ğŸ” CodeDeploy Deployment Types
| Deployment Type | Target Platform    | Use Case                                 |
| --------------- | ------------------ | ---------------------------------------- |
| **EC2/On-Prem** | Virtual machines   | Traditional apps, monolith, hybrid infra |
| **AWS Lambda**  | Serverless         | Version + traffic shifting               |
| **ECS/Fargate** | Containerized apps | Microservices & orchestrated workloads   |


ğŸ” Deployment strategies
| Strategy                      | Behavior                                            | Best For                                |
| ----------------------------- | --------------------------------------------------- | --------------------------------------- |
| **In-Place (Rolling update)** | Update servers 1-by-1 without replacement           | Stateful apps                           |
| **Blue/Green Deployment**     | New environment created â†’ switch traffic when ready | Zero downtime, safe rollout, reversible |
| **Canary** *(Lambda/ECS)*     | Send small traffic % first â†’ increase gradually     | Reducing release risk                   |


ğŸ” Blue/Green Deployment Flow (Example: EC2 + Load Balancer)
   OLD PROD (Blue) --- Traffic
          |
CodeDeploy Starts
          â†“
Deploy to NEW (Green)
          | 
Health Checks OK?
          |
Switch Traffic to Green âœ Blue kept for rollback
If failure â†’ revert to old version automatically.


ğŸ” CodeDeploy Architecture Components
| Component               | Purpose                                          |
| ----------------------- | ------------------------------------------------ |
| **Application**         | Logical unit for deployment                      |
| **Deployment Group**    | Group of EC2/On-Prem instances                   |
| **Agent**               | CodeDeploy daemon installed on instances         |
| **AppSpec File**        | Deployment instructions (hooks + file locations) |
| **Revision / Artifact** | Application package stored in S3 or GitHub       |
| **Load Balancer**       | Traffic control for Blue/Green                   |


ğŸ” AppSpec File â€” The Core of CodeDeploy
Defines what to deploy + how deployment runs.

âœ… Example 
ğŸ”— (EC2 / Linux: appspec.yml)
version: 0.0
os: linux

files:
  - source: /
    destination: /var/www/html/

hooks:
  BeforeInstall:
    - location: scripts/stop_server.sh
  AfterInstall:
    - location: scripts/install_dependencies.sh
  ApplicationStart:
    - location: scripts/start_server.sh
  ValidateService:
    - location: scripts/health_check.sh

ğŸ‘‰ Each hook runs in order â†’ helps ensure safe deployment.


ğŸ” For Lambda AppSpec
Uses traffic shifting config instead of file copy.

âœ… Example:
version: 0.0
Resources:
  - MyLambda:
      Type: AWS::Lambda::Function
      Properties:
        Name: myFunction
        Alias: live
        CurrentVersion: 1
        TargetVersion: 2
      Hooks:
        - BeforeAllowTraffic: testHook.sh


ğŸ” Security and Permissions
| Security Layer          | Description                           |
| ----------------------- | ------------------------------------- |
| IAM Role for CodeDeploy | Permissions to update resources       |
| IAM Role for EC2 Agents | EC2 instances allow CodeDeploy access |
| KMS                     | Encrypt artifacts in S3               |
| ALB/NLB/Target Groups   | Used for Blue/Green routing           |
ğŸ‘‰ Traffic control + health monitoring through Elastic Cloud Balancing


ğŸ” Supported Artifact Sources
| Storage         | Support         |
| --------------- | ----------------|
| **Amazon S3**   | âœ”ï¸ Recommended |
| **GitHub Repo** | âœ”ï¸             |
| **Bitbucket**   | âœ”ï¸ Via webhook |

Artifacts typically include:
    âœ”ï¸ application code
    âœ”ï¸ scripts
    âœ”ï¸ config files
    âœ”ï¸ Docker images (for ECS)


ğŸ” Monitoring & Visibility
| Tool               | Purpose                          |
| ------------------ | -------------------------------- |
| CloudWatch Logs    | Execution logs                   |
| CloudWatch Events  | Deployment event triggers        |
| SNS Notifications  | Alerts on fail/success           |
| CodeDeploy Console | Health, status, rollback actions |


ğŸ” Auto-Rollback Scenarios
â¤ Rollback triggers when:
    âœ”ï¸ Health check fails
    âœ”ï¸ Deployment lifecycle hook fails
    âœ”ï¸ Alarm triggered on CloudWatch metric
â¤ Rollback = instant switch to previous stable version


ğŸ” CodeDeploy Best Practices
âœ”ï¸ Always test scripts locally before pipeline use
âœ”ï¸ Enable Blue/Green with health checks for production
âœ”ï¸ Store secrets in AWS Secrets Manager
âœ”ï¸ Use AMI bake strategy for zero configuration drift
âœ”ï¸ Maintain proper tagging for instance selection
âœ”ï¸ Version everything (scripts + app + infra)


ğŸ” CodeBuild vs CodeDeploy 
| Feature        | CodeBuild      | CodeDeploy          |
| -------------- | -------------- | ------------------- |
| Purpose        | Build & Test   | Release & Deploy    |
| Output         | Artifacts      | Running application |
| Execution      | In a container | On actual workloads |
| Pipeline Stage | CI             | CD                  |
ğŸ‘‰ They work together in CI/CD via CodePipeline.


####################
ğŸ”· AWS CloudWatch
####################
AWS CloudWatch is a fully managed monitoring and observability service for AWS resources, applications, and infrastructure.

It helps you:
    âœ”ï¸ Collect & track metrics
    âœ”ï¸ Collect & monitor logs
    âœ”ï¸ Set alarms and trigger automated actions
    âœ”ï¸ Visualize data using dashboards
    âœ”ï¸ Monitor application performance & health


ğŸ” Major Components
| Component                           | Purpose                                                                                 |
| ----------------------------------- | --------------------------------------------------------------------------------------- |
| **CloudWatch Metrics**              | Numeric data points for system performance (CPU, memory, requests count, latency, etc.) |
| **CloudWatch Logs**                 | Collect logs from applications, Lambda, ECS, EC2, RDS, etc.                             |
| **CloudWatch Alarms**               | Trigger notifications/actions when thresholds are breached (e.g., auto-scale EC2)       |
| **CloudWatch Events / EventBridge** | Respond to state changes & scheduled tasks (e.g., start/stop EC2 every night)           |
| **CloudWatch Dashboards**           | Custom visual monitoring panels                                                         |
| **CloudWatch Synthetics**           | Monitor APIs and endpoints using canaries                                               |
| **CloudWatch Contributor Insights** | Analyzes high-traffic logs (e.g. top users, IPs causing spikes)                         |


ğŸ” How it works
AWS Resources â†’ CloudWatch Metrics/Logs â†’ Store & Analyze â†’ Alarms â†’ Trigger SNS/Auto Scaling/Lambda


ğŸ” Common Use Cases
â¤ System Monitoring (CPU, RAM, I/O, Network)
â¤ Application Log Analysis
â¤ Auto-scaling based on performance
â¤ Trigger alerts via SNS â†’ Email / Slack
â¤ Cost monitoring through AWS Billing Alarms
â¤ Detect errors in Lambda, ECS, or API Gateway
â¤ Scheduling tasks using EventBridge rules


âœ… CloudWatch Integration Example
â¤ EC2 Monitoring â†’ CPU Utilization alarms
â¤ Auto Scaling â†’ scale up/down based on traffic
â¤ Lambda â†’ function failure alarms
â¤ RDS â†’ DB connections & storage monitoring
â¤ API Gateway â†’ latency & error rate alerts


ğŸ” Benefits
â¤ Fully managed (no servers needed)
â¤ Near real-time monitoring
â¤ Unified place for logs, metrics, alarms
â¤ Tight integration with AWS ecosystem
â¤ Supports automated operational responses


âš ï¸ Limitations
â¤ Extra pricing for detailed monitoring & custom metrics
â¤ Log search and analysis can be slow
â¤ Console UI can become complex for large applications


###############
ğŸ”· AWS Lambda
###############
Lambda is an event-driven, serverless compute service that automatically:
â¤ Runs code without provisioning servers
â¤ Scales automatically based on demand
â¤ Charges only for compute time used (ms basis)

ğŸ” Key Features
â¤ No server management â†’ AWS manages everything
â¤ Automatic scaling â†’ runs from 0 to millions of requests
â¤ Pay-as-you-use pricing model
â¤ Supports multiple runtimes: Node.js, Python, Java, Go, .NET, Ruby
â¤ Triggers on events
â¤ Built-in fault tolerance
â¤ Can integrate with 200+ AWS services


ğŸ” Lambda Execution Model
Event Source (S3, API Gateway, CloudWatch, DynamoDB, SNS etc.)
          â†“
   Trigger Lambda Code
          â†“
 Return Response / Perform Action


ğŸ” Common Event Sources
| Service           | Example Trigger                 |
| ----------------- | ------------------------------- |
| S3                | New file uploaded in bucket     |
| API Gateway       | API call invokes Lambda         |
| DynamoDB Streams  | Database change triggers Lambda |
| SNS / SQS         | Messaging based invocation      |
| CloudWatch Events | Scheduled jobs (Cron)           |


ğŸ” Deployment Package
â¤ Lambda requires:
    âœ”ï¸ Code (.zip or container image)
    âœ”ï¸ Optional dependencies
    âœ”ï¸ IAM execution role
â¤ Memory range: 128 MB to 10 GB
â¤ Timeout: max 15 minutes
â¤ Ephemeral storage (/tmp): up to 10 GB


ğŸ” Lambda Invocation Types
| Type                     | Behavior                              |
| ------------------------ | ------------------------------------- |
| **Synchronous**          | Immediate response (e.g. API Gateway) |
| **Asynchronous**         | Retries if fails (e.g. S3 events)     |
| **Event Source Mapping** | Streams polling (DynamoDB, Kinesis)   |


ğŸ” Use Cases
â¤ REST APIs (via API Gateway)
â¤ Real-time file processing (S3)
â¤ Event-driven Microservices
â¤ Serverless CRON jobs
â¤ IoT event processing
â¤ Chatbots, notifications
â¤ ETL & Data transformations


ğŸ” Lambda Execution Role
Lambda uses IAM Role to access AWS resources:
âœ… e.g. read S3 bucket, write DynamoDB table


ğŸ” Scaling Model
â¤ Each event = new Lambda instance
â¤ Horizontal auto-scaling
â¤ Concurrency limit protects from overload (default: 1000 per region)
â¤ Provisioned Concurrency for low-latency predictable execution


ğŸ” Performance Optimization Tips
â¤ Use provisioned concurrency to avoid cold starts
â¤ Keep deployment package lightweight
â¤ Use VPC only if necessary (otherwise causes slow cold starts)
â¤ Utilize cloud-native services (S3, DynamoDB) to reduce external call latency


ğŸ” Lambda vs EC2?
| Lambda                   | EC2                    |
| ------------------------ | ---------------------- |
| Serverless, auto-scaling | Manual provisioning    |
| Pay only per execution   | Pay for uptime         |
| Short-running tasks      | Long-running workloads |


âš ï¸ Limitations (Short)
â¤ Max 15 min execution time
â¤ Limited ephemeral storage (/tmp)
â¤ Vendor lock-in
â¤ Not ideal for CPU-intensive/long-running workloads